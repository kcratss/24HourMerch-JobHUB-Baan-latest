/**
 * ParamQuery Pro v3.3.2
 * 
 * Copyright (c) 2012-2016 Paramvir Dhindsa (http://paramquery.com)
 * Released under Commercial license
 * http://paramquery.com/pro/license
 * 
 */
(function(l){var n=l.ui.autocomplete.prototype,k=n._renderMenu,c=n._renderItem;n._renderMenu=function(a,b){k.call(this,a,b);var d=this.options.selectItem;if(d&&d.on){var d=d.cls,d=void 0===d?"ui-state-highlight":d,m=this.element.val();m&&d&&l("a",a).filter(function(){return l(this).text()===m}).addClass(d)}};n._renderItem=function(a,b){var d=c.call(this,a,b),m=this.options.highlightText;if(m&&m.on){var g=this.element.val();if(g){var g=new RegExp("("+g+")","i"),e=b.label;if(g.test(e)){var h=m.style,
m=m.cls,e=e.replace(g,"<span style='"+(void 0===h?"font-weight:bold;":h)+"' class='"+(void 0===m?"":m)+"'>$1</span>");d.find("a").html(e)}}}return d};var n=l.paramquery=l.paramquery||{},a=function(a,b,d,m){b=b.slice();for(var g=[],e=0,h=b.length;e<h;e++){var u=b[e],B=u.cb,z=u.one;if(z){if(u._oncerun)continue;u._oncerun=!0}!1===B.call(a,d,m)&&(d.preventDefault(),d.stopPropagation());z&&g.push(e);if(d.isImmediatePropagationStopped())break}if(g.length)for(e=g.length-1;0<=e;e--)b.splice(g[e],1)};n._trigger=
function(f,b,d){var m,g,e=this.listeners,h=e[f],u=this.options,B=u.allEvents,z=u.bubble,c=this.element,p=u[f];d=d||{};b=l.Event(b);b.type=this.widgetName+":"+f;b.target=c[0];if(g=b.originalEvent)for(m in g)m in b||(b[m]=g[m]);B&&"function"==typeof B&&B.call(this,b,d);if(h&&h.length&&(a(this,h,b,d),b.isImmediatePropagationStopped())||u.trigger&&(c[z?"trigger":"triggerHandler"](b,d),b.isImmediatePropagationStopped()))return!b.isDefaultPrevented();p&&!1===p.call(this,b,d)&&(b.preventDefault(),b.stopPropagation());
(h=e[f+"Done"])&&h.length&&a(this,h,b,d);return!b.isDefaultPrevented()};n.on=function(){var a=arguments;if("boolean"==typeof a[0])var b=a[0],d=a[1],m=a[2],a=a[3];else d=a[0],m=a[1],a=a[2];for(var d=d.split(" "),g=0;g<d.length;g++){var e=d[g];if(e){var h=m,u=a,B=b,z=this.listeners[e];z||(z=this.listeners[e]=[]);z[B?"unshift":"push"]({cb:h,one:u})}}return this};n.one=function(){for(var a=arguments.length,b=[],d=0;d<a;d++)b[d]=arguments[d];b[a]=!0;return this.on.apply(this,b)};n.off=function(a,b){for(var d=
a.split(" "),m=0;m<d.length;m++){var g=d[m];if(g){var e=g;if(g=b){if(e=this.listeners[e]){for(var h=[],u=0,B=e.length;u<B;u++)g==e[u].cb&&h.push(u);if(h.length)for(u=h.length-1;0<=u;u--)e.splice(h[u],1)}}else delete this.listeners[e]}}return this};l.widget("paramquery.pqTooltip",l.ui.tooltip,{options:{items:"td.pq-has-tooltip,td[title]",position:{my:"center top",at:"center bottom"},content:function(){var a=l(this),b=a.closest(".pq-grid").pqGrid("getInstance").grid,d=b.getCellIndices({$td:a});return(b=
b.data({rowIndx:d.rowIndx,dataIndx:d.dataIndx,data:"pq_valid"}).data)?(a=b.icon,b=b.msg,(""==a?"":"<span class='ui-icon "+a+" pq-tooltip-icon'></span>")+(null!=b?b:"")):a.attr("title")}},_create:function(){this._super();var a=this.element,b=this.eventNamespace;a.on("pqtooltipopen"+b,function(b,a){var g=l(b.target),e=l(b.originalEvent.target);e.on("remove",function(e){g.pqTooltip("close",e,!0)});a.tooltip.css("zIndex",e.zIndex()+5);if(g.is(".pq-grid")){var h=g.pqGrid("getCellIndices",{$td:e}),u=h.dataIndx,
B;(B=g.pqGrid("getRowData",{rowIndx:h.rowIndx}))&&(B=B.pq_celldata)&&(B=B[u])&&(B=B.pq_valid)&&(u=B,h=u.style,a.tooltip.addClass(u.cls),u=a.tooltip.attr("style"),a.tooltip.attr("style",u+";"+h));g.find("div.pq-sb-horiz,div.pq-sb-vert").on("pqscrollbardrag",function(h,u){h.currentTarget=e[0];g.pqTooltip("close",h,!0)})}});a.on("pqtooltipclose"+b,function(b,a){var g=l(b.target);l(b.originalEvent.target).off("remove");g.is(".pq-grid")&&g.find("div.pq-sb-horiz,div.pq-sb-vert").off("pqscrollbardrag")})}})})(jQuery);
(function(l){var n=window.pq=n||{},k=l.paramquery;n.arrayUnique=function(b,d){var a=[],g,e=b.length,h,u={},B;for(g=0;g<e;g++)h=b[g],B=d?h[d]:h,u.hasOwnProperty(B)||(u[B]=1,a.push(h));return a};k.select=function(b){var d=b.options,a=b.groupIndx,g=b.labelIndx,e=b.valueIndx,h=null!=g&&null!=e,u=null!=a,B=b.prepend,f=b.dataMap,c,p,v;b=["<select ",b.attr," >"];if(B)for(var k in B)b.push('<option value="',k,'">',B[k],"</option>");if(d&&d.length){for(var B=0,l=d.length;B<l;B++){var s=d[B];if(h){var x=s[e],
w=s.pq_disabled?'disabled="disabled" ':"",y=s.pq_selected?'selected="selected" ':"";if(null!=x){if(f){c={};for(v=0;v<f.length;v++){var n=f[v];c[n]=s[n]}c="data-map='"+JSON.stringify(c)+"'"}else c="";v=c;u&&(n=s.pq_disabled_group?'disabled="disabled" ':"",c=s[a],p!=c&&(null!=p&&b.push("</optgroup>"),b.push('<optgroup label="',c,'" ',n," >"),p=c));g==e?b.push("<option ",y,w,v,">",x,"</option>"):b.push("<option ",y,w,v,' value="',x,'">',s[g],"</option>")}}else if("object"==typeof s)for(k in s)b.push('<option value="',
k,'">',s[k],"</option>");else b.push("<option>",s,"</option>")}u&&b.push("</optgroup>")}b.push("</select>");return b.join("")};l.fn.pqval=function(b){if(b){if(b.incr)return b=this.data("pq_value"),this.prop("indeterminate",!1),b?(b=!1,this.prop("checked",!1)):!1===b?(b=null,this.prop("indeterminate",!0),this.prop("checked",!1)):(b=!0,this.prop("checked",!0)),this.data("pq_value",b),b;b=b.val;this.data("pq_value",b);this.prop("indeterminate",!1);null==b?(this.prop("indeterminate",!0),this.prop("checked",
!1)):b?this.prop("checked",!0):this.prop("checked",!1);return this}return this.data("pq_value")};k.xmlToArray=function(b,d){var a=d.itemParent,g=d.itemNames,e=[];l(b).find(a).each(function(h,u){var b=l(u),d=[];l(g).each(function(e,h){d.push(b.find(h).text().replace(/\r|\n|\t/g,""))});e.push(d)});return e};k.xmlToJson=function(b,d){var a=d.itemParent,g=d.itemNames,e=[];l(b).find(a).each(function(h,u){for(var b=l(u),d={},a=0,f=g.length;a<f;a++){var m=g[a];d[m]=b.find(m).text().replace(/\r|\n|\t/g,"")}e.push(d)});
return e};k.tableToArray=function(b){var d=[],a=[];b=l(b).children("tbody").children("tr");var g=b.length?l(b[0]):l(),e=1<b.length?l(b[1]):l();g.children("th,td").each(function(h,u){var b=l(u),a=b.html(),b=b.width(),g="left";if(e.length)var f=e.find("td:eq("+h+")").attr("align"),g=f?f:g;d.push({title:a,width:b,dataType:"string",align:g,dataIndx:h})});b.each(function(e,u){if(0!=e){var b=[];l(u).children("td").each(function(e,h){b.push(l.trim(l(h).html()))});a.push(b)}});return{data:a,colModel:d}};
var c={};k.formatCurrency=function(b,d){var a=parseFloat(b);if(!isNaN(a)){var g=0>a,e;a:{var h=d,u,B;if(h){h=h.split(":");h=g&&1<h.length?h[1]:h[0];if(u=c[h]){e=u;break a}B=/^([^#]*|&#[^#]*)?[\,\.#0]*?([\,\s\.]?)([#0]*)([\,\s\.]?)([0]*?)(\s*[^#^0]*|&#[^#]*)?$/;(B=h.match(B))&&B.length&&(u={symbol:B[1]||"",thouSep:B[2],thousand:B[3].length,decSep:B[4],decimal:B[5].length,symbolEnd:B[6]||""},c[h]=u)}e=u=u||{symbol:"",symbolEnd:"",thouSep:",",thousand:3,decSep:".",decimal:2}}h=e.symbol;u=e.symbolEnd;
B=e.thousand;var f=e.thouSep,r=e.decSep,p=e.decimal,a=a.toFixed(p);e=a.length;var v=p+r.length,p=a.substring(0,e-v),a=a.substring(e-v+r.length,e);e=p.match(/\d/g).reverse();p=[];for(v=0;v<e.length;v++)0<v&&0==v%B&&p.push(f),p.push(e[v]);p=p.reverse();p=p.join("");return(g?"-":"")+h+p+r+a+u}};n.formatNumber=k.formatCurrency;n.validation={is:function(b,d){if("string"==b||!b)return!0;b=b.substring(0,1).toUpperCase()+b.substring(1,b.length);return this["is"+b](d)},isFloat:function(b){var d=parseFloat(b);
return isNaN(d)||d!=b?!1:!0},isInteger:function(b){var d=parseInt(b);return isNaN(d)||d!=b?!1:!0},isDate:function(b){b=Date.parse(b);return isNaN(b)?!1:!0}};var a=[],f=k.toLetter=function(b){var d=a[b];if(!d){b++;var m=b%26,d=b/26|0,m=m?String.fromCharCode(64+m):(--d,"Z"),d=d?f(d-1)+m:m;b--;a[b]=d}return d};k.generateData=function(b,d){for(var a=[],g=0;g<d;g++)a[g]=f(g);for(var e=[],g=0;g<b;g++)for(var h=e[g]=[],u=0;u<d;u++)h[u]=a[u]+(g+1);return e}})(jQuery);
(function(l){function n(b,d,a){return b?l("<span tabindex='0' rel='tooltip' data-placement='top' title='"+d+"' class='btn btn-xs "+a+"'></span>"):l("<span class='pq-ui-button ui-widget-header' tabindex='0' rel='tooltip' title='"+d+"'><span class='ui-icon ui-icon-"+a+"'></span></span>")}function k(b,d){b.bind("click keydown",function(b){if("keydown"!=b.type||b.keyCode==l.ui.keyCode.ENTER)return d.call(this,b)})}function c(b,d,a){d[a?"addClass":"removeClass"]("disabled").css("pointer-events",a?"none":
"").attr("tabindex",a?"":"0")}var a={options:{bootstrap:{on:!1,pager:"",nextIcon:"glyphicon glyphicon-forward",prevIcon:"glyphicon glyphicon-backward",firstIcon:"glyphicon glyphicon-step-backward",lastIcon:"glyphicon glyphicon-step-forward",refreshIcon:"glyphicon glyphicon-refresh"},curPage:0,totalPages:0,totalRecords:0,msg:"",rPPOptions:[10,20,30,40,50,100],rPP:20},_regional:{strDisplay:"Displaying {0} to {1} of {2} items.",strFirstPage:"First Page",strLastPage:"Last Page",strNextPage:"Next Page",
strPage:"Page {0} of {1}",strPrevPage:"Previous Page",strRefresh:"Refresh",strRpp:"Records per page:{0}"}};l.extend(a.options,a._regional);a._create=function(){var b=this,d=this.options,a=this.element,g=d.bootstrap,e=g.on;this.listeners={};a.addClass("pq-pager "+(e?g.pager:""));this.first=n(e,d.strFirstPage,e?g.firstIcon:"seek-first").appendTo(a);k(this.first,function(e){1<d.curPage&&b._onChange(e,1)});this.prev=n(e,d.strPrevPage,e?g.prevIcon:"seek-prev").appendTo(a);k(this.prev,function(e){1<d.curPage&&
b._onChange(e,d.curPage-1)});l("<span class='pq-separator'></span>").appendTo(a);this.pageHolder=l("<span class='pq-page-placeholder'></span>").appendTo(a);l("<span class='pq-separator'></span>").appendTo(a);this.next=n(e,d.strNextPage,e?g.nextIcon:"seek-next").appendTo(a);k(this.next,function(e){d.curPage<d.totalPages&&b._onChange(e,d.curPage+1)});this.last=n(e,d.strLastPage,e?g.lastIcon:"seek-end").appendTo(a);k(this.last,function(e){d.curPage!==d.totalPages&&b._onChange(e,d.totalPages)});l("<span class='pq-separator'></span>").appendTo(a);
this.rPPHolder=l("<span class='pq-page-placeholder'></span>").appendTo(a);this.$refresh=n(e,d.strRefresh,e?g.refreshIcon:"refresh").appendTo(a);k(this.$refresh,function(e){if(!1===b._trigger("beforeRefresh",e))return!1;b._trigger("refresh",e)});l("<span class='pq-separator'></span>").appendTo(a);this.$msg=l("<span class='pq-pager-msg'></span>").appendTo(a);this._refresh()};a._destroy=function(){this.element.empty().removeClass("pq-pager").enableSelection()};a._setOption=function(b,a){if("curPage"==
b||"totalPages"==b)a*=1;this._super(b,a)};a._setOptions=function(b){var a,f=!1,g=this.options;for(a in b){var e=b[a],h=typeof e;"string"==h||"number"==h?e!=g[a]&&(this._setOption(a,e),f=!0):"function"==typeof e.splice||l.isPlainObject(e)?JSON.stringify(e)!=JSON.stringify(g[a])&&(this._setOption(a,e),f=!0):e!=g[a]&&(this._setOption(a,e),f=!0)}f&&this._refresh();return this};l.widget("paramquery.pqPager",a);pq.pager=function(b,a){var f=l(b).pqPager(a);return f.data("paramqueryPqPager")||f.data("paramquery-pqPager")};
var f=l.paramquery;f.pqPager.regional={};f.pqPager.regional.en=a._regional;a=f.pqPager.prototype;f.pqPager.defaults=a.options;a._refreshPage=function(){var b=this;this.pageHolder.empty();for(var a=this.options,f=a.bootstrap,g=a.strPage.split(" "),e=[],h=0,u=g.length;h<u;h++){var B=g[h];"{0}"==B?e.push("<input type='text' tabindex='0' class='pq-pager-input ",f.on?"":"ui-corner-all","' />"):"{1}"==B?e.push("<span class='total'></span>"):e.push("<span>",B,"</span>")}f=e.join("");f=l(f).appendTo(this.pageHolder);
this.page=f.filter("input").bind("change",function(e){var h=l(this),u=h.val();if(isNaN(u)||1>u)return h.val(a.curPage),!1;u=parseInt(u);if(u>a.totalPages||!1===b._onChange(e,u))return h.val(a.curPage),!1});this.$total=f.filter("span.total")};a._onChange=function(b,a){if(!1===this._trigger("beforeChange",b,{curPage:a})||!1===this._trigger("change",b,{curPage:a}))return!1;this.option({curPage:a})};a._refresh=function(){this._refreshPage();var b=this,a=this.options,f=a.bootstrap;this.rPPHolder.empty();
if(a.strRpp){var g=a.rPPOptions,e=a.strRpp;if(-1!=e.indexOf("{0}")){for(var f=["<select class='",f.on?"":"ui-corner-all","'>"],h=0,u=g.length;h<u;h++){var B=g[h];f.push('<option value="',B,'">',B,"</option>")}f.push("</select>");g=f.join("");e=e.replace("{0}","</span>"+g);e="<span>"+e+"<span class='pq-separator'></span>"}else e="<span>"+e+"</span><span class='pq-separator'></span>";this.$rPP=l(e).appendTo(this.rPPHolder).filter("select").val(a.rPP).change(function(e){var h=l(this),u=h.val();if(!1===
b._trigger("beforeChange",e,{rPP:u}))return h.val(b.options.rPP),!1;!1!==b._trigger("change",e,{rPP:u})&&(b.options.rPP=u)})}e=a.bootstrap.on;g=a.curPage>=a.totalPages;c(e,this.next,g);c(e,this.last,g);g=1>=a.curPage;c(e,this.first,g);c(e,this.prev,g);this.page.val(a.curPage);this.$total.text(a.totalPages);0<this.options.totalRecords?(e=a.rPP,g=a.curPage,f=a.totalRecords,h=g*e,h>f&&(h=f),a=a.strDisplay,a=a.replace("{0}",(g-1)*e+1),a=a.replace("{1}",h),a=a.replace("{2}",f),this.$msg.html(a)):this.$msg.html("")};
a.getInstance=function(){return{pager:this}};a._trigger=f._trigger;a.on=f.on;a.one=f.one;a.off=f.off})(jQuery);
(function(l){function n(a,b){return a?"<div class='"+b+"'></div>":"<div class='ui-icon ui-icon-"+b+"'></div>"}var k=l.paramquery,c={options:{length:200,num_eles:3,trigger:!1,cur_pos:0,ratio:0,timeout:350,pace:"optimum",direction:"vertical",bootstrap:{on:!1,slider:"btn btn-default",up:"glyphicon glyphicon-chevron-up",down:"glyphicon glyphicon-chevron-down",left:"glyphicon glyphicon-chevron-left",right:"glyphicon glyphicon-chevron-right"},theme:!1},_destroy:function(){l(document).off("."+this.eventNamespace);
this.element.removeClass("pq-sb pq-sb-vert pq-sb-vert-t pq-sb-vert-wt").enableSelection().removeClass("pq-sb-horiz pq-sb-horiz-t pq-sb-horiz-wt").unbind("click.pq-scrollbar").empty();this.element.removeData()},_create:function(){this.listeners={};this._createLayout()},_setOption:function(a,b){var d=this.options;"disabled"==a?(this._super(a,b),!0==b?this.$slider.draggable("disable"):this.$slider.draggable("enable")):"theme"==a?(d[a]=b,this._createLayout()):"ratio"==a?0<=b&&1>=b&&(d[a]=b):d[a]=b},_setOptions:function(){this._super.apply(this,
arguments);this.refresh()}};l.widget("paramquery.pqScrollBar",c);pq.scrollbar=function(a,b){var d=l(a).pqScrollBar(b);return d.data("paramqueryPqScrollBar")||d.data("paramquery-pqScrollBar")};c=k.pqScrollBar.prototype;k.pqScrollBar.defaults=c.options;c._createLayout=function(){var a=this,b=this.options,d=b.bootstrap,m=d.on,g=b.direction,e=this.eventNamespace,h=b.theme,u=this.element.empty();"vertical"==g?(u.removeClass("pq-sb-vert-t pq-sb-vert-wt").addClass("pq-sb pq-sb-vert"),h?(u.addClass("pq-sb-vert-t"),
u[0].innerHTML=["<div class='top-btn pq-sb-btn ",m?"":"ui-state-default ui-corner-top","'>",n(m,m?d.up:"triangle-1-n"),"</div><div class='pq-sb-slider ",m?d.slider:"ui-corner-all ui-state-default","'></div><div class='bottom-btn pq-sb-btn ",m?"":"ui-state-default ui-corner-bottom","'>",n(m,m?d.down:"triangle-1-s"),"</div>"].join("")):(u.addClass("pq-sb-vert-wt"),u[0].innerHTML="<div class='top-btn pq-sb-btn'></div><div class='pq-sb-slider'><div class='vert-slider-top'></div><div class='vert-slider-bg'></div><div class='vert-slider-center'></div><div class='vert-slider-bg'></div><div class='vert-slider-bottom'></div></div><div class='bottom-btn pq-sb-btn'></div>")):
(u.removeClass("pq-sb-horiz-t pq-sb-horiz-wt").addClass("pq-sb pq-sb-horiz"),h?(u.addClass("pq-sb-horiz-t"),u[0].innerHTML=["<div class='left-btn pq-sb-btn ",m?"":"ui-state-default ui-corner-left","'>",n(m,m?d.left:"triangle-1-w"),"</div><div class='pq-sb-slider pq-sb-slider-h ",m?d.slider:"ui-state-default ui-corner-all","'></div><div class='right-btn pq-sb-btn ",m?"":"ui-state-default ui-corner-right","'>",n(m,m?d.right:"triangle-1-e"),"</div>"].join("")):(u.addClass("pq-sb-horiz-wt"),u.width(this.width),
u[0].innerHTML="<div class='left-btn pq-sb-btn'></div><div class='pq-sb-slider pq-sb-slider-h'><span class='horiz-slider-left'></span><span class='horiz-slider-bg'></span><span class='horiz-slider-center'></span><span class='horiz-slider-bg'></span><span class='horiz-slider-right'></span></div><div class='right-btn pq-sb-btn'></div>"));u.disableSelection().unbind(".pq-scrollbar").on("mousedown.pq-scrollbar",function(h){if(!b.disabled&&!a.$slider.is(":hidden"))if(l(document).off("."+e).on("mouseup."+
e,function(e){a._mouseup(e)}),"vertical"==g){var u=h.pageY,d=a.element.offset().top,m=d+b.length,c=a.$slider,k=c.offset().top,t=c.height(),c=k+t;u<k&&u>d+17?a._setTimerPageLeft(u,t,h,0):u>c&&u<m-17&&a._setTimerPageRight(u,t,h,0)}else u=h.pageX,d=a.element.offset().left,m=d+b.length,k=a.$slider.offset().left,c=k+a.$slider.width(),u<k&&u>d+17?(a.$slider.css("left",u-a.element.offset().left),a._updateCurPosAndTrigger(h)):u>c&&u<m-17&&(a.$slider.css("left",u-a.element.offset().left-a.$slider.width()),
a._updateCurPosAndTrigger(h))});d=this.$slider=l("div.pq-sb-slider",this.element);d.attr("tabindex","0");this._bindSliderEvents(d);this.$top_btn=l("div.top-btn,div.left-btn",this.element).click(function(e){if(!a.options.disabled)return a.decr_cur_pos(e),!1}).mousedown(function(e){if(!a.options.disabled)return a.mousedownTimeout=setTimeout(function(){a.mousedownInterval=setInterval(function(){a.decr_cur_pos(e)},0)},a.options.timeout),!1}).bind("mouseup mouseout",function(e){a._mouseup(e)});this.$bottom_btn=
l("div.bottom-btn,div.right-btn",this.element).click(function(e){if(!a.options.disabled)return a.incr_cur_pos(e),!1}).mousedown(function(e){if(!a.options.disabled)return a.mousedownTimeout=setTimeout(function(){a.mousedownInterval=setInterval(function(){a.incr_cur_pos(e)},0)},a.options.timeout),!1}).bind("mouseup mouseout",function(e){a._mouseup(e)});this.refresh()};var a=0;c._setTimerPageLeft=function(f,b,d,m){var g=this,e=g.options;this.mousedownTimeout=window.setTimeout(function(){if(f>=g.$slider.offset().top)g._mouseup();
else{g._pageLeft(d);var h=a?0:e.timeout;a++;g._setTimerPageLeft(f,b,d,h)}},m)};c._setTimerPageRight=function(f,b,d,m){var g=this;this.mousedownTimeout=window.setTimeout(function(){if(f<=g.$slider.offset().top+b)g._mouseup();else{g._pageRight(d);var e=a?0:g.options.timeout;a++;g._setTimerPageRight(f,b,d,e)}},m)};c._bindSliderEvents=function(a){var b=this,d="x";"vertical"==this.options.direction&&(d="y");a.draggable({axis:d,helper:function(a,d){b._setDragLimits();return this},start:function(a){b.topWhileDrag=
null;b.dragging=!0},drag:function(a){b.dragging=!0;var d=b.options.pace;"optimum"==d?b._setNormalPace(a):"fast"==d&&b._updateCurPosAndTrigger(a)},stop:function(a){"fast"!=b.options.pace&&b._updateCurPosAndTrigger(a);b.dragging=!1;b.refresh()}}).on("keydown.pq-scrollbar",function(a){var d=a.keyCode,e=b.options,h=e.cur_pos,u=e.ratio,B=e.num_eles,f=l.ui.keyCode;null==b.keydownTimeout&&(b.keydownTimeout=window.setTimeout(function(){d==f.DOWN||d==f.RIGHT?b.incr_cur_pos(a):d==f.UP||d==f.LEFT?b.decr_cur_pos(a):
d==f.HOME?e.steps?0<h&&(e.cur_pos=0,b.updateSliderPos(),b.scroll(a)):0<u&&(e.ratio=0,b.updateSliderPos(),b.drag(a)):d==f.END?e.steps?h<B&&(e.cur_pos=B,b.updateSliderPos(),b.scroll(a)):1>u&&(e.ratio=1,b.updateSliderPos(),b.drag(a)):"vertical"==e.direction&&(d==f.PAGE_DOWN?b._pageRight(a):d==f.PAGE_UP&&b._pageLeft(a));b.keydownTimeout=null},0));if(d==f.DOWN||d==f.RIGHT||d==f.UP||d==f.LEFT||d==f.PAGE_DOWN||d==f.PAGE_UP||d==f.HOME||d==f.END)return a.preventDefault(),!1})};c.decr_cur_pos=function(a){var b=
this.options;if(b.steps)0<b.cur_pos&&(b.cur_pos--,this.updateSliderPos(),this.scroll(a));else if(0<b.ratio){var d=b.ratio-1/(b.num_eles-1);0>d&&(d=0);b.ratio=d;this.updateSliderPos();this.drag(a)}};c.incr_cur_pos=function(a){var b=this.options;if(b.steps)b.cur_pos<b.num_eles-1&&b.cur_pos++,this.updateSliderPos(),this.scroll(a);else{if(1>b.ratio){var d=b.ratio+1/(b.num_eles-1);1<d&&(d=1);b.ratio=d}this.updateSliderPos();this.drag(a)}};c._mouseup=function(f){this.options.disabled||(a=0,window.clearTimeout(this.mousedownTimeout),
this.mousedownTimeout=null,window.clearInterval(this.mousedownInterval),this.mousedownInterval=null)};c._setDragLimits=function(){var a=this.options;if("vertical"==a.direction){var b=this.element.offset().top+17,a=b+a.length-34-this.slider_length;this.$slider.draggable("option","containment",[0,b,0,a])}else b=this.element.offset().left+17,a=b+a.length-34-this.slider_length,this.$slider.draggable("option","containment",[b,0,a,0])};c._validateCurPos=function(){var a=this.options;a.cur_pos>=a.num_eles&&
(a.cur_pos=a.num_eles-1);0>a.cur_pos&&(a.cur_pos=0)};c._updateSliderPosRatio=function(){var a=this.options,b=a.direction,d=a.ratio,m=this.$slider[0],a=a.length-34-this.slider_length;if(null==d)throw"updateSliderPosRatio ratio N/A";d=d*a+17;"vertical"==b?m.style.top=d+"px":m.style.left=d+"px"};c._updateSliderPosCurPos=function(){var a=this.options,b=this.$slider[0],d=this.scroll_space*a.cur_pos/(a.num_eles-1);"vertical"==a.direction?b.style.top=17+d+"px":b.style.left=17+d+"px"};c.updateSliderPos=function(){var a=
this.options;if(void 0===a.steps)throw"updateSliderPos. steps N/A";a.steps?this._updateSliderPosCurPos():this._updateSliderPosRatio()};c.scroll=function(a){var b=this.options;this._trigger("scroll",a,{cur_pos:b.cur_pos,num_eles:b.num_eles})};c.drag=function(a){this._trigger("drag",a,{ratio:this.options.ratio})};c._pageRight=function(a){this._trigger("pageRight",a,null)};c._pageLeft=function(a){this._trigger("pageLeft",a,null)};c._setSliderBgLength=function(){var a=this.options,b=a.theme,d=this.$slider,
m=a.length,m=Math.round(((m-34)*m/(40*a.num_eles+m)-14)/2);1>m&&(m=1);var g=14+2*m;this.scroll_space=a.length-34-g;if(g!==this.slider_length)if(this.slider_length=g,a="vertical"===a.direction?{dim:"height",cls:".vert-slider-bg"}:{dim:"width",cls:".horiz-slider-bg"},b)d[a.dim](g-2);else l(a.cls,this.element)[a.dim](m),d[a.dim](g)};c._updateCurPosAndTrigger=function(a,b){var d=this.options,m=d.direction,g=this.$slider;null==b&&(b=parseInt(g[0].style["vertical"===m?"top":"left"]));m=(b-17)/(d.length-
34-this.slider_length);if(d.steps){if(m*=d.num_eles-1,m=Math.round(m),d.cur_pos!=m){if(this.dragging){if(null!=this.topWhileDrag&&(this.topWhileDrag<b&&d.cur_pos>m||this.topWhileDrag>b&&d.cur_pos<m))return;this.topWhileDrag=b}this.options.cur_pos=m;this.scroll(a)}}else d.ratio=m,this.drag(a)};c._setNormalPace=function(a){this.timer&&(window.clearInterval(this.timer),this.timer=null);var b=this,d=this.options.direction;b.timer=window.setInterval(function(){var m=parseInt(b.$slider[0].style["vertical"===
d?"top":"left"]);b.prev_top===m&&(b._updateCurPosAndTrigger(a,m),window.clearInterval(b.timer),b.timer=null);b.prev_top=m},20)};c.refresh=function(){var a=this.options,b=this.$slider[0],d=this.element;1>=a.num_eles?d[0].style.display="none":(d[0].style.display="",this._validateCurPos(),this.dragging||(d["vertical"===a.direction?"height":"width"](a.length),this._setSliderBgLength(),b.style.display=4>this.scroll_space||1>=a.num_eles?"none":""),this.updateSliderPos())};c._trigger=k._trigger;c.on=k.on;
c.one=k.one;c.off=k.off})(jQuery);
(function(l){l.paramquery=l.paramquery||{};l.paramquery.onResize=function(n,k){var c=l(n);"static"===c.css("position")&&c.css("position","relative");var a=l('<iframe type="text/html" src="about:blank" class="pq-resize-iframe" style="display:block;width:100%;height:100%;position:absolute;top:0;left:0;z-index:-1;overflow: hidden; pointer-events: none;" />').appendTo(c);a[0].data="about:blank";a.css("opacity","0");for(var f=0;f<c.length;f++)l(a[f].contentWindow).on("resize",function(a){k()})}})(jQuery);
(function(l){function n(e){return"<span class='btn btn-xs glyphicon glyphicon-"+e+"' ></span>"}function k(e){return"<span class='ui-widget-header pq-ui-button'><span class='ui-icon ui-icon-"+e+"'></span></span>"}var c=function(){};c.prototype.belongs=function(e){if(e.target==this.that.element[0])return!0};var a=l.paramquery;a.cClass=c;var f=function(e){this.that=e;var h=this.options=e.options,u=this;u.odd=[];if(null!=h.postRenderInterval)e.on("refresh",function(){u.prColDef.length&&u.postRenderAll()}).on("refreshRow",
function(e,h){u.prColDef.length&&u.postRenderRow(h)}).on("refreshCell",function(e,h){h.column.postRender&&u.postRenderRow(h)}).on("refreshColumn",function(e,h){h.column.postRender&&u.setTimerPostRender(0,h.colIndx,h.column)});if(!h.mergeModel.flex)e.on("refresh refreshCell refreshRow refreshColumn",u.onRefreshMerge(e))};a.cGenerateView=f;c=f.prototype=new c;c.onRefreshMerge=function(e){return function(){for(var h=e.$cont.find(".pq-merge-cell-div"),u,a,b,d,g=h.length,f=[],m=[];g--;)u=h[g],u=u.parentNode,
a||(a=2*parseInt(l(u).css("paddingTop")),b=2*parseInt(l(u).css("paddingLeft"))),d=Math.max(u.offsetHeight,28),d-=a,u=u.offsetWidth-b,f[g]=d-1+"px",m[g]=u+"px";for(g=h.length;g--;)u=h[g],u.style.height=f[g],u.style.width=m[g]}};c.generateView=function(e){e=e||{};var h=this.that,u=h.options,b="flex"===u.width,d="flex"===u.height,g=u.cls,f=g.cont_inner,m=g.cont_inner_b,c,k,l=h.initH,x=h.finalH,w=h.pqpanes;if(e.$cont)c=this._generateTables(null,null,e),g=e.$cont,g.empty(),g[0].innerHTML=w.v?["<div class='",
f,"'>",c,"</div><div class='",f,"'>",c,"</div>"].join(""):["<div class='",f,"'>",c,"</div>"].join(""),u=g.children("div").children("table"),h.tables[0]={$tbl:u,$cont:g};else{c=h.initV;k=h.finalV;var y=h.pdata,g=h.$cont;null!=u.editModel.indices&&h.blurEditor({force:!0});l={pageData:y,initV:c,finalV:k,initH:l,finalH:x,source:e.source};h._trigger("beforeTableView",null,l);c=this._generateTables(c,k,e);g.empty();0===h.totalVisibleRows?g.append("<div class='"+f+" pq-grid-norows' >"+u.strNoRows+"</div>"):
(e=d||b?"style='position:relative;'":"",g[0].innerHTML=w.h&&w.v?["<div class='",f,"'>",c,"</div><div class='",f,"'>",c,"</div><div class='",f," ",m,"'>",c,"</div><div class='",f," ",m,"'>",c,"</div>"].join(""):w.v?["<div class='",f,"' ",e," >",c,"</div><div class='",f,"' >",c,"</div>"].join(""):w.h?["<div class='",f,"' style='position:static;' >",c,"</div><div class='",f," ",m,"' style='position:static;' >",c,"</div>"].join(""):["<div class='",f,"' ",e," >",c,"</div>"].join(""));h.$tbl=g.children("div").children("table");
if(u.scrollModel.flexContent&&h.$tbl[0])a.onResize(h.$tbl[0],function(){var e=h.iRefresh;e.ignoreTResize||e.softRefresh()});this.setPaneEvents();h._trigger("refresh",null,l)}this.setPanes()};c.postRenderRow=function(e){var h=this.that,u=this.prColDef,a=h.iMerge,b=e.rowIndx,d;null!=e.colIndx&&(u=[{colIndx:e.colIndx,column:e.column}]);for(var g=0,f=u.length;g<f;g++)e=u[g],d=e.column.postRender,e=e.colIndx,a.ismergedCell(b,e)?a.isRootCell(b,e,"a")&&(e=a.getRootCell(b,e),d.call(h,e)):(e=h.normalize({rowIndx:b,
colIndx:e}),d.call(h,e))};c.setTimerPostRender=function(e,h,u){var a=this.that,b=this,d=a.pdata,g=function(e){return-1==a.options.postRenderInterval?e():setTimeout(e,0)};d&&d.length&&(b.postRenderTimeoutID=g(function(){var g=a.initV,f=a.options.freezeRows;e<g&&e>=f&&(e=g);d[e].pq_hidden||b.postRenderRow({column:u,colIndx:h,rowIndx:e+a.rowIndxOffset});e++;e<=a.finalV&&b.setTimerPostRender(e)}))};c.postRenderAll=function(){var e=this.that,h=this,u=e.pdata,a=e.options.postRenderInterval,e=function(e){return-1==
a?e():setTimeout(e,a)};u&&u.length&&(clearTimeout(h.postRenderTimeoutID),h.postRenderTimeoutID=e(function(){h.setTimerPostRender(0)}))};c.scrollView=function(){var e=this.that,h=this.options,u=h.virtualY;h.virtualX||e.hscroll.drag();u||e.vscroll.drag()};c.setPaneEvents=function(){var e=this.that,h=e.pqpanes,u=e.$cont.children("div"),a=e.iMouseSelection;if((e=e.$tbl)&&e.length)if(h.h&&h.v){var h=l(u[0]),e=l(u[1]),b=l(u[2]),u=l(u[3]);h.on("scroll",function(e){this.scrollLeft=this.scrollTop=0});e.on("scroll",
function(e){this.scrollTop=0;this.scrollLeft=a.getScrollLeft(!0)});b.on("scroll",function(e){this.scrollTop=a.getScrollTop(!0);this.scrollLeft=0});u.on("scroll",function(e){this.scrollTop=a.getScrollTop(!0);this.scrollLeft=a.getScrollLeft(!0)})}else if(h.v)h=l(u[0]),u=l(u[1]),h.on("scroll",function(e){this.scrollTop=a.getScrollTop(!0);this.scrollLeft=0}),u.on("scroll",function(e){this.scrollTop=a.getScrollTop(!0);this.scrollLeft=a.getScrollLeft(!0)});else if(h.h)h=l(u[0]),u=l(u[1]),h.on("scroll",
function(e){this.scrollTop=0;this.scrollLeft=a.getScrollLeft(!0)}),u.on("scroll",function(e){this.scrollTop=a.getScrollTop(!0);this.scrollLeft=a.getScrollLeft(!0)});else u.on("scroll",function(e){this.scrollTop=a.getScrollTop(!0);this.scrollLeft=a.getScrollLeft(!0)})};c.setPanes=function(){var e=this.that,h=e.pqpanes,u=e.$cont.children("div"),a=e.iRefresh,b=e.$tbl,d=e.options,g=e.calcWidthCols(-1,1*d.freezeCols)+1,f="flex"!==d.width||d.maxWidth?a.getEContWd():"";if(e.tables.length){var m=e.tables[0].$tbl,
c=e.tables[0].$cont,k=m.parent("div");h.v?(l(k[0]).css({width:g}),l(k[1]).css({left:g,width:f-g}),l(m[1]).css({left:-1*g})):l(k[0]).css({width:f});c.height(m[0].scrollHeight-1);a.setContHeight()}if(b&&b.length)if(a="flex"!==d.height||d.maxHeight?a.getEContHt():"",h.h&&h.v){var m=l(u[0]),c=l(u[1]),k=l(b[1]),x=l(u[2]),w=l(b[2]),u=l(u[3]),y=l(b[3]),b=e.calcHeightFrozenRows();m.css({width:g,height:b});c.css({left:g,width:f-g,height:b});k.css({left:-1*g});x.css({width:g,top:b,height:a-b});w.css({marginTop:-(b+
1)});u.css({left:g,width:f-g,top:b,height:a-b});y.css({marginTop:-(b+1),left:-1*g})}else h.v?(m=l(u[0]),u=l(u[1]),b=l(b[1]),m.css({width:g,height:a}),u.css({left:g,width:f-g,height:a}),b.css({left:-1*g})):h.h?(m=l(u[0]),u=l(u[1]),c=l(b[1]),b=e.calcHeightFrozenRows(),m.css({height:b,width:f}),u.css({width:f,top:b,height:a-b}),c.css({marginTop:-(b+1)})):u.css({width:f,height:a});d.showHeader&&(h.vH?(e.$header_left.css({width:g}),e.$header_right.css({left:g,width:f-g}),e.$header_right_inner.css({left:-g})):
e.$header_left.css({width:f}))};c.createColDefs=function(){for(var e=this.that,h=e.colModel,u=e.initH,a=e.finalH,e=e.options.freezeCols,b=[],d=[],g=0;g<=a;g++){if(g<u&&g>=e&&(g=u,g>a))throw"initH>finalH";var f=h[g];f.hidden||(b.push({column:f,colIndx:g}),f.postRender&&"function"==typeof f.postRender&&d.push({column:f,colIndx:g}))}this.colDef=b;this.prColDef=d};c._generateTables=function(e,h,u){u=u||{};var a=this.that,b=a.options,d=b.bootstrap,g=b.numberCell,f=!0,m=1*b.freezeRows,c=0,k=u.other,l=this.odd;
h=k?u.data.length-1:h;k?u=u.data:(u=a.pdata,this.setFrozenRip(u,m));if(k||null!=e&&null!=h){c=["pq-grid-table"];d.on&&c.push(d.tbody);b.columnBorders&&c.push("pq-td-border-right");b.rowBorders&&c.push("pq-td-border-top");c.push(b.wrap?"pq-wrap":"pq-no-wrap");b=["<table class='"+c.join(" ")+"' >"];b.push("<tr class='pq-row-hidden'>");if(g.show){var w=g.width;b.push("<td style='width:"+w+"px;' ></td>")}c=this.colDef;g=0;for(d=c.length;g<d;g++)w=c[g],a=w.colIndx,w=w.column.outerWidth,b.push("<td style='width:",
w,"px;' pq-col-indx='",a,"'></td>");b.push("</tr>");for(c=0;c<=h;c++)c<e&&c>=m&&(c=e),g=u[c],d=c,g&&g.pq_hidden||(l[d]=f=!f,a=g.pq_detail&&g.pq_detail.show,this._generateRow(g,d,b,k,a),a&&this._generateDetailRow(g,d,b));b.push("</table>");return b.join("")}};c.appendRow=function(e){var h=this.that,a=h.pdata,b=h.colModel,d=h.finalV;d+e>a.length&&(e=a.length-d);if(e){if(1<e)throw"noRows > 1";h._trigger("beforeTableView",null,{pageData:a,initV:d,finalV:d,initH:h.initH,finalH:h.finalH,colModel:b});h.refreshRow({rowIndxPage:d,
refresh:!1})}return e};c.prependRow=function(e){var h=this.that,a=h.options.freezeRows,b=h.calcVisibleRows(h.pdata,0,a),d=h.pdata,g=h.initV,f=h.colModel;if(h._mergeCells){if(b)for(b=0;b<a;b++)h.refreshRow({rowIndxPage:b,refresh:!1});h.refreshRow({rowIndxPage:g+1,refresh:!1})}h._trigger("beforeTableView",null,{pageData:d,initV:g,finalV:g,initH:h.initH,finalH:h.finalH,colModel:f});h.refreshRow({rowIndxPage:g,refresh:!1});return e};c.removeTopRow=function(e){for(var h=this.that,a=h.options.freezeRows,
b=h.calcVisibleRows(h.pdata,0,a),d=h.$tbl,g=l([]),f=0;f<d.length;f++)var c=l(d[f]).children("tbody").children("tr:gt(0)").slice(b,e+b),g=g.add(c);g.remove();if(h._mergeCells){if(b)for(f=0;f<a;f++)h.refreshRow({rowIndxPage:f,refresh:!1});h.refreshRow({rowIndxPage:h.initV,refresh:!1})}};c.removeBottomRow=function(e){var h=this.that.$tbl;if(e)for(var a=0;a<h.length;a++)l(h[a]).children("tbody").children("tr:gt(0)").slice(-e).remove()};c.format=function(){var e=l.datepicker,h=pq.formatNumber;return function(a,
b,d){if("date"==d){if(!isNaN(Date.parse(a)))return e.formatDate(b,new Date(a))}else return h(a,b)}}();c.renderCell=function(e){var h=this.that,a=[],b=[],d=e.Export,g=!1,f=this.options,c=["pq-grid-cell"];if(!e.other&&!d&&h._mergeCells){e=h.iMerge.renderCell(e);if(null==e)return"";e.rowspan&&(a.push("rowspan='"+e.rowspan+"'","colspan='"+e.colspan+"'"),f.mergeModel.flex||(g=!0,c.push("pq-merge-cell")));e.style&&b.push(e.style);e.cls&&c.push(e.cls)}var k=e.rowData,l=e.column,s=e.colIndx,x=l.dataIndx,
w=f.freezeCols,f=f.columnBorders;if(k){d||(a.push("pq-col-indx='"+s+"'"),"right"==l.align?c.push("pq-align-right"):"center"==l.align&&c.push("pq-align-center"),s==w-1&&f&&c.push("pq-last-frozen-col"),(s=l.cls)&&c.push(s),(s=h.iSelection.dirty?null:k.pq_cellselect)&&s[x]&&c.push(h.iCells.hclass));var y,w=k[x],s=(s=l.format)?this.format(w,s,l.dataType):w;e.dataIndx=x;e.cellData=w;e.formatVal=s;if(l.render&&(y=l.render.call(h,e))&&"string"!=typeof y){var w=y.attr,f=y.cls,n=y.style;w&&a.push(w);f&&c.push(f);
n&&b.push(n);y=y.text}null==y&&l._render&&(y=l._render.call(h,e));y&&"string"!=typeof y&&(w=y.attr,f=y.cls,n=y.style,w&&a.push(w),f&&c.push(f),n&&b.push(n),y=y.text);null==y&&(y=s);if(d)return y;if(""===y||void 0==y)y="&nbsp;";(e=k.pq_cellcls)&&(e=e[x])&&c.push(e);if(k=k.pq_cellattr)if(x=k[x]){var x=m(x),A;for(A in x)k=x[A],"style"==A?b.push(k):a.push(A+'="'+k+'"')}b=b.length?" style='"+b.join("")+"' ":"";return["<td class='",c.join(" "),"' ",a.join(" "),b," >",g?"<div class='pq-merge-cell-div'><div><div class='pq-merge-inner'>":
"",y,g?"</div></div></div>":"","</td>"].join("")}};c.setFrozenRip=function(e,h){if(e){for(var a;h--&&(a=e[h])&&a.pq_hidden;);this.frozenRip=h}};c.refreshRow=function(e,h){var a=this.that.pdata[e];this._generateRow(a,e,h,null,a.pq_detail&&a.pq_detail.show)};c._generateRow=function(e,h,a,b,d){var g=["pq-grid-row"];this.frozenRip===h&&g.push("pq-last-frozen-row");d&&g.push("pq-detail-master");var f=this.that,c=this.options,k=c.rowInit;d=c.numberCell;var l="",s="",x=f.rowIndxOffset,w=h+x;k&&(k=k.call(f,
{rowData:e,rowIndxPage:h,rowIndx:w}))&&(k.cls&&g.push(k.cls),l+=k.attr?" "+k.attr:"",s+=k.style?k.style:"");c.stripeRows&&this.odd[h]&&g.push("pq-grid-oddRow");e.pq_rowselect&&g.push(f.iRows.hclass);f=e.pq_rowcls;null!=f&&g.push(f);if(f=e.pq_rowattr){var f=m(f),y;for(y in f)l+=" "+y+'="'+f[y]+'"'}s=s?"style='"+s+"'":"";a.push("<tr pq-row-indx='",h,"' class='",g.join(" "),"' ",l," ",s," >");d.show&&a.push(["<td pq-col-indx='-1' class='pq-grid-number-cell'>",b?"&nbsp;":w+1,"</td>"].join(""));e={rowIndx:h+
x,rowIndxPage:h,other:b,rowData:e};h=this.colDef;b=0;for(g=h.length;b<g;b++)y=h[b],d=y.colIndx,e.column=y.column,e.colIndx=d,a.push(this.renderCell(e));a.push("</tr>");return a};c._generateDetailRow=function(e,h,a){var b=["pq-grid-row pq-detail-child"],d=this.that,g=d.options,f=g.numberCell;g.stripeRows&&this.odd[h]&&b.push("pq-grid-oddRow");e.pq_rowselect&&b.push(d.iRows.hclass);e=e.pq_rowcls;null!=e&&b.push(e);a.push("<tr pq-row-indx='"+h+"' class='"+b.join(" ")+"' >");f.show&&a.push("<td class='pq-grid-number-cell'>&nbsp;</td>");
a.push("<td class='pq-grid-cell pq-detail-child' colSpan='20'></td>");a.push("</tr>");return a};c={widgetEventPrefix:"pqgrid",_create:function(){var e=this,h=this.options,u=h.dataModel,d=h.bootstrap,c=d.on,m=h.roundCorners&&!c,p=h.ui,k=h.sortModel;this.BS_on=c;h.collapsible||(h.collapsible={on:!1,collapsed:!1});h.flexHeight&&(h.height="flex");h.flexWidth&&(h.width="flex");if(u.sortIndx){k.on=h.sortable;k.type=u.sorting;var q=[],t=u.sortIndx,u=u.sortDir;if(l.isArray(t)){for(var s=0;s<t.length;s++){var x=
u&&u[s]?u[s]:"up";q.push({dataIndx:t[s],dir:x})}k.single=!1}else q.push({dataIndx:t,dir:u?u:"up"}),k.single=!0;k.sorter=q}!1===h.virtualXHeader&&(h.virtualXHeader=null);this.setEditorPosTimer();this.iGenerateView=new f(this);this.iRefresh=new a.cRefresh(this);this.iKeyNav=new g(this);this.iIsValid=new b(this);this.tables=[];this.$tbl=null;this.iColModel=new a.cColModel(this);this.iSort=new a.cSort(this);this.iHeader=new a.cHeader(this);this._initTypeColumns();k=this.element;k.on("scroll"+this.eventNamespace,
function(){this.scrollTop=this.scrollLeft=0});q=c?d.grid:p.grid;t=c?"":p.header_o;u=c?"":p.bottom;d=c?d.top:p.top;k.empty().addClass("pq-grid "+q+" "+(m?" ui-corner-all":"")).html(["<div class='pq-grid-top ",d," ",m?" ui-corner-top":"","'><div class='pq-grid-title",m?" ui-corner-top":"","'>&nbsp;</div></div><div class='pq-grid-center' ><div class='pq-header-outer ",t,"'></div><div class='pq-grid-cont-outer' ><div class='pq-grid-cont' tabindex='0'></div></div></div><div class='pq-grid-bottom ",u," ",
m?" ui-corner-bottom":"","'><div class='pq-grid-footer'></div></div>"].join(""));this.$bottom=l("div.pq-grid-bottom",k);this._trigger("render",null,{dataModel:this.options.dataModel,colModel:this.colModel});this.$top=l("div.pq-grid-top",k);h.showTop||this.$top.css("display","none");this.$title=l("div.pq-grid-title",k);h.showTitle||this.$title.css("display","none");m=this.$grid_center=l("div.pq-grid-center",k).on("scroll",function(){this.scrollTop=0});this.$header_o=l("div.pq-header-outer",this.$grid_center).on("scroll",
function(){this.scrollLeft=this.scrollTop=0});this.$footer=l("div.pq-grid-footer",k);this.$cont_o=l(".pq-grid-cont-outer",m);d=this.$cont=l("div.pq-grid-cont",m);l(window).bind("resize"+e.eventNamespace+" orientationchange"+e.eventNamespace,function(h,a){e.onWindowResize(h,a)});d.on("click",".pq-grid-cell,.pq-grid-number-cell",function(h){if(!0!==l.data(h.target,e.widgetName+".preventClickEvent")&&l(h.target).closest(".pq-grid")[0]==e.element[0])return e._onClickCell(h)});d.on("click","tr.pq-grid-row",
function(h){if(!0!==l.data(h.target,e.widgetName+".preventClickEvent")&&l(h.target).closest(".pq-grid")[0]==e.element[0])return e._onClickRow(h)});d.on("contextmenu","td.pq-grid-cell",function(h){if(l(h.target).closest(".pq-grid")[0]==e.element[0])return e._onRightClickCell(h)});d.on("contextmenu","tr.pq-grid-row",function(h){if(l(h.target).closest(".pq-grid")[0]==e.element[0])return e._onRightClickRow(h)});d.on("dblclick","td.pq-grid-cell",function(h){if(l(h.target).closest(".pq-grid")[0]==e.element[0])return e._onDblClickCell(h)});
d.on("dblclick","tr.pq-grid-row",function(h){if(l(h.target).closest(".pq-grid")[0]==e.element[0])return e._onDblClickRow(h)});d.on("blur",function(){e.onblur()});d.on("focus",function(){e.onfocus()});d.on("mousedown",function(h){if(1===h.which){var a=l(h.target);if(a.closest(".pq-grid")[0]==e.element[0]){var u;u=a.closest(".pq-grid-cell:not(.pq-detail-child)");if(u.length&&(h.currentTarget=u[0],u=e._onCellMouseDown(h),!1===u))return!1;if(!h.isPropagationStopped()){a=a.closest(".pq-grid-row");if(a.length&&
(h.currentTarget=a[0],u=e._onRowMouseDown(h),!1===u))return!1;if(!h.isPropagationStopped())return e._onContMouseDown(h)}}}});d.on("mouseenter","td.pq-grid-cell",function(h){if(l(h.target).closest(".pq-grid")[0]==e.element[0])return e._onCellMouseEnter(h,l(this))});d.on("mouseenter","tr.pq-grid-row",function(h){if(l(h.target).closest(".pq-grid")[0]==e.element[0])return e._onRowMouseEnter(h,l(this))});d.on("mouseleave","td.pq-grid-cell",function(h){if(l(h.target).closest(".pq-grid")[0]==e.element[0])return e._onCellMouseLeave(h,
l(this))});d.on("mouseleave","tr.pq-grid-row",function(h){if(l(h.target).closest(".pq-grid")[0]==e.element[0])return e._onRowMouseLeave(h,l(this))});d.on("keyup",function(h){l(h.target).closest(".pq-grid")[0]==e.element[0]&&e._trigger("keyUp",h,null)});m.bind("mousewheel DOMMouseScroll",function(h){return e._onMouseWheel(h)});this.$hvscroll=l("<div class='pq-hvscroll-square ui-widget-content'></div>").appendTo(m);c=l("<div class='pq-vscroll'></div>").appendTo(m);this.prevVScroll=0;d=h.scrollModel;
void 0===d.lastColumn&&h.virtualX&&(d.lastColumn="auto");this.vscroll=pq.scrollbar(c,{pace:d.pace,theme:d.theme,bootstrap:h.bootstrap,steps:h.virtualY&&!d.smooth,direction:"vertical",cur_pos:0,pageRight:function(){e.iKeyNav.pageDown()},pageLeft:function(){e.iKeyNav.pageUp()},drag:function(h,a){e.iMouseSelection.syncViewWithScrollBarVert(a.ratio)},scroll:function(h,a){e.iRefresh.refreshVscroll(a)}});c=l("<div class='pq-hscroll'></div>").appendTo(m);"flex"===h.height&&c.css("position","relative");this.hscroll=
pq.scrollbar(c,{direction:"horizontal",pace:d.pace,bootstrap:h.bootstrap,theme:d.theme,steps:h.virtualX&&!d.smooth,cur_pos:0,drag:function(h,a){e.iMouseSelection.syncViewWithScrollBarHor(a.ratio)},scroll:function(){h.virtualX&&!h.scrollModel.smooth&&e.refresh()}});h.selectionModel["native"]||this.disableSelection();m.bind("keydown.pq-grid",function(h){l(h.target).closest(".pq-grid")[0]==e.element[0]&&e._onKeyPressDown(h)});this._refreshTitle();this.iRows=new a.cRows(this);this.iCells=new a.cCells(this);
this.generateLoading();this._initPager();this._refreshResizable();this._refreshDraggable();this.iResizeColumns=new a.cResizeColumns(this);this._mouseInit()},_mouseDown:function(e){var h=this;if(l(e.target).closest(".pq-editor-focus").length)this._blurEditMode=!0,window.setTimeout(function(){h._blurEditMode=!1},0);else return this._saveDims(),this._mousePQUpDelegate=function(e){return h._mousePQUp(e)},l(document).bind("mouseup"+this.eventNamespace,this._mousePQUpDelegate),this._super(e)},destroy:function(){this._trigger("destroy");
this._super();window.clearInterval(this._refreshEditorPosTimer);this.autoResizeTimeout&&clearTimeout(this.autoResizeTimeout);for(var e in this)delete this[e];this.options=void 0;l.fragments={}},_setOption:function(e,h){var a=this.options,b=a.dataModel;if("height"===e)"flex"===h?(b=this.vscroll,h&&b&&b.widget().hasClass("pq-sb-vert")&&(a.virtualY?b.option("cur_pos",0):b.option("ratio",0)),this.hscroll.widget().css("position","relative")):"flex"===a.height&&this.hscroll.widget().css("position",""),
a[e]=h;else if("width"===e&&"flex"==h)a[e]=h,b=this.hscroll,h&&b&&b.widget().hasClass("pq-sb-horiz")&&(a.virtualX?b.option("cur_pos",0):b.option("ratio",0));else if("title"==e)a[e]=h,this._refreshTitle();else if("roundCorners"==e)(a[e]=h)?(this.element.addClass("ui-corner-all"),this.$top.addClass("ui-corner-top"),this.$bottom.addClass("ui-corner-bottom")):(this.element.removeClass("ui-corner-all"),this.$top.removeClass("ui-corner-top"),this.$bottom.removeClass("ui-corner-bottom"));else if("virtualX"==
e)a[e]=h,this.hscroll.option("steps",h);else if("virtualY"==e)a[e]=h,this.vscroll.option("steps",h);else if("freezeCols"==e)h=parseInt(h),!isNaN(h)&&0<=h&&h<=this.colModel.length-2&&(a[e]=h);else if("freezeRows"==e)h=parseInt(h),!isNaN(h)&&0<=h&&(a[e]=h);else if("resizable"==e)a[e]=h,this._refreshResizable();else if("draggable"==e)a[e]=h,this._refreshDraggable();else if("scrollModel"==e)a[e]=h;else if("dataModel"==e)h.data!==b.data&&b.dataUF&&(b.dataUF.length=0),a[e]=h;else{if("groupModel"==e)throw"use groupOption() to set groupModel options.";
"pageModel"==e?a[e]=h:"selectionModel"===e?a[e]=h:"colModel"===e||"columnTemplate"==e?(a[e]=h,this.iColModel.init()):"disabled"===e?(this._super(e,h),!0===h?this._disable():this._enable()):"numberCell"===e?(a[e]=h,this.iRefresh.decidePanes()):"strLoading"===e?(a[e]=h,this._refreshLoadingString()):"showTop"===e?(a[e]=h,this.$top.css("display",h?"":"none")):"showTitle"===e?(a[e]=h,this.$title.css("display",h?"":"none")):"showToolbar"===e?(a[e]=h,this._toolbar.widget().css("display",h?"":"none")):"toolbar"==
e?a[e]=h:"collapsible"===e?(a[e]=h,this._createCollapse()):"showBottom"===e?(a[e]=h,this.$bottom.css("display",h?"":"none")):a[e]=h}return this}};c.options={cancel:"input,textarea,button,select,option,.pq-no-capture,.ui-resizable-handle",trigger:!1,bootstrap:{on:!1,thead:"table table-striped table-condensed table-bordered",tbody:"table table-condensed",grid:"panel panel-default",top:"",btn:"btn btn-default",groupModel:{icon:["glyphicon-triangle-bottom","glyphicon-triangle-right"]},header_active:"active"},
ui:{on:!0,grid:"ui-widget ui-widget-content",top:"ui-widget-header",bottom:"ui-widget-header",header_o:"ui-widget-header",header:"ui-state-default",header_active:"ui-state-active"},cls:{cont_inner:"pq-grid-cont-inner",cont_inner_b:"pq-grid-cont-inner-b"},distance:3,collapsible:{on:!0,toggle:!0,collapsed:!1,_collapsed:!1,refreshAfterExpand:!0,css:{zIndex:1E3}},colModel:null,columnBorders:!0,dataModel:{data:[],dataUF:[],cache:!1,dataType:"JSON",location:"local",sorting:"local",sortDir:"up",method:"GET"},
direction:"",draggable:!1,editable:!0,editModel:{cellBorderWidth:0,pressToEdit:!0,clicksToEdit:2,filterKeys:!0,keyUpDown:!0,reInt:/^([\-]?[1-9][0-9]*|[\-]?[0-9]?)$/,reFloat:/^[\-]?[0-9]*\.?[0-9]*$/,onBlur:"validate",saveKey:l.ui.keyCode.ENTER,onSave:"nextFocus",onTab:"nextFocus",allowInvalid:!1,invalidClass:"pq-cell-red-tr pq-has-tooltip",warnClass:"pq-cell-blue-tr pq-has-tooltip",validate:!0},editor:{select:!1,type:"textbox"},groupModel:{on:!1,title:[],titleDefault:"{0} ({1})",header:!0,headerMenu:!0,
menuItems:["merge","fixCols","grandSummary"],fixCols:!0,icon:["ui-icon-triangle-1-se","ui-icon-triangle-1-e"],dataIndx:[],collapsed:[],dir:[],showSummary:[],summaryEdit:!0,refreshOnChange:!0},summaryOptions:{number:"avg,sum,max,min",date:"count,max,min",string:"count"},summaryTitle:{avg:"Avg: {0}",count:"Count: {0}",max:"Max: {0}",min:"Min: {0}",sum:"Sum: {0}"},validation:{icon:"ui-icon-alert",cls:"ui-state-error",style:"padding:3px 10px;"},warning:{icon:"ui-icon-info",cls:"",style:"padding:3px 10px;"},
freezeCols:0,freezeRows:0,freezeBorders:!0,calcDataIndxFromColIndx:!0,height:400,hoverMode:"null",_maxColWidth:"99%",_minColWidth:50,minWidth:100,numberCell:{width:30,title:"",resizable:!0,minWidth:30,maxWidth:100,show:!0},pageModel:{curPage:1,totalPages:0,rPP:10,rPPOptions:[10,20,50,100]},resizable:!1,roundCorners:!0,rowBorders:!0,rowHeight:25,scrollModel:{pace:"fast",smooth:!1,horizontal:!0,lastColumn:"auto",autoFit:!1,theme:!0},selectionModel:{type:"cell",onTab:"nextFocus",row:!0,mode:"block"},
swipeModel: { on: !0, speed: 20, ratio: .15, repeat: 20 }, showBottom: !0, showHeader: !0, showTitle: !0, showToolbar: !0, showTop: !0, sortable: !0, sql: !1, stripeRows: !0, title: "&nbsp;", treeModel: null, virtualX: !1, virtualY: !1, width: "auto", wrap: !0, hwrap: !0
}; l.extend(!0, c.options, { strAdd: "Add", strDelete: "Delete", strEdit: "Edit", strGroup_header: "Drag a column here to group by that column", strGroup_merge: "Merge cells", strGroup_fixCols: "Fix columns", strGroup_grandSummary: "Grand summary", strLoading: "Loading", strNoRows: "Press + button to add record" });
l.widget("paramquery._pqGrid",l.ui.mouse,c);c=a._pqGrid.prototype;c.readCell=function(e,h,a,b,d){h=h.dataIndx;return a&&!1===a.isRootCell(b,d,"o")?void 0:e[h]};c.saveCell=function(e,h,a){e[h.dataIndx]=a};c._destroyResizable=function(){var e=this.element,h=e.data();(h.resizable||h.uiResizable||h["ui-resizable"])&&e.resizable("destroy")};c._disable=function(){null==this.$disable&&(this.$disable=l("<div class='pq-grid-disable'></div>").css("opacity",.2).appendTo(this.element))};c._enable=function(){this.$disable&&
(this.element[0].removeChild(this.$disable[0]),this.$disable=null)};c._destroy=function(){this.loading&&this.xhr.abort();this._destroyResizable();this._destroyDraggable();this._mouseDestroy();this.element.off(this.eventNamespace);l(window).unbind(this.eventNamespace);l(document).unbind(this.eventNamespace);this.element.empty().css("height","").css("width","").removeClass("pq-grid ui-widget ui-widget-content ui-corner-all").removeData()};c.collapse=function(e){var h=this,a=this.element,b=this.options.collapsible,
d=b.$collapse.children("span"),g=function(){a.css("overflow","hidden");d.addClass("ui-icon-circle-triangle-s").removeClass("ui-icon-circle-triangle-n");a.hasClass("ui-resizable")&&a.resizable("destroy");h._toolbar&&h._toolbar.disable();b.collapsed=!0;b._collapsed=!0;b.animating=!1;h._trigger("collapse")};e=e?e:{};if(b._collapsed)return!1;b.htCapture=a.height();!1===e.animate?(a.height(23),g()):(b.animating=!0,a.animate({height:"23px"},function(){g()}))};c.expand=function(e){var h=this,a=this.element,
b=this.options.collapsible,d=b.htCapture,g=b.$collapse.children("span"),f=function(){a.css("overflow","");b._collapsed=!1;b.collapsed=!1;h._refreshResizable();b.refreshAfterExpand&&h.refresh();g.addClass("ui-icon-circle-triangle-n").removeClass("ui-icon-circle-triangle-s");h._toolbar&&h._toolbar.enable();b.animating=!1;h._trigger("expand")};e=e?e:{};if(!1===b._collapsed)return!1;!1===e.animate?(a.height(d),f()):(b.animating=!0,a.animate({height:d},function(){f()}))};c._createCollapse=function(){var e=
this,h=this.$top,a=this.BS_on,b=this.options.collapsible;b.$stripe||(h=l("<div class='pq-slider-icon pq-no-capture'  ></div>").appendTo(h),b.$stripe=h);b.on?b.$collapse||(b.$collapse=l(a?n("collapse-down"):k("circle-triangle-n")).appendTo(b.$stripe).click(function(h){b.collapsed?e.expand():e.collapse()})):b.$collapse&&(b.$collapse.remove(),delete b.$collapse);b.collapsed&&!b._collapsed?e.collapse({animate:!1}):!b.collapsed&&b._collapsed&&e.expand({animate:!1});b.toggle?b.$toggle||(b.$toggle=l(a?n("fullscreen"):
k("arrow-4-diag")).prependTo(b.$stripe).click(function(h){e.toggle()})):b.$toggle&&(b.$toggle.remove(),delete b.$toggle)};c.toggle=function(){var e=this.options,h=e.collapsible,a=this.element,b,d=this._maxim;b=d?"min":"max";var g=l(document.body);if(!1===this._trigger("beforeToggle",null,{state:b}))return!1;"min"==b?(e=d.eleObj,h=d.docObj,this.option({height:e.height,width:e.width,maxHeight:e.maxHeight,maxWidth:e.maxWidth}),a[0].style.cssText=e.cssText,g[0].style.cssText=h.cssText,l("html").css({overflow:"visible"}),
window.scrollTo(h.scrollLeft,h.scrollTop),this._maxim=null):(e={height:e.height,width:e.width,cssText:a[0].style.cssText,maxHeight:e.maxHeight,maxWidth:e.maxWidth},this.option({height:"100%",width:"100%",maxHeight:null,maxWidth:null}),a.css(l.extend({position:"fixed",left:0,top:0,margin:0},h.css)),h={scrollLeft:l(window).scrollLeft(),scrollTop:l(window).scrollTop(),cssText:g[0].style.cssText},g.css({height:0,width:0,overflow:"hidden",position:"static"}),l("html").css({overflow:"hidden"}),window.scrollTo(0,
0),this._maxim={eleObj:e,docObj:h});this._trigger("toggle",null,{state:b});this._refreshResizable();this.refresh();l(window).trigger("resize",{$grid:a,state:b})};c._mouseCapture=function(e){var h=this.options;return h.virtualX&&h.virtualY&&!h.scrollModel.smooth||!e.target?!1:l(e.target).closest(".pq-grid")[0]==this.element[0]?(e=h.swipeModel,!1==e.on||"touch"==e.on&&!l.support.touch?!1:!0):!1};c._saveDims=function(){var e=this.$tbl,h=this.$tbl_header;if(e)for(var a=0;a<e.length;a++){var b=e[a],d=
l(b);d.data("offsetHeight",Math.round(b.offsetHeight)-1);d.data("scrollWidth",Math.round(b.scrollWidth))}if(h)for(a=0;a<h.length;a++)b=h[a],e=l(b).parent(),e.data("offsetHeight",Math.round(b.offsetHeight)),e.data("scrollWidth",Math.round(b.scrollWidth))};c._mousePQUp=function(e){l(document).unbind("mouseup"+this.eventNamespace,this._mousePQUpDelegate);this._trigger("mousePQUp",e,null)};c._mouseStart=function(e){this.blurEditor({force:!0});return!0};c._mouseDrag=function(e){return!1==this._trigger("mouseDrag",
e,null)?!1:!0};c._mouseStop=function(e){return!1==this._trigger("mouseStop",e,null)?!1:!0};c.onWindowResize=function(e,h){var a=this,b=a.options,d=a.element,g=d.parent();if(h){var f=h.$grid;if(f&&(f==d||0==d.closest(f).length))return}g.length&&(g[0]==document.body||"fixed"==d.css("position")?(d=window.innerHeight?window.innerHeight:l(window).height(),g=l(window).width()):(d=g.height(),g=g.width()),null==a._lastParentHt||d!=a._lastParentHt||g!=a._lastParentWd)&&(a._lastParentHt=d,a._lastParentWd=g,
l.support.touch&&b.editModel.indices&&l(document.activeElement).is(".pq-editor-focus")||(a.autoResizeTimeout&&clearTimeout(a.autoResizeTimeout),a.autoResizeTimeout=window.setTimeout(function(){a._refreshAfterResize();delete a.autoResizeTimeout},b.autoSizeInterval||0)))};c._onMouseWheel=function(e){this._saveDims();var h=this.options,a=0,b=!1;e=e.originalEvent;var d=e.wheelDeltaX,g=e.wheelDeltaY,f=e.wheelDelta;if(d&&Math.abs(d)>Math.abs(g)){if("flex"==h.width)return!0;b=!0;a=d/120}else if(f){if(!this.iRefresh.vscroll)return!0;
a=f/120}else if(e.detail){if(!this.iRefresh.vscroll)return!0;a=-1*e.detail/3}a*=3;e=b?this.hscroll:this.vscroll;g=parseInt(e.option("cur_pos"));d=parseInt(e.option("num_eles"));if(!h.scrollModel.smooth&&(b&&h.virtualX||!b&&h.virtualY)){a=0<a?Math[1>a?"ceil":"floor"](a):Math[-1>a?"ceil":"floor"](a);h=g-a;0>h?h=0:h>d-1&&(h=d-1);if(h==g)return!0;e.option("cur_pos",g-a);e.scroll()}else{h=e.option("ratio");a=h-a/(d-1);1<a?a=1:0>a&&(a=0);if(h==a)return!0;e.option("ratio",a);e.drag()}return!1};c._onDblClickCell=
function(e){var h=l(e.currentTarget),a=this.getCellIndices({$td:h}),b=a.rowIndxPage,d=b+this.rowIndxOffset,a=a.colIndx;if(null!=a){if(!1==this._trigger("cellDblClick",e,{$td:h,rowIndxPage:b,rowIndx:d,colIndx:a,column:this.colModel[a],rowData:this.pdata[b]}))return!1;1<this.options.editModel.clicksToEdit&&this.isEditableRow({rowIndx:d})&&this.isEditableCell({colIndx:a,rowIndx:d})&&this.editCell({rowIndxPage:b,colIndx:a})}};c._onClickCont=function(e){};c._onClickRow=function(e){var h=l(e.currentTarget),
a=parseInt(h.attr("pq-row-indx")),b=a+this.rowIndxOffset;if(!isNaN(a)&&!1==this._trigger("rowClick",e,{$tr:h,rowIndxPage:a,rowIndx:b,rowData:this.pdata[a]}))return!1};c._onRightClickRow=function(e){var h=l(e.currentTarget),a=parseInt(h.attr("pq-row-indx")),b=a+this.rowIndxOffset;if(!isNaN(a)&&!1==this._trigger("rowRightClick",e,{$tr:h,rowIndxPage:a,rowIndx:b,rowData:this.pdata[a]}))return!1};c._onDblClickRow=function(e){var h=l(e.currentTarget),a=parseInt(h.attr("pq-row-indx")),b=this.getRowIndxOffset();
if(!1==this._trigger("rowDblClick",e,{$tr:h,rowIndxPage:a,rowIndx:a+b,rowData:this.pdata[a]}))return!1};c.getValueFromDataType=function(e,h,a){if("date"==h)return h=Date.parse(e),isNaN(h)?"":a?h:e;if("object"==h)return e;if("integer"==h)h=parseInt(e);else if("float"==h)h=parseFloat(e);else return"bool"==h?(h=l.trim(e).toLowerCase(),0==h.length?null:"true"==h||"yes"==h||"1"==h?!0:"false"==h||"no"==h||"0"==h?!1:Boolean(h)):l.trim(e);return isNaN(h)||null==h?null==e?e:null:h};var b=function(e){this.that=
e},d=b.prototype;d._isValidCell=function(e){var h=this.that,a=e.column,b=a.validations;if(!b||!b.length)return{valid:!0};var d=e.value,g=a.dataType,f=function(e){return h.getValueFromDataType(e,g,!0)};e=e.rowData;if(!e)throw"rowData required.";for(var c=0;c<b.length;c++){var m=b[c],k=m.type,l=!1,x=m.msg,w=m.value;if(!1!==m.on&&(null==d&&"function"!=typeof k?l=!1:"minLen"==k?(d=f(d),w=f(w),d.length>=w&&(l=!0)):"nonEmpty"==k?null!=d&&""!==d&&(l=!0):"maxLen"==k?(d=f(d),w=f(w),d.length<=w&&(l=!0)):"gt"==
k?(d=f(d),w=f(w),d>w&&(l=!0)):"gte"==k?(d=f(d),w=f(w),d>=w&&(l=!0)):"lt"==k?(d=f(d),w=f(w),d<w&&(l=!0)):"lte"==k?(d=f(d),w=f(w),d<=w&&(l=!0)):"neq"==k?(d=f(d),w=f(w),d!==w&&(l=!0)):"regexp"==k?(new RegExp(w)).test(d)&&(l=!0):"function"==typeof k?(w={column:a,value:d,rowData:e,msg:x},!1==k.call(h,w)?(l=!1,w.msg!=x&&(x=w.msg)):l=!0):l=!0,!l))return{valid:!1,msg:x,column:a,warn:m.warn,dataIndx:a.dataIndx,validation:m}}return{valid:!0}};d.isValidCell=function(e){var h=this.that,a=e.rowData,b=e.rowIndx,
d=e.value,g=e.valueDef,f=e.column,c=e.focusInvalid,m=h.options,k=m.bootstrap,s=e.allowInvalid,x=f.dataIndx,w=m.validation,y=m.warning,n=m.editModel,A=n.invalidClass,D=n.warnClass,n=document.activeElement;if(e.checkEditable&&!1==h.isEditableCell({rowIndx:b,dataIndx:x}))return{valid:!0};e=this._isValidCell({column:f,value:d,rowData:a});var d=e.valid,f=e.warn,E=e.msg;if(d)h.data({rowData:a,dataIndx:x,data:"pq_valid"})&&(h.removeClass({rowData:a,rowIndx:b,dataIndx:x,cls:D+" "+A}),h.removeData({rowData:a,
dataIndx:x,data:"pq_valid"}));else var w=l.extend({},f?y:w,e.validation),F=w.css,K=w.cls,L=w.icon,N=w.style;if(s||f){if(d)return{valid:!0};h.addClass({rowData:a,rowIndx:b,dataIndx:x,cls:f?D:A});h.data({rowData:a,dataIndx:x,data:{pq_valid:{css:F,icon:L,style:N,msg:E,cls:K}}});return e}if(!d){if(null==b&&(a=h.getRowIndx({rowData:a,dataUF:!0}),b=a.rowIndx,null==b||a.uf))return e.uf=a.uf,e;if(c){var H;if(!g)h.goToPage({rowIndx:b}),b={rowIndx:b,dataIndx:x},b=h.normalize(b),H=h.getCell(b),h["cell"==m.selectionModel.type?
"setSelection":"scrollCell"](b),h.focus(b);else if(l(n).hasClass("pq-editor-focus")&&(g=m.editModel.indices)){m=g.rowIndx;g=g.dataIndx;if(null!=b&&b!=m)throw"incorrect usage of isValid rowIndx: "+b;if(x!=g)throw"incorrect usage of isValid dataIndx: "+x;h.editCell({rowIndx:m,dataIndx:x})}var G;if(H||(G=h.getEditCell())&&G.$cell){h=H||G.$cell;h.attr("title",E);H="tooltip";G="open";k.on&&k.tooltip&&(H=k.tooltip,G="show");try{h[H]("destroy")}catch(O){}h[H]({trigger:"manual",position:{my:"left center+5",
at:"right center"},content:function(){return(""==L?"":"<span class='ui-icon "+L+" pq-tooltip-icon'></span>")+E},open:function(e,h){var a=h.tooltip;K&&a.addClass(K);if(N){var b=a.attr("style");a.attr("style",b+";"+N)}F&&a.tooltip.css(F)}})[H](G)}}return e}if(g&&(G=h.getEditCell())&&G.$cell){h=G.$cell;h.removeAttr("title");try{h.tooltip("destroy")}catch(I){}}return{valid:!0}};c.isValid=function(e){return this.iIsValid.isValid(e)};d.isValid=function(e){e=e||{};var h=this.that,a=e.allowInvalid,b=e.focusInvalid,
d=e.checkEditable,a=null==a?!1:a,g=e.dataIndx;if(null!=g){var f=h.columns[g],c=e.rowData||h.getRowData(e),m=e.hasOwnProperty("value"),h=m?e.value:c[g],h=this.isValidCell({rowData:c,checkEditable:d,rowIndx:e.rowIndx,value:h,valueDef:m,column:f,allowInvalid:a,focusInvalid:b});return h.valid||h.warn?{valid:!0}:h}if(null!=e.rowIndx||null!=e.rowIndxPage||null!=e.rowData)for(var c=e.rowData||h.getRowData(e),k=h.colModel,m=[],l=0,x=k.length;l<x;l++){if(f=k[l],!f.hidden&&(g=f.dataIndx,h=c[g],h=this.isValidCell({rowData:c,
value:h,column:f,rowIndx:e.rowIndx,checkEditable:d,allowInvalid:a,focusInvalid:b}),!h.valid&&!h.warn))if(a)m.push({rowData:c,dataIndx:g,column:f});else return h}else{e=e.data?e.data:h.options.dataModel.data;m=[];if(!e)return null;l=0;for(x=e.length;l<x;l++){c=e[l];if(d&&(f=this.getRowIndx({rowData:c}).rowIndx,null==f||!1==h.isEditableRow({rowData:c,rowIndx:f})))continue;c=this.isValid({rowData:c,rowIndx:f,checkEditable:d,allowInvalid:a,focusInvalid:b});g=c.cells;if(!1===a){if(!c.valid)return c}else g&&
g.length&&(m=m.concat(g))}}return a&&m.length?{cells:m,valid:!1}:{valid:!0}};c.isValidChange=function(e){e=e||{};var h=this.getChanges(),h=h.updateList.concat(h.addList);e.data=h;return this.isValid(e)};c.isEditableRow=function(e){var h=this.options.editable;return null!=h?"function"==typeof h?h.call(this,this.normalize(e)):h:!0};c.isEditableCell=function(e){e=this.normalize(e);var h=e.column,a=h.editable;return e.checkVisible&&h.hidden?!1:null!=a?"function"==typeof a?a.call(this,e):a:!0};c._onContMouseDown=
function(e){this.blurEditor({blurIfFocus:!0});if(!1===this._trigger("contMouseDown",e,null))return!1;var h=l(e.target);e=h.closest(".pq-grid-cell,.pq-grid-number-cell");h=h.closest(".pq-grid-row");e.length||h.length||(e=this.$cont[0],e.setAttribute("tabindex",0),e.focus());return!0};c._onCellMouseDown=function(e){var h=l(e.currentTarget),a=this.getCellIndices({$td:h});if(null!=a.rowIndx)return a=this.iMerge.getRootCell(a.rowIndx,a.colIndx,"o"),a=this.normalize(a),a.$td=h,!1==this._trigger("cellMouseDown",
e,a)?!1:!0};c._onRowMouseDown=function(e){var h=l(e.currentTarget),a=this.getRowIndx({$tr:h});a.$tr=h;return!1==this._trigger("rowMouseDown",e,a)?!1:!0};c._onCellMouseEnter=function(e,h){var a=this.options,b=this.getCellIndices({$td:h});if(null!=b.rowIndx&&null!=b.colIndx){if(!1===this._trigger("cellMouseEnter",e,b))return!1;"cell"==a.hoverMode&&this.highlightCell(h);return!0}};c._onRowMouseEnter=function(e,h){var a=this.options,b=this.getRowIndx({$tr:h}),d=b.rowIndxPage;if(!1===this._trigger("rowMouseEnter",
e,b))return!1;"row"==a.hoverMode&&this.highlightRow(d);return!0};c._onCellMouseLeave=function(e,h){"cell"==this.options.hoverMode&&this.unHighlightCell(h);return!0};c._onRowMouseLeave=function(e,h){var a=this.getRowIndx({$tr:h}).rowIndxPage;"row"==this.options.hoverMode&&this.unHighlightRow(a);return!0};c.enableSelection=function(){this.element.removeClass("pq-disable-select").off("selectstart"+this.eventNamespace)};c.disableSelection=function(){this.element.addClass("pq-disable-select").on("selectstart"+
this.eventNamespace,function(e){if(e.target){var h=l(e.target);if(h.is("input,textarea,select")||h.closest(".pq-native-select").length)return!0;e.preventDefault()}})};c._onClickCell=function(e){var h=this.options.editModel,a=l(e.currentTarget),b=this.getCellIndices({$td:a}),b=this.iMerge.getRootCell(b.rowIndx,b.colIndx,"o"),b=this.normalize(b),d=b.rowIndx,g=b.colIndx;b.$td=a;b.evt=e;if(!1==this._trigger("cellClick",e,b))return!1;null==g||0>g||1==h.clicksToEdit&&this.isEditableRow({rowIndx:d})&&this.isEditableCell({colIndx:g,
rowIndx:d})&&this.editCell(b)};c._onRightClickCell=function(e){var h=l(e.currentTarget),a=this.getCellIndices({$td:h}),b=a.rowIndxPage,d=b+this.rowIndxOffset,a=a.colIndx,g=this.colModel;if(null!=a&&(g=g[a],!1==this._trigger("cellRightClick",e,{$td:h,rowIndxPage:b,rowIndx:d,colIndx:a,dataIndx:g.dataIndx,column:g,rowData:this.pdata[b]})))return!1};c.highlightCell=function(e){e.addClass("pq-grid-cell-hover ui-state-hover")};c.unHighlightCell=function(e){e.removeClass("pq-grid-cell-hover ui-state-hover")};
c.highlightRow=function(e){isNaN(e)||(e=this.getRow({rowIndxPage:e}))&&e.addClass("pq-grid-row-hover ui-state-hover")};c.unHighlightRow=function(e){isNaN(e)||(e=this.getRow({rowIndxPage:e}))&&e.removeClass("pq-grid-row-hover ui-state-hover")};c._getCreateEventData=function(){return{dataModel:this.options.dataModel,data:this.pdata,colModel:this.options.colModel}};c._findCellFromEvt=function(e){e=l(e.target).closest(".pq-grid-cell");if(null==e||0==e.length)return{rowIndxPage:null,colIndx:null,$td:null};
var h=this.getCellIndices({$td:e});h.$td=e;return h};c._initPager=function(){var e=this,h=e.options,a=h.pageModel;a.type&&(h={bootstrap:h.bootstrap,change:function(h,a){e.blurEditor({force:!0});var b=e.options.pageModel;void 0!=a.curPage&&(b.prevPage=b.curPage,b.curPage=a.curPage);void 0!=a.rPP&&(b.rPP=a.rPP);"remote"==b.type?e.remoteRequest({callback:function(){e._onDataAvailable({apply:!0,header:!1})}}):e.refreshView({header:!1,source:"pager"})},refresh:function(h){e.refreshDataAndView()}},h=l.extend(h,
a),this.pagerW=pq.pager(a.appendTo?a.appendTo:this.$footer,h))};c.generateLoading=function(){this.$loading&&this.$loading.remove();this.$loading=l("<div class='pq-loading'></div>").appendTo(this.element);l(["<div class='pq-loading-bg'></div><div class='pq-loading-mask ui-state-highlight'><div>",this.options.strLoading,"...</div></div>"].join("")).appendTo(this.$loading);this.$loading.find("div.pq-loading-bg").css("opacity",.2)};c._refreshLoadingString=function(){this.$loading.find("div.pq-loading-mask").children("div").html(this.options.strLoading)};
c.showLoading=function(){null==this.showLoadingCounter&&(this.showLoadingCounter=0);this.showLoadingCounter++;this.$loading.show()};c.hideLoading=function(){0<this.showLoadingCounter&&this.showLoadingCounter--;this.showLoadingCounter||this.$loading.hide()};c.refreshDataFromDataModel=function(e){e=e||{};var h=this.options,a=h.pageModel,b=h.dataModel.data,d,g=a.type;d=this._queueATriggers;for(var f in d){var c=d[f];delete d[f];this._trigger(f,c.evt,c.ui)}this._trigger("beforeRefreshData",null,{});this.rowIndxOffset=
0;"local"==g?(a.totalRecords=b.length,a.totalPages=h=Math.ceil(b.length/a.rPP),a.curPage>h&&(a.curPage=h),h&&!a.curPage&&(a.curPage=1),h=(a.curPage-1)*a.rPP,d=a.curPage*a.rPP,d>b.length&&(d=b.length),this.pdata=b.slice(h,d)):"remote"==g?(a.totalPages=h=Math.ceil(a.totalRecords/a.rPP),a.curPage>h&&(a.curPage=h),h&&!a.curPage&&(a.curPage=1),d=a.rPP,d>b.length&&(d=b.length),this.pdata=b.slice(0,d)):this.pdata=h.backwardCompat?b.slice(0):b;if("local"==g||"remote"==g)this.rowIndxOffset=a.rPP*(a.curPage-
1);this._trigger("dataReady",null,{source:e.source})};c.getQueryStringCRUD=function(){return""};c.remoteRequest=function(e){this.loading&&this.xhr.abort();e=e||{};var h=this,a="",b="",d=this.options,g=!1,f=this.colModel,c=d.dataModel,m=d.sortModel,k=d.filterModel,s=d.pageModel;if("function"==typeof c.getUrl)(d=c.getUrl.call(this,{colModel:f,dataModel:c,sortModel:m,groupModel:d.groupModel,pageModel:s,filterModel:k}))&&d.url&&(a=d.url),d&&d.data&&(b=d.data);else if("string"==typeof c.url){var a=c.url,
b={},d={},x={};"remote"==m.type&&(e.initBySort||this.sort({initByRemote:!0}),(m=this.iSort.getQueryStringSort())&&(b={pq_sort:m}));"remote"==s.type&&(x={pq_curpage:s.curPage,pq_rpp:s.rPP});"local"!=k.type&&(m=this.iFilterData.getQueryStringFilter())&&(g=!0,d={pq_filter:m});var m=c.postData,w=c.postDataOnce;m&&"function"==typeof m&&(m=m.call(this,{colModel:f,dataModel:c}));b=l.extend({pq_datatype:c.dataType},d,x,b,m,w)}a&&(this.loading=!0,this.showLoading(),this.xhr=l.ajax({url:a,dataType:c.dataType,
async:null==c.async?!0:c.async,cache:c.cache,contentType:c.contentType,type:c.method,data:b,beforeSend:function(e,a){if("function"==typeof c.beforeSend)return c.beforeSend.call(h,e,a)},success:function(a,b,d){"function"==typeof c.getData&&(a=c.getData.call(h,a,b,d));c.data=a.data;"remote"==s.type&&(a.curPage&&(s.curPage=a.curPage),a.totalRecords&&(s.totalRecords=a.totalRecords));h.hideLoading();h.loading=!1;h._trigger("load",null,{dataModel:c,colModel:f});e.callback&&e.callback();g&&(h._queueATriggers.filter=
{ui:{type:"remote",filterModel:k}})},error:function(e,a,b){h.hideLoading();h.loading=!1;if("function"==typeof c.error)c.error.call(h,e,a,b);else if("abort"!=b)throw"Error : "+b;}}))};c._refreshTitle=function(){this.$title.html(this.options.title)};c._destroyDraggable=function(){var e=this.element,h=e.parent(".pq-wrapper");h.length&&h.data("draggable")&&(h.draggable("destroy"),this.$title.removeClass("pq-draggable pq-no-capture"),e.unwrap(".pq-wrapper"))};c._refreshDraggable=function(){var e=this.element,
h=this.$title;this.options.draggable?(h.addClass("pq-draggable pq-no-capture"),e.parent(".pq-wrapper").length||e.wrap("<div class='pq-wrapper' />"),e.parent(".pq-wrapper").draggable({handle:h})):this._destroyDraggable()};c._refreshResizable=function(){var e=this,h=this.element,a=this.options,b=-1<(a.width+"").indexOf("%"),d=-1<(a.height+"").indexOf("%"),g="auto"==a.width,f="flex"==a.width,c="flex"==a.height;if(!a.resizable||(c||d)&&(f||b||g))this._destroyResizable();else{var m="e,s,se";if(c||d)m=
"e";else if(f||b||g)m="s";b=!0;h.hasClass("ui-resizable")&&(d=h.resizable("option","handles"),m==d?b=!1:this._destroyResizable());b&&h.resizable({helper:"ui-state-default",handles:m,minWidth:a.minWidth,minHeight:a.minHeight?a.minHeight:100,delay:0,start:function(e,h){l(h.helper).css({opacity:.5,background:"#ccc",border:"1px solid steelblue"})},resize:function(e,h){},stop:function(h,b){var d=e.element,g=d[0],f=a.width,c=a.height,m=-1<(f+"").indexOf("%"),B=-1<(c+"").indexOf("%"),z=!1;g.style.width=
g.offsetWidth+3+"px";g.style.height=g.offsetHeight+3+"px";B||"flex"==c||(z=!0,a.height=g.offsetHeight);m||"auto"==f||"flex"==f||(z=!0,a.width=g.offsetWidth);e.refresh();d.css("position","relative");z&&l(window).trigger("resize")}})}};c._refreshAfterResize=function(){var e=this.options,h=e.width,a=e.height,e=-1!=(h+"").indexOf("%")?!0:!1,h="auto"===h,a=-1!=(a+"").indexOf("%")?!0:!1;(e||h||a)&&this.refresh()};c.refresh=function(e){this.iRefresh.refresh(e)};c.refreshView=function(e){null!=this.options.editModel.indices&&
this.blurEditor({force:!0});this.refreshDataFromDataModel(e);this.refresh(e)};c._refreshPager=function(){var e=this.options,h=e.pageModel,a=h.rPP,b=h.totalRecords;h.type?(h=e.pageModel,this.pagerW||this._initPager(),this.pagerW.option(h),b>a?this.$bottom.css("display",""):e.showBottom||this.$bottom.css("display","none")):(this.pagerW&&(this.pagerW.destroy(),this.pagerW=null),e.showBottom?this.$bottom.css("display",""):this.$bottom.css("display","none"))};c.getInstance=function(){return{grid:this}};
c.refreshDataAndView=function(e){if("remote"==this.options.dataModel.location){var h=this;this.remoteRequest({callback:function(){h._onDataAvailable(e)}})}else this._onDataAvailable(e)};c.getColIndx=function(e){var h=e.dataIndx;e=e.column;var a;if(e)a=!0;else if(void 0===h)throw"dataIndx / column NA";var b=this.colModel,d=b.length;if(a)for(h=0;h<d;h++){if(b[h]==e)return h}else if(h=this.colIndxs[h],null!=h)return h;return-1};c.getColumn=function(e){if(null==e.dataIndx)throw"dataIndx N/A";return this.columns[e.dataIndx]};
c._generateCellRowOutline=function(){var e=this.options,h=e.editModel;if(this.$div_focus){if(e.debug)throw"this.$div_focus already present assert failed";}else e=this.element,h.inline&&(e=this.getCell(h.indices),e.css("padding",0).empty()),this.$div_focus=l("<div class='pq-editor-outer'><div class='pq-editor-inner'></div></div>").appendTo(e),this.$div_focus.css("zIndex",e.zIndex()+5),h=l.extend({all:!0},h.indices),h=this.getCell(h),h.css("height",h[0].offsetHeight),h.empty(),this.refreshEditorPos()};
c._removeEditOutline=function(e){if(this.$div_focus){e=this.$div_focus.find(".pq-editor-focus");e.hasClass("hasDatepicker")&&e.datepicker("hide").datepicker("destroy");if(e[0]==document.activeElement){var h=this._blurEditMode;this._blurEditMode=!0;e.blur();this._blurEditMode=h}this.$div_focus.remove();delete this.$div_focus;e=this.options.editModel;h=l.extend({},e.indices);e.indices=null;h.rowData=void 0;this.refreshCell(h)}};c.refreshEditorPos=function(){var e=this.options.editModel,h=e.cellBorderWidth,
a=this.$div_focus,b=this.getCell(e.indices);if(!b||!b.length)return!1;var e=b[0].offsetWidth,d=b[0].offsetHeight,g=this.element.offset(),b=b.offset();a.css({height:d,width:e-1,borderWidth:h,left:b.left-g.left-1,top:b.top-g.top-1})};c.setEditorPosTimer=function(){var e=this,h=this.options;this._refreshEditorPosTimer&&(window.clearInterval(this._refreshEditorPosTimer),this._refreshEditorPosTimer=null);this._refreshEditorPosTimer=window.setInterval(function(){h.editModel.indices&&e.refreshEditorPos()},
200)};c.get$Tbl=function(e,h){var a=this.$tbl,b=[];if(a&&a.length){var d=this.pqpanes,g=this.options,f=g.freezeRows,g=g.freezeCols;d.h&&d.v?null==h?e>=f?b.push(a[2],a[3]):b.push(a[0],a[1]):b=h>=g&&e>=f?a[3]:h<g&&e>=f?a[2]:h>=g&&e<f?a[1]:a[0]:b=d.v?null==h?a:h>=g?a[1]:a[0]:d.h?e>=f?a[1]:a[0]:a[0];if(b)return l(b)}};c.scrollCell=function(e){this.scrollRow(e);this.scrollColumn(e)};c.scrollY=function(e){this.vscroll.option("cur_pos",e);this.vscroll.scroll()};c.scrollRow=function(e){var h=this.options;
e=this.normalize(e);var a=e.rowIndxPage,b=e.rowData;if(!this.pdata||a>=this.pdata.length||!b||b.pq_hidden)return!1;h.virtualY?this._scrollRowVirtual(e):this.iMouseSelection.scrollRowNonVirtual(e)};c._scrollRowVirtual=function(e){var h=this.options,a=e.rowIndxPage,b=this.iHierarchy?!0:!1,d=e.rowIndx;e=this.vscroll;var g=this.scrollCurPos,a=null==a?d-this.rowIndxOffset:a,d=parseInt(h.freezeRows);if(!(a<d)&&(h=this._calcCurPosFromRowIndxPage(a),null!=h)){h<g&&(e.option("cur_pos",h),e.scroll());var f=
this.get$Tbl(a);if(!f||!f.length)return null;var c=f.children("tbody").children("tr[pq-row-indx="+a+"]"),m=a=c.last();1<c.length&&(m=c.first());var k=a[0],c=parseInt(f.css("marginTop"));if(void 0==k)e.option("cur_pos",h),e.scroll();else{var k=k.offsetTop+k.offsetHeight,l=this.$cont[0].offsetHeight,x=this._getSBHeight(),m=m.prev("tr");if(!m.hasClass("pq-row-hidden")&&!m.hasClass("pq-last-frozen-row")&&k>l-x-c){m=k-(l-x-c);c=f.children().children("tr");k=f=0;d?(d=c.filter("tr.pq-last-frozen-row").last().next(),
0==d.length&&(d=c.filter("tr.pq-row-hidden").next())):d=c.filter("tr.pq-row-hidden").next();do{if(!d.length)break;f+=d[0].offsetHeight;if(d[0]==a[0])break;else if(b&&!1!=d.hasClass("pq-detail-child")||k++,f>=m)break;d=d.next()}while(1);b=g+k;b>h&&(b=h);g=e.option("num_eles");g<b+1&&(g=b+1);e.option({num_eles:g,cur_pos:b});e.scroll()}}}};c.blurEditor=function(e){if(this.$div_focus){var h=this.$div_focus.find(".pq-editor-focus");if(e&&e.blurIfFocus)document.activeElement==h[0]&&h.blur();else return h.triggerHandler("blur",
e)}};c._scrollColumnVirtual=function(e){var h=e.colIndx,a=this.hscroll,h=null==h?this.colIndxs[e.dataIndx]:h;e=this.options.freezeCols;var b=this._calcRightEdgeCol(h).width,d=this.iRefresh.getEContWd();if(b>d){for(var b=this.calcWidthCols(-1,h+1)-d,d=this.colModel,g=d.length,f=0,c=0,m=e;m<g;m++){var k=d[m];k.hidden||(f+=k.outerWidth);if(m==h){c=m-e-this._calcNumHiddenUnFrozens(m);break}else if(f>=b){c=m-e-this._calcNumHiddenUnFrozens(m)+1;break}}a.option("cur_pos",c);a.scroll();return!0}return h>=
e&&h<this.initH?(h=h-e-this._calcNumHiddenUnFrozens(h),a.option("cur_pos",h),a.scroll(),!0):!1};c.scrollColumn=function(e){var h=this.options;return"flex"!==h.width||h.maxWidth?h.virtualX?this._scrollColumnVirtual(e):this.iMouseSelection.scrollColumnNonVirtual(e):!1};c.selection=function(e){if(e){var h=e.method,a,b=e.type;"row"==b?a=this.iRows[h](e):"cell"==b&&(a=this.iCells[h](e));if("add"==h||"remove"==h||"removeAll"==h)this.iSelection.dirty=!0,this.iSelection._trigger();return a}e=this.iSelection;
e.isDirty()&&e.refresh();return e};c.goToPage=function(e){var h=this.options.pageModel;if("local"==h.type||"remote"==h.type){var a=e.rowIndx,b=h.rPP;e=null==e.page?Math.ceil((a+1)/b):e.page;e!=h.curPage&&(h.curPage=e,"local"==h.type?this.refreshView():this.refreshDataAndView())}};c.setSelection=function(e){if(null==e)return this.iSelection.removeAll(),!0;var h=this.pdata;if(!h||!h.length)return!1;e=this.normalize(e);var h=e.rowIndx,a=e.rowIndxPage,b=e.colIndx;e.rowData&&null==h&&(a=this.getRowIndx(e),
e.rowIndx=h=a.rowIndx,e.rowIndxPage=a.rowIndxPage);if(null==h||0>h||0>b||b>=this.colModel.length)return!1;this.goToPage(e);a=h-this.rowIndxOffset;this.scrollRow({rowIndxPage:a});null==b?this.range({r1:h}).select():(this.scrollColumn({colIndx:b}),this.range({r1:h,c1:b}).select());!1!==e.focus&&this.focus({rowIndxPage:a,colIndx:null==b?this.getFirstVisibleCI():b})};c.getColModel=function(){return this.colModel};c.saveEditCell=function(e){var h=this.options,a=h.editModel;if(!a.indices)return null;var b=
l.extend({},a.indices);e=e?e.evt:null;var d=b.rowIndxPage,a=d+this.rowIndxOffset,g=this.colModel[b.colIndx],b=g.dataIndx,f=this.pdata[d],c=h.dataModel,m;if(null==f)return null;if(null!=d){h=this.getEditCellData();if(l.isPlainObject(h)){m={};for(var k in h)m[k]=f[k]}else m=this.readCell(f,g);"<br>"==h&&(h="");null==m&&""===h&&(h=null);k={rowIndx:a,rowIndxPage:d,dataIndx:b,column:g,newVal:h,value:h,oldVal:m,rowData:f,dataModel:c};if(!1===this._trigger("cellBeforeSave",e,k))return!1;d={};g=!1;l.isPlainObject(h)?
(d=h,g=!0):d[b]=h;if(!1===this.updateRow({row:d,rowIndx:a,refresh:g,silent:!0,source:"edit",checkEditable:!1}))return!1;this._trigger("cellSave",e,k);return!0}};c._addInvalid=function(e){};c._digestData=function(e){if(!1===this._trigger("beforeValidate",null,e))return!1;var h=this.options,a=h.editModel,b=h.dataModel,d=b.data,g=h.colModel,f=h.pageModel,c=h.historyModel,m=e.validate,m=null==m?a.validate:m,k="remote"==f.type,l=e.allowInvalid,l=null==l?a.allowInvalid:l,x=h.trackModel,a=e.track,a=null==
a?null==h.track?x.on:h.track:a,w=e.history,w=null==w?c.on:w,y=this.iHistory,c=this.iUCData,n=e.checkEditable,n=null==n?!0:n,A=e.checkEditableAdd,A=null==A?n:A,x=this.saveCell,D=this.columns,E=this.colIndxs,F=e.source,K=this.rowIndxOffset,L=this.getValueFromDataType,N=e.rowList,H=N.length;d||(d=h.dataModel.data=[]);for(var G=[],O=0;O<H;O++){var I=N[O],J=I.newRow,P=I.rowData,M=I.type,U=I.checkEditable,Q=I.rowIndx,V=I.oldRow;null==U&&("update"==M?U=n:"add"==M&&(U=A));if("update"==M){if(!V)throw"oldRow required while update";
if(U&&!0!==h.editable&&!1===this.isEditableRow({rowIndx:Q,rowData:P}))continue}else if("delete"==M){G.push(I);continue}if("add"==M)for(var T=0,W=g.length;T<W;T++){var R=g[T],S=R.dataIndx;J[S]=J[S]}for(S in J)if(R=D[S],T=E[S],R)if(U&&null!=R.editable&&!1===this.isEditableCell({rowIndx:Q,colIndx:T,dataIndx:S}))delete J[S];else{var X=R.dataType,T=L(J[S],X),W=V?V[S]:void 0,W=void 0!==W?L(W,X):void 0;J[S]=T;if(m&&R.validations)if("edit"==F&&!1===l){if(R=this.isValid({focusInvalid:!0,dataIndx:S,rowIndx:Q,
value:T}),!1==R.valid&&!R.warn)return!1}else R=this.iIsValid.isValidCell({column:R,rowData:"add"==M?J:P,allowInvalid:l,value:T}),!1===R.valid&&(!1!==l||R.warn||delete J[S]);"update"==M&&T===W&&(delete J[S],V&&delete V[S])}if(J)if("update"==M)for(S in J){G.push(I);break}else G.push(I)}N=e.rowList=G;H=N.length;if(!H)return"edit"==F?null:!1;w&&(y.increment(),y.push({rowList:N}));for(O=0;O<H;O++)if(I=N[O],M=I.type,J=I.newRow,Q=I.rowIndx,h=I.rowIndxPage,P=I.rowData,"update"==M)for(S in a&&c.update({rowData:P,
row:J,refresh:!1}),J)R=D[S],T=J[S],x(P,R,T);else if("add"==M)a&&c.add({rowData:J}),null==Q&&null==h?d.push(J):(h=Q-K,h=k?h:Q,d.splice(h,0,J)),k&&f.totalRecords++;else if("delete"==M){h=this.getRowIndx({rowData:P,dataUF:!0});g=h.uf;Q=h.rowIndx;if(a)c["delete"]({rowIndx:Q,rowData:P});h=Q-K;h=k?h:Q;g?b.dataUF.splice(Q,1):(h=d.splice(h,1))&&h.length&&k&&f.totalRecords--}this._trigger("change",null,e);return!0};c.refreshColumn=function(e){e=this.normalize(e);var a=this.initV,b=this.finalV,d=this.options.freezeRows,
g=e.colIndx,f=e.dataIndx,c=e.column;e.skip=!0;for(var m=0;m<=b;m++)m<a&&m>=d&&(m=a),e.rowIndxPage=m,this.refreshCell(e);this._trigger("refreshColumn",null,{column:c,colIndx:g,dataIndx:f});this.iRefresh.softRefresh()};c.refreshCell=function(e){e=this.normalize(e);if(this.pdata){var a=e.skip,b=e.rowIndx,d=e.rowIndxPage,g=e.colIndx,f=this.iMerge;if(e.rowData){var c=this.getCell({all:!0,rowIndxPage:d,colIndx:g});if(c&&0<c.length){var m=e;f.ismergedCell(b,g)&&(m=f.getRootCell(b,g,"a"));var b=this.iGenerateView.renderCell(m),
k;b&&(c.replaceWith(b),(k=this._focusElement)&&k.rowIndxPage==d&&this.focus(),a||(this._trigger("refreshCell",null,e),this.iRefresh.softRefresh()))}}}};c.refreshRow=function(e){e=this.normalize(e);if(this.pdata){var a=e.rowIndx,b=e.rowIndxPage,d=this.options,g=d.freezeRows,f=e.rowData;if(!f||f.pq_hidden||b>this.finalV||b<this.initV&&b>=g)return null;var c=this.getRow({all:!0,rowIndxPage:b}),m,k=[];this.iGenerateView.refreshRow(b,k);k=k.join("");if(c&&c.length)c.replaceWith(k);else if(d.virtualY)if(b==
this.finalV)this.$tbl.append(k);else if(b==this.initV)for(d=this.$tbl,c=0;c<d.length;c++)l(d[c]).children("tbody").children(g?".pq-last-frozen-row":"tr:first").after(k);else throw"refreshRow > rip not found";else return!1;(m=this._focusElement)&&m.rowIndxPage==b&&this.focus();this._trigger("refreshRow",null,{rowData:f,rowIndx:a,rowIndxPage:b});!1!==e.refresh&&this.iRefresh.softRefresh();return!0}};c.quitEditMode=function(e){if(!this._quitEditMode){var a=!1,b=!1,d=!1,g=this.options.editModel,f=g.indices,
c=void 0;this._quitEditMode=!0;e&&(a=e.old,b=e.silent,d=e.fireOnly,c=e.evt);f&&(b||a||this._trigger("editorEnd",c,f),d||(this._removeEditOutline(e),g.indices=null));this._quitEditMode=null}};c.getViewPortRowsIndx=function(){return{beginIndx:this.initV,endIndx:this.finalV}};c.getViewPortIndx=function(){return{initV:this.initV,finalV:this.finalV,initH:this.initH,finalH:this.finalH}};c.getRowIndxOffset=function(){return this.rowIndxOffset};c.getEditCell=function(){var e=this.options.editModel;if(e.indices){var e=
this.getCell(e.indices),a=this.$div_focus.children(".pq-editor-inner"),b=a.find(".pq-editor-focus");return{$td:e,$cell:a,$editor:b}}return{}};c.editCell=function(e){e=this.normalize(e);var a=this.iMerge,b=e.rowIndx,d=e.colIndx;if(a.ismergedCell(b,d)&&(a=a.getRootCell(b,d,"o"),a.rowIndx!=e.rowIndx||a.colIndx!=e.colIndx))return!1;this.scrollRow(e);this.scrollColumn(e);if((a=this.getCell(e))&&a.length)return this._editCell(e)};c.getFirstEditableColIndx=function(e){if(null==e.rowIndx)throw"rowIndx NA";
if(!this.isEditableRow(e))return-1;for(var a=this.colModel,b=0;b<a.length;b++)if(e.colIndx=b,this.isEditableCell(e)&&!a[b].hidden)return b;return-1};c.editFirstCellInRow=function(e){var a=this.rowIndxOffset,b=e.rowIndx;e=e.rowIndxPage;b=null==b?e+a:b;e=null==e?b-a:e;a=this.getFirstEditableColIndx({rowIndx:b});-1!=a&&this.editCell({rowIndxPage:e,colIndx:a})};c._editCell=function(e){var h=this.normalize(e),b=this;e=h.evt;var d=h.rowIndxPage,g=h.colIndx,f=b.pdata;if(!f||d>=f.length)return!1;var c=this.options,
m=c.editModel,f=f[d],k=h.rowIndx,t=this.colModel[g],s=t.dataIndx,x=b.readCell(f,t),w={rowIndx:k,rowIndxPage:d,cellData:x,rowData:f,dataIndx:s,colIndx:g,column:t},n=t.editor,n="function"==typeof n?n.call(this,w):n;void 0===n&&"function"==typeof c.geditor&&(n=c.geditor.call(this,w));if(!1!==n){n&&n.getData&&(m._getData=n.getData);var C=c.editor,A=n?l.extend({},C,n):C,c=!1;if(m.indices){n=m.indices;if(n.rowIndxPage==d&&n.colIndx==g){this.refreshEditorPos();var D=this.$div_focus.find(".pq-editor-focus");
window.setTimeout(function(){D.focus()},0);return!1}if(!1===this.blurEditor({evt:e}))return!1;this.quitEditMode({evt:e})}m.indices={rowIndxPage:d,rowIndx:k,colIndx:g,column:t,dataIndx:s};this._generateCellRowOutline();n=this.$div_focus.children(".pq-editor-inner");"right"==t.align?n.addClass("pq-align-right"):"center"==t.align?n.addClass("pq-align-center"):n.addClass("pq-align-left");w.$cell=n;var E,F=A.type,h=null==h.select?A.select:h.select,K=A.init,L=A.valueIndx,N=A.dataMap,H=A.mapIndices,H=H?
H:{},G=A.cls||"",G="function"===typeof G?G.call(this,w):G;E="pq-editor-focus "+G;var G=E+" pq-cell-editor ",O=A.attr||"",O="function"===typeof O?O.call(this,w):O,I=A.style||"",I=(I="function"===typeof I?I.call(this,w):I)?"style='"+I+"'":"";w.cls=E;w.attr=O;"function"==typeof F&&(E=F.call(this,w))&&(F=E);C._type=F;"checkbox"==F?(A=A.subtype,n.html("<input "+(x?"checked='checked'":"")+" class='"+G+"' "+O+" "+I+" type=checkbox name='"+s+"' />"),C=n.children("input"),"triple"==A&&(C.pqval({val:x}),n.click(function(e){l(this).children("input").pqval({incr:!0})}))):
"textarea"==F||"select"==F||"textbox"==F?("textarea"==F?E="<textarea class='"+G+"' "+O+" "+I+" name='"+s+"' ></textarea>":"select"==F?(C=A.options||[],"function"===typeof C&&(C=C.call(this,w)),G=[O," class='",G,"' ",I," name='",s,"'"].join(""),E=a.select({options:C,attr:G,prepend:A.prepend,labelIndx:A.labelIndx,valueIndx:L,groupIndx:A.groupIndx,dataMap:N})):E="<input class='"+G+"' "+O+" "+I+" type=text name='"+s+"' />",l(E).appendTo(n).val("select"==F&&null!=L&&(H[L]||this.columns[L])?H[L]?f[H[L]]:
f[L]:x)):F&&"contenteditable"!=F||(n.html("<div contenteditable='true' tabindx='0' "+I+" "+O+" class='"+G+"'></div>"),n.children().html(x),c=!0);"function"==typeof K&&K.call(this,w);var b=this,D=n.children(".pq-editor-focus"),J=m.filterKeys;(x=t.editModel)&&void 0!==x.filterKeys&&(J=x.filterKeys);var P={$cell:n,$editor:D,dataIndx:s,column:t,colIndx:g,rowIndx:k,rowIndxPage:d,rowData:f};m.indices=P;D.data({FK:J}).on("click",function(e){l(this).focus()}).on("keydown",function(e){b.iKeyNav._keyDownInEdit(e)}).on("keypress",
function(e){return b.iKeyNav._keyPressInEdit(e,{FK:J})}).on("keyup",function(e){return b.iKeyNav._keyUpInEdit(e,{FK:J})}).on("blur",function(e,a){var h=b.options.editModel,d=h.onBlur,g="save"==d,f="validate"==d,c=h.cancelBlurCls,m=a?a.force:!1;if(!b._quitEditMode&&!b._blurEditMode&&h.indices){h=l(e.target);if(!m){if(!1===b._trigger("editorBlur",e,P)||!d||c&&h.hasClass(c))return;if(h.hasClass("hasDatepicker")){if(h.datepicker("widget").is(":visible"))return!1}else if(h.hasClass("ui-autocomplete-input")){if(h.autocomplete("widget").is(":visible"))return}else if(h.hasClass("ui-multiselect")){if(l(".ui-multiselect-menu").is(":visible")||
l(document.activeElement).closest(".ui-multiselect-menu").length)return}else if(h.hasClass("pq-select-button")&&(l(".pq-select-menu").is(":visible")||l(document.activeElement).closest(".pq-select-menu").length))return}b._blurEditMode=!0;if(!b.saveEditCell({evt:e,silent:m||g||!f})&&!m&&f)return b._deleteBlurEditMode(),!1;b.quitEditMode({evt:e});b._deleteBlurEditMode()}}).on("focus",function(e){b._trigger("editorFocus",e,P)});b._trigger("editorBegin",e,P);D.focus();window.setTimeout(function(){!1===
l(document.activeElement).hasClass("pq-editor-focus")&&(b.element?b.element.find(".pq-editor-focus"):l()).focus()},0);if(h)if(c)try{var M=D[0],U=document.createRange();U.selectNodeContents(M);var Q=window.getSelection();Q.removeAllRanges();Q.addRange(U)}catch(V){}else D.select()}};c._deleteBlurEditMode=function(e){var a=this;e=e?e:{};a._blurEditMode&&(e.timer?window.setTimeout(function(){delete a._blurEditMode},0):delete a._blurEditMode)};c.getRow=function(e){var a=this.normalize(e);e=a.rowIndxPage;
var a=a.all?this.$tbl:this.get$Tbl(e),b=l();if(a&&a.length){var d=a.children("tbody");null!=e&&(b=d.children("tr[pq-row-indx="+e+"]"),b.length>a.length&&(b=b.filter(".pq-detail-master")))}return b};c.getCell=function(e){var a=e.all,b=this.options,d=this.normalize(e);e=d.rowIndxPage;var g=d.rowIndx,f=d.colIndx,c=this.iMerge;if(c.ismergedCell(g,f)){b=c.getRootCell(g,f,"a");g=c.getRootCell(g,f,"o");if(!(e===g.rowIndxPage&&f===g.colIndx||e===b.rowIndxPage&&f===b.colIndx))return l();e=b.rowIndxPage;f=
g.colIndx}else if(e>=b.freezeRows&&(e<this.initV||e>this.finalV)||f>=b.freezeCols&&(f<this.initH||f>this.finalH)||!d.rowData||!d.column||d.rowData.pq_hidden||d.column.hidden)return l();return(a=a?this.$tbl:this.get$Tbl(e,f))&&a.length?a.children().children("tr[pq-row-indx="+e+"]").children("[pq-col-indx="+f+"]"):l()};c.getCellHeader=function(e){var a=e.colIndx;e=e.dataIndx;a=null==a?this.colIndxs[e]:a;e=this.$tbl_header;var b=this.options.freezeCols;return e?(1<e.length&&(e=a>=b?l(e[1]):l(e[0])),
a=e.find("[pq-col-indx="+a+"].pq-grid-col-leaf")):l()};c.getEditorIndices=function(){var e=this.options.editModel.indices;return e?l.extend({},e):null};c.getEditCellData=function(){var e=this.options,a=e.editModel,b=a.indices;if(!b)return null;var d=b.colIndx,g=b.rowIndxPage,f=b.rowIndx,c=this.colModel[d],m=c.editor,k=e.editor,e=m?l.extend({},k,m):k,t=e.valueIndx,s=e.labelIndx,m=(m=e.mapIndices)?m:{},x=c.dataIndx,n=this.$div_focus.children(".pq-editor-inner"),y,C=a._getData||e.getData;a._getData=
void 0;if("function"==typeof C)y=C.call(this,{$cell:n,rowData:b.rowData,dataIndx:x,rowIndx:f,rowIndxPage:g,column:c,colIndx:d});else if(a=k._type,"checkbox"==a)y=n.children(),y="triple"==e.subtype?y.pqval():y.is(":checked")?!0:!1;else if("contenteditable"==a)y=n.children().html();else if((b=n.find('*[name="'+x+'"]'))&&b.length)if("select"==a&&null!=t)if(m[t]||this.columns[t]){if(y={},y[m[t]?m[t]:t]=b.val(),y[m[s]?m[s]:s]=b.find("option:selected").text(),e=e.dataMap)if(a=b.find("option:selected").data("map"))for(b=
0;b<e.length;b++)d=e[b],y[m[d]?m[d]:d]=a[d]}else y=b.val();else y=b.val();else(b=n.find(".pq-editor-focus"))&&b.length&&(y=b.val());return y};c.getCellIndices=function(e){e=e.$td;if(null==e||0==e.length||e.closest(".pq-grid")[0]!=this.element[0])return{};var a=e.parent("tr").attr("pq-row-indx"),b;null!=a&&(a=parseInt(a),b=a+this.rowIndxOffset);e=e.attr("pq-col-indx");null!=e&&(e=parseInt(e));return this.iMerge.getRootCell(b,e,"o")};c.getRowsByClass=function(e){var a=this.options,b="remote"==a.pageModel.type,
d=this.rowIndxOffset,a=a.dataModel.data,g=[];if(null==a)return g;for(var f=0,c=a.length;f<c;f++){var m=a[f];if(m.pq_rowcls&&(e.rowData=m,this.hasClass(e))){var m={rowData:m},k=b?f+d:f,l=k-d;m.rowIndx=k;m.rowIndxPage=l;g.push(m)}}return g};c.getCellsByClass=function(e){var a=this.options,b="remote"==a.pageModel.type,d=this.rowIndxOffset,a=a.dataModel.data,g=[];if(null==a)return g;for(var f=0,c=a.length;f<c;f++){var m=a[f],k=b?f+d:f,l=m.pq_cellcls;if(l)for(var s in l)l={rowData:m,rowIndx:k,dataIndx:s,
cls:e.cls},this.hasClass(l)&&(l=this.normalize(l),g.push(l))}return g};c.data=function(e){var a=e.dataIndx,b=e.colIndx,a=null!=b?this.colModel[b].dataIndx:a,b=e.data,d=null==b||"string"==typeof b?!0:!1;e=e.rowData||this.getRowData(e);if(!e)return{data:null};if(null==a){a=e.pq_rowdata;if(d){var g;null!=a&&(g=null==b?a:a[b]);return{data:g}}b=l.extend(!0,e.pq_rowdata,b);e.pq_rowdata=b}else{var f=e.pq_celldata;if(d)return null!=f&&(a=f[a],g=null==b||null==a?a:a[b]),{data:g};f||(e.pq_celldata={});b=l.extend(!0,
e.pq_celldata[a],b);e.pq_celldata[a]=b}};c.attr=function(e){var a=e.rowIndx,b=e.dataIndx,d=e.colIndx,b=null!=d?this.colModel[d].dataIndx:b,d=e.attr,g=null==d||"string"==typeof d?!0:!1,f=this.rowIndxOffset,c=e.refresh;e=e.rowData||this.getRowData(e);if(!e)return{attr:null};g||!1===c||null!=a||(a=this.getRowIndx({rowData:e}).rowIndx);if(null==b){b=e.pq_rowattr;if(g){var k;null!=b&&(k=null==d?b:b[d]);return{attr:k}}d=l.extend(!0,e.pq_rowattr,d);e.pq_rowattr=d;!1!==c&&null!=a&&(a=this.getRow({rowIndxPage:a-
f}))&&(b=m(d),a.attr(b))}else{var q=e.pq_cellattr;if(g)return null!=q&&(a=q[b],k=null==d||null==a?a:a[d]),{attr:k};q||(e.pq_cellattr={});d=l.extend(!0,e.pq_cellattr[b],d);e.pq_cellattr[b]=d;!1!==c&&null!=a&&(a=this.getCell({rowIndxPage:a-f,dataIndx:b}))&&(b=m(d),a.attr(b))}};var m=function(e){var a={},b;for(b in e){var d=e[b];if(d)if("title"==b)d=d.replace(/\"/g,"&quot;"),a[b]=d;else if("style"==b&&"object"==typeof d){var g=[],f,c;for(c in d)(f=d[c])&&g.push(c+":"+f);(d=g.join(";")+(g.length?";":
""))&&(a[b]=d)}else"object"==typeof d&&(d=JSON.stringify(d)),a[b]=d}return a};c.removeData=function(e){var a=e.dataIndx,b=e.colIndx,a=null!=b?this.colModel[b].dataIndx:a,b=e.data,b=null==b?[]:b,b="string"==typeof b?b.split(" "):b,d=b.length,g=e.rowData||this.getRowData(e);if(g)if(null==a){if(a=g.pq_rowdata){if(d)for(e=0;e<d;e++){var f=b[e];delete a[f]}d&&!l.isEmptyObject(a)||delete g.pq_rowdata}}else if((g=g.pq_celldata)&&g[a]){var c=g[a];if(d)for(e=0;e<d;e++)f=b[e],delete c[f];d&&!l.isEmptyObject(c)||
delete g[a]}};c.removeAttr=function(e){var a=e.rowIndx,b=e.dataIndx,d=e.colIndx,b=null!=d?this.colModel[d].dataIndx:b,g=e.attr,g=null==g?[]:g,g="string"==typeof g?g.split(" "):g,f=g.length,d=a-this.rowIndxOffset,c=e.refresh,m=e.rowData||this.getRowData(e);if(m)if(!1!==c&&null==a&&(a=this.getRowIndx({rowData:m}).rowIndx),null==b){if(b=m.pq_rowattr){if(f)for(e=0;e<f;e++){var k=g[e];delete b[k]}else for(k in b)g.push(k);f&&!l.isEmptyObject(b)||delete m.pq_rowattr}!1!==c&&null!=a&&g.length&&(g=g.join(" "),
(a=this.getRow({rowIndxPage:d}))&&a.removeAttr(g))}else{if((m=m.pq_cellattr)&&m[b]){var t=m[b];if(f)for(e=0;e<f;e++)k=g[e],delete t[k];else for(k in t)g.push(k);f&&!l.isEmptyObject(t)||delete m[b]}!1!==c&&null!=a&&g.length&&(g=g.join(" "),(a=this.getCell({rowIndxPage:d,dataIndx:b}))&&a.removeAttr(g))}};c.normalize=function(e){var a={},b;for(b in e)a[b]=e[b];var d=a.rowIndx,g=a.rowIndxPage;e=a.dataIndx;b=a.colIndx;if(null!=g||null!=d){var f=this.rowIndxOffset,d=null==d?parseInt(g,10)+f:d,g=null==g?
parseInt(d,10)-f:g;a.rowIndx=d;a.rowIndxPage=g;a.rowData=a.rowData||this.getRowData(a)}if(null!=b||null!=e)d=this.colModel,e=null==e?d[b]?d[b].dataIndx:void 0:e,b=null==b?this.colIndxs[e]:b,a.column=d[b],a.colIndx=b,a.dataIndx=e;return a};c.addClass=function(e){var a=this.normalize(e),b=a.rowIndxPage,d=a.dataIndx,g=pq.arrayUnique;e=a.cls;var f=a.refresh,c=a.rowData;if(c)if(!1!==f&&null==b&&(b=this.getRowIndx({rowData:c}).rowIndxPage),null==d){var d=c.pq_rowcls,m;m=g((d?d+" "+e:e).split(/\s+/)).join(" ");
c.pq_rowcls=m;!1!==f&&null!=b&&(b=this.getRow({rowIndxPage:b}))&&b.addClass(e)}else{a=[];"function"!=typeof d.push?a.push(d):a=d;var k=c.pq_cellcls;k||(k=c.pq_cellcls={});for(var c=0,l=a.length;c<l;c++)d=a[c],m=(m=k[d])?m+" "+e:e,m=g(m.split(/\s+/)).join(" "),k[d]=m,!1!==f&&null!=b&&(d=this.getCell({rowIndxPage:b,dataIndx:d}))&&d.addClass(e)}};c.removeClass=function(e){var a=this.normalize(e),b=a.rowIndx,d=a.rowData,g=a.dataIndx;e=a.cls;a=a.refresh;if(d){var f=d.pq_cellcls,c=d.pq_rowcls;!1!==a&&null==
b&&(b=this.getRowIndx({rowData:d}).rowIndx);if(null==g)c&&(d.pq_rowcls=this._removeClass(c,e),null!=b&&!1!==a&&(b=this.getRow({rowIndx:b}))&&b.removeClass(e));else if(f){c=[];"function"!=typeof g.push?c.push(g):c=g;for(var m=0,k=c.length;m<k;m++){var g=c[m],l=f[g];l&&(d.pq_cellcls[g]=this._removeClass(l,e),null!=b&&!1!==a&&(g=this.getCell({rowIndx:b,dataIndx:g}))&&g.removeClass(e))}}}};c.hasClass=function(e){var a=e.dataIndx,b=e.cls;e=this.getRowData(e);b=new RegExp("\\b"+b+"\\b");return e?null==
a?(a=e.pq_rowcls)&&b.test(a)?!0:!1:(e=e.pq_cellcls)&&e[a]&&b.test(e[a])?!0:!1:null};c._removeClass=function(e,a){if(e&&a){for(var b=e.split(/\s+/),d=a.split(/\s+/),g=[],f=0,c=b.length;f<c;f++){for(var m=b[f],k=!1,l=0,s=d.length;l<s;l++)if(m===d[l]){k=!0;break}k||g.push(m)}return 1<g.length?g.join(" "):1===g.length?g[0]:null}};c.getRowIndx=function(e){var a=e.$tr,b=e.rowData,d=this.rowIndxOffset;if(b){var g=this.options.dataModel,a=this.get_p_data(),f=!1;e=e.dataUF?g.dataUF:null;g=!1;if(a)for(var c=
0,m=a.length;c<m;c++)if(a[c]==b){g=!0;break}if(!g&&e)for(f=!0,c=0,m=e.length;c<m;c++)if(e[c]==b){g=!0;break}return g?{rowIndxPage:f?void 0:c-d,uf:f,rowIndx:c,rowData:b}:{}}if(null==a||0==a.length)return{};b=a.attr("pq-row-indx");if(null==b)return{};b=parseInt(b);return{rowIndxPage:b,rowIndx:b+d}};c.search=function(e){var a=this.options,b=e.row;e=e.first;for(var d=[],g=this.rowIndxOffset,f="remote"==a.pageModel.type,a=a.dataModel.data,c=0,m=a.length;c<m;c++){var k=a[c],l=!0,s;for(s in b)b[s]!==k[s]&&
(l=!1);if(l&&(k=this.normalize({rowIndx:f?c+g:c}),d.push(k),e))break}return d};var g=function(e){this.options=e.options;this.that=e},d=g.prototype;d._incrRowIndx=function(e,a){var b=this.that,d=e;a=1;for(var b=b.pdata,g=0,f=e+1,c=b.length;f<c&&(b[f].pq_hidden||(g++,d=f,g!=a));f++);return d};d._decrRowIndx=function(a,b){var d=a,g=this.that.pdata;b=1;for(var f=0,c=a-1;0<=c&&(g[c].pq_hidden||(f++,d=c,f!=b));c--);return d};d._decrRowIndx2=function(a,b){var d=this.that,g=a+d.rowIndxOffset,f=d.iMerge,d=
d.pdata;if(f.ismergedCell(g,b)){var c=f.getRootCell(g,b,"a"),g=f.getData(g,b,"proxy_cell");b=c.colIndx;b=g?g.colIndx:b}for(g=a-1;0<=g;g--)if(!d[g].pq_hidden){a=g;break}return{rowIndxPage:a,colIndx:b}};d._incrRowIndx2=function(a,b){var d=this.that,g=a+d.rowIndxOffset,f=d.iMerge,c,d=d.pdata;if(c=f.ismergedCell(g,b)){var m=f.getRootCell(g,b,"a"),g=f.getData(g,b,"proxy_cell");b=m.colIndx;a=c.rowspan?a+c.rowspan-1:0;b=g?g.colIndx:b}g=a+1;for(f=d.length;g<f;g++)if(!d[g].pq_hidden){a=g;break}return{rowIndxPage:a,
colIndx:b}};c.addColumn=function(a){for(var b=a.colList||[{colIndx:a.colIndx,column:a.column}],d=!1!==a.history,g=this.options.colModel,f=0;f<b.length;f++){var c=b[f].colIndx,m=b[f].column;void 0==m.dataIndx&&(m.dataIndx=Math.random());null==c&&(c=b.colIndx=g.length);g.splice(c,0,m)}this.iColModel.init();d&&(this.iHistory.increment(),b.type="add",this.iHistory.push({colList:b}));this._trigger("addColumn",null,{colList:b});!1!==a.refresh&&this.refreshView()};c.deleteColumn=function(a){for(var b=a.colList||
[{colIndx:a.colIndx}],d=!1!==a.history,g=this.options.colModel,f=b.length-1;0<=f;f--){var c=b[f],m=g.splice(c.colIndx,1)[0];c.column=m}this.iColModel.init();d&&(this.iHistory.increment(),b.type="delete",this.iHistory.push({colList:b}));this._trigger("deleteColumn",null,{colList:b});!1!==a.refresh&&this.refreshView()};d._incrIndx=function(a,b,d){var g=this.that,f=g.iMerge,c,m,k,l,t=g.pdata,s=g.rowIndxOffset,n=g[d?"getLastVisibleRIP":"getFirstVisibleRIP"](),w=g.colModel,y=w.length;if(null==b){if(a==
n)return null;a=this[d?"_incrRowIndx":"_decrRowIndx"](a);return{rowIndxPage:a}}do{m=a+s;if(g=f.ismergedCell(m,b))!l&&(c=f.getData(m,b,"proxy_cell"))&&(k=c.rowIndx-s,t[k].pq_hidden||(a=k)),t[a].pq_hidden&&(a=f.getRootCell(m,b).rowIndxPage),!l&&d&&(b+=g&&g.colspan?g.colspan-1:0);b=d?b+1:b-1;if(d&&b>=y||!d&&0>b){if(a==n)return null;a=this[d?"_incrRowIndx":"_decrRowIndx"](a);b=d?0:y-1}l=w[b]}while(l&&l.hidden);return{rowIndxPage:a,colIndx:b}};d._incrEditIndx=function(a,b,d){var g=this.that,f=g.colModel,
c=f.length,m=g.iMerge,k,l=g.rowIndxOffset,t=g[d?"getLastVisibleRIP":"getFirstVisibleRIP"]();do{var s=a+l;if(k=m.ismergedCell(s,b)){if(s=m.getData(s,b,"proxy_edit_cell"))s=s.rowIndx,a=s-l;b=d?b+k.colspan:b-1}else b=d?b+1:b-1;if(d&&b>=c||!d&&0>b){if(a==t)return null;do if(a=this[d?"_incrRowIndx":"_decrRowIndx"](a),b=g.isEditableRow({rowIndxPage:a}),a==t&&!1==b)return null;while(!1==b);b=d?0:c-1}s=a+l;if(k=m.ismergedCell(s,b))a=m.getRootCell(s,b,"o"),m.setData(a.rowIndx,a.colIndx,{proxy_edit_cell:{rowIndx:s,
colIndx:b}}),s=a.rowIndx,b=a.colIndx;k=f[b];var n=g.isEditableCell({rowIndx:s,colIndx:b,checkVisible:!0}),w=k.editor,w="function"==typeof w?w.call(g,g.normalize({rowIndx:s,colIndx:b})):w;a=s-l}while(k&&(k.hidden||!1==n||!1===w));return{rowIndxPage:a,colIndx:b}};d.getMergeCell=function(a,b){var d=this.that,g=d.options,f=d.iMerge,c,m;f.ismergedCell(a,b)&&(m=f.getRootCell(a,b,"o"),f.setData(m.rowIndx,m.colIndx,{proxy_cell:{rowIndx:a,colIndx:b}}),g.virtualY&&(c=f.getRootCell(a,b,"a")));c||(a=this.getVisibleRowIndx(a),
b=this.getVisibleColIndx(b),c=d.normalize({rowIndx:a,colIndx:b}));return c};d.getVisibleRowIndx=function(a){for(var b=this.that,d=b.pdata.length,g=a-b.rowIndxOffset,f=b.getRowData({rowIndx:a});f.pq_hidden&&g<d-1;)g++,a++,f=b.getRowData({rowIndx:a});return a};d.getVisibleColIndx=function(a){for(var b=this.that.colModel,d=b.length,g=b[a];g.hidden&&a<d-1;)a++,g=b[a];return a};c._onKeyPressDown=function(a){if(0<l(a.target).closest(".pq-grid-header").length)return!1==this._trigger("headerKeyDown",a,null)?
!1:!0;if(!1===this.iKeyNav._bodyKeyPressDown(a)||!1==this._trigger("keyDown",a,null))return!1};d._saveAndMove=function(a,b){if(null==a)return b.preventDefault(),!1;var d=this.that,g=a.rowIndxPage,f=a.colIndx;d._blurEditMode=!0;if(!1===d.saveEditCell({evt:b})||!d.pdata)return d.pdata||d.quitEditMode(b),d._deleteBlurEditMode({timer:!0,msg:"_saveAndMove saveEditCell"}),b.preventDefault(),!1;d.quitEditMode(b);if(a.incr)var c=this[a.edit?"_incrEditIndx":"_incrIndx"](g,f,!b.shiftKey),g=c?c.rowIndxPage:
g,f=c?c.colIndx:f;d.scrollRow({rowIndxPage:g});d.scrollColumn({colIndx:f});this.select({rowIndx:g+d.rowIndxOffset,colIndx:f,evt:b});a.edit&&d._editCell({rowIndxPage:g,colIndx:f});d._deleteBlurEditMode({timer:!0,msg:"_saveAndMove"});b.preventDefault();return!1};d._keyPressInEdit=function(a,b){var d=this.that,g=d.options.editModel.indices;b=b?b:{};var f=b.FK,c="Backspace Left Right Up Down Del Home End".split(" "),m=g.column.dataType;return a.key&&-1!==l.inArray(a.key,c)?!0:!1===d._trigger("editorKeyPress",
a,l.extend({},g))||f&&("float"==m||"integer"==m)&&(d="float"==m?"0123456789.-":"0123456789-",g=(g=a.charCode)?g:a.keyCode,(g=String.fromCharCode(g))&&-1==d.indexOf(g))?!1:!0};d.getValText=function(a){a=a[0].nodeName.toLowerCase();var b="text";-1!=l.inArray(a,["input","textarea","select"])&&(b="val");return b};d._keyUpInEdit=function(a,b){var d=this.that,g=d.options;b=b?b:{};var f=b.FK,g=g.editModel,c=g.indices;d._trigger("editorKeyUp",a,l.extend({},c));d=c.column.dataType;if(f&&("float"==d||"integer"==
d)){var f=l(a.target),c="integer"==d?g.reInt:g.reFloat,g=this.getValText(f),m=f.data("oldVal"),k=f[g]();if(!1==c.test(k))if(c.test(m))f[g](m);else if(d="float"==d?parseFloat(m):parseInt(m),isNaN(d))f[g](0);else f[g](d)}};d._keyDownInEdit=function(a){var b=this.that,d=b.options,g=d.editModel.indices;if(g){var f=l(a.target),c=l.ui.keyCode,m=d.editModel,k=l.extend({},g),g=k.rowIndxPage,d=k.colIndx,q=k.column.editModel,m=q?l.extend({},m,q):m,q=this.getValText(f);f.data("oldVal",f[q]());if(!1==b._trigger("editorKeyDown",
a,k))return!1;if(a.keyCode==c.TAB||a.keyCode==m.saveKey)return b=a.keyCode==c.TAB?m.onTab:m.onSave,k={rowIndxPage:g,colIndx:d,incr:b?!0:!1,edit:"nextEdit"==b},this._saveAndMove(k,a);if(a.keyCode==c.ESCAPE)return b.quitEditMode({evt:a}),b.focus({rowIndxPage:g,colIndx:d}),a.preventDefault(),!1;if(a.keyCode==c.PAGE_UP||a.keyCode==c.PAGE_DOWN)return a.preventDefault(),!1;if(m.keyUpDown&&!a.altKey){if(a.keyCode==c.DOWN)return k=this._incrRowIndx2(g,d),this._saveAndMove(k,a);if(a.keyCode==c.UP)return k=
this._decrRowIndx2(g,d),this._saveAndMove(k,a)}}};d.select=function(a){var b=this.that,d=this,g=a.rowIndx,f=a.colIndx,c=a.evt;a=this.getMergeCell(g,f);var g=a.rowIndx,f=a.colIndx,m=a.rowIndxPage;a=b.options;var k=b.iSelection,q=a.selectionModel,t=q.type,s="row"==t,n="cell"==t;(a.realFocus?function(a){clearTimeout(d.timeoutID);d.timeoutID=setTimeout(function(){a()},0)}:function(a){a()})(function(){b.scrollCell({rowIndx:g,colIndx:f});var a=k.address();if(c.shiftKey&&c.keyCode!==l.ui.keyCode.TAB&&q.type&&
"single"!=q.mode&&a.length){var e=a[a.length-1],d=e.firstR,u=e.firstC,t=e.type,E=!1;"column"==t?(e.c1=u,e.c2=f,e.r1=e.r2=e.type=void 0):"row"==t?(e.r1=d,e.r2=g,e.c1=e.c2=e.type=void 0):(a={r1:d,r2:g,c1:u,c2:f,firstR:d,firstC:u},E=!0);b.range(a,E).select()}else s?b.range({r1:g,firstR:g},!1).select():n&&b.range({r1:g,c1:f,firstR:g,firstC:f}).select();b.focus({rowIndxPage:m,colIndx:f})})};d._bodyKeyPressDown=function(a){var b=this.that,d=b.rowIndxOffset,g,f,c;c=this.options;var m=b.iMerge,k=b._focusElement,
q=c.selectionModel,t=c.editModel,s=a.ctrlKey||a.metaKey,n=l.ui.keyCode,w=a.keyCode;if(t.indices)b.$div_focus.find(".pq-cell-focus").focus();else{if(k){if(c=document.activeElement,"pq-grid-cont"!=c.className&&"TD"!=c.nodeName.toUpperCase()&&"pq-grid-excel"!=c.id)return}else{k=l(a.target);if(!k.hasClass("pq-grid-cell"))return;k=b.getCellIndices({$td:k})}var y=b.normalize(k);f=y.rowIndxPage;g=y.rowIndx;c=y.colIndx;var C=b.pdata,A=y,k=!0;if(null!=g&&null!=c&&null!=y.rowData){m.ismergedCell(g,c)&&(y=A=
m.getRootCell(g,c,"o"),f=y.rowIndxPage,g=y.rowIndx,c=y.colIndx,w==n.PAGE_UP||w==n.PAGE_DOWN||w==n.SPACE||w==n.HOME||w==n.END)&&(m=m.getData(g,c,"proxy_cell"))&&(m=m.rowIndx-d,C[m].pq_hidden||(f=m,g=f+d));if(!1==b._trigger("cellKeyDown",a,A))return!1;if(w==n.LEFT||w==n.RIGHT||w==n.UP||w==n.DOWN||q.onTab&&w==n.TAB)b=null,w==n.LEFT||w==n.TAB&&a.shiftKey?b=this._incrIndx(f,c,!1):w==n.RIGHT||w==n.TAB&&!a.shiftKey?b=this._incrIndx(f,c,!0):w==n.UP?b=this._decrRowIndx2(f,c):w==n.DOWN&&(b=this._incrRowIndx2(f,
c)),b&&(g=b.rowIndxPage+d,this.select({rowIndx:g,colIndx:b.colIndx,evt:a}));else if(w==n.PAGE_DOWN||w==n.SPACE||w==n.PAGE_UP){if(b=this[w==n.PAGE_UP?"pageUp":"pageDown"](f))f=b.rowIndxPage,null!=f&&this.select({rowIndx:f+d,colIndx:c,evt:a})}else w==n.HOME?(s?g=b.getFirstVisibleRIP()+d:c=b.getFirstVisibleCI(),this.select({rowIndx:g,colIndx:c,evt:a})):w==n.END?(s?g=b.getLastVisibleRIP()+d:c=b.getLastVisibleCI(),this.select({rowIndx:g,colIndx:c,evt:a})):w==n.ENTER?(f=A.rowIndxPage,c=A.colIndx,(q=b.getCell({rowIndxPage:f,
colIndx:c}))&&0<q.length&&(g=f+d,d=b.isEditableRow({rowIndx:g}),n=b.isEditableCell({rowIndx:g,colIndx:c}),d&&n?b.editCell({rowIndxPage:f,colIndx:c}):(b=q.find("button"),b.length&&l(b[0]).click()))):s&&"65"==w?(b=b.iSelection,"row"==q.type&&"single"!=q.mode?b.selectAll({type:"row",all:q.all}):"cell"==q.type&&"single"!=q.mode&&b.selectAll({type:"cell",all:q.all})):t.pressToEdit&&(32<=w&&127>=w||189==w)&&!s?46==w?b.clear():(f=A.rowIndxPage,c=A.colIndx,(q=b.getCell({rowIndxPage:f,colIndx:c}))&&0<q.length&&
(g=f+d,d=b.isEditableRow({rowIndx:g}),n=b.isEditableCell({rowIndx:g,colIndx:c}),d&&n&&b.editCell({rowIndxPage:f,colIndx:c,select:!0})),k=!1):k=!1;k&&a.preventDefault()}}};d.incrPageSize=function(){for(var a=this.that,b=a.$tbl,d=b.children("tbody").children(".pq-grid-row"),b=parseInt(b.css("marginTop")),b=a.iRefresh.getEContHt()-b,g=d.length-1;0<=g;g--){var f=d[g];if(f.offsetTop<b)break}return{rowIndxPage:a.getRowIndx({$tr:l(f)}).rowIndxPage}};d.pageNonVirtual=function(a,b){var d=this.that,g=d.$cont[0].offsetHeight-
d._getSBHeight(),f=d.getRow({rowIndxPage:a}),c=0,m=0,k=l(f[0])[b]("tr.pq-grid-row"),q=k.length;if(0<q){do{f=k[m];c+=f.offsetHeight;if(c>=g)break;m++}while(m<q);m=0<m?m-1:m;do if(f=l(k[m]),a=d.getRowIndx({$tr:f}).rowIndxPage,null!=a)break;else m--;while(0<=m)}return a};d.pageDown=function(a){var b=this.that,d=b.options,g=b.vscroll,f=g.option("cur_pos"),c=g.option("num_eles"),m=g.option("ratio");if(d.virtualY){if(f<c-1){a=this.incrPageSize().rowIndxPage;var k=b._calcCurPosFromRowIndxPage(a);if(null==
k)return;g.option("cur_pos",k);g.scroll()}}else null!=a?a=this.pageNonVirtual(a,"nextAll"):1>m&&(d=b.iRefresh.getEContHt(),b=b.iMouseSelection,b.updateTableY(-1*d),b.syncScrollBarVert());return{rowIndxPage:a,curPos:k}};d.pageUp=function(a){var b=this.that,d=b.vscroll;if(b.options.virtualY){if(0<d.option("cur_pos")){a=this.decrPageSize().rowIndxPage;var g=b._calcCurPosFromRowIndxPage(a);if(null==g)return;d.option("cur_pos",g);d.scroll()}}else d=d.option("ratio"),null!=a?a=this.pageNonVirtual(a,"prevAll"):
0<d&&(d=b.iRefresh.getEContHt(),b=b.iMouseSelection,b.updateTableY(d),b.syncScrollBarVert());return{rowIndxPage:a,curPos:g}};d.decrPageSize=function(){var a=this.that,b=a.$tbl.children("tbody").children(".pq-grid-row"),d=a.options.freezeRows,g=a.pdata,f,c=0;if(b.length){var m;d?(m=b.filter("tr.pq-last-frozen-row"),m.length&&(m=m.next())):2<=b.length&&(m=l(b[1]));if(m&&m.length)for(f=c=a.getRowIndx({$tr:m}).rowIndxPage,b=0,a=a.pageSize-3;0<=c&&(g[c].pq_hidden||(b++,f=c,!(b>=a)));c--);}return{rowIndxPage:f}};
c._calcNumHiddenFrozens=function(){for(var a=0,b=this.options.freezeCols,d=0;d<b;d++)this.colModel[d].hidden&&a++;return a};c._calcNumHiddenUnFrozens=function(a){var b=0;a=null!=a?a:this.colModel.length;for(var d=this.options.freezeCols;d<a;d++)this.colModel[d].hidden&&b++;return b};c._getSBHeight=function(){return this.iRefresh.getSBHeight()};c._getSBWidth=function(){return this.iRefresh.getSBWidth()};c.getFirstVisibleRIP=function(a){var b=this.pdata;a=a?this.initV:0;for(var d=b.length;a<d;a++)if(!b[a].pq_hidden)return a};
c.getLastVisibleRIP=function(){for(var a=this.pdata,b=a.length-1;0<=b;b--)if(!a[b].pq_hidden)return b;return null};c.getFirstVisibleCI=function(a){var b=this.colModel,d=b.length;for(a=a?this.initH:0;a<d;a++)if(!b[a].hidden)return a;return null};c.getLastVisibleCI=function(){for(var a=this.colModel,b=a.length-1;0<=b;b--)if(!a[b].hidden)return b;return null};c.getTotalVisibleColumns=function(){for(var a=this.colModel,b=a.length,d=0,g=0;g<b;g++)a[g].hidden||d++;return d};c._calcCurPosFromRowIndxPage=
function(a){var b=this.pdata,d=this.options.freezeRows;if(a<d)return 0;for(var g=0,f=d,c=b.length;d<c;d++){var m=b[d];if(f==a)break;f++;m.pq_hidden||g++}return g>=c?null:g};c._calcCurPosFromColIndx=function(a){var b=this.colModel,d=this.options.freezeCols;if(a<d)return 0;for(var g=0,f=d,c=b.length;d<c;d++){var m=b[d];if(f==a)break;f++;m.hidden||g++}return g>=c?null:g};c.calcWidthCols=function(a,b,d){var g=0,f=this.options.numberCell,c=this.colModel;-1==a&&(f.show&&(g=d?g+1*f.width:g+f.outerWidth),
a=0);if(d)for(;a<b;a++){if((d=c[a])&&!d.hidden){if(!d._width)throw"assert failed";g+=d._width+0}}else for(;a<b;a++)(d=c[a])&&!d.hidden&&(g+=d.outerWidth);return g};c.calcHeightFrozenRows=function(){var a=this.$tbl,b=0;a&&a.length&&(a=l(a[0]).find("tr.pq-last-frozen-row"))&&a.length&&(b=a[0],b=b.offsetTop+b.offsetHeight);return b};c._calcRightEdgeCol=function(a){var b=0,d=0,g=this.colModel,f=this.initH,c=this.options,m=c.freezeCols,c=c.numberCell;c.show&&(b+=c.outerWidth,d++);for(c=0;c<=a;c++){c<f&&
c>=m&&(c=f);var k=g[c];k.hidden||(b+=k.outerWidth,d++)}return{width:b,cols:d}};c._createHeader=function(){this.iHeader.createHeader();this.options.showHeader&&this._trigger("createHeader")};c.createTable=function(a){a.other=!0;var b=this.iGenerateView;b.generateView(a);b.scrollView()}})(jQuery);
(function(l){function n(a){this.that=a}function k(a,b,g){for(var e=0;b<g;b++)!0!==a[b].hidden&&e++;return e}function c(a){if(a.length)var b=a.css({tableLayout:"auto",width:""}).addClass("pq-no-wrap").removeClass("pq-wrap").children("tbody").children(".pq-row-hidden").children("td").css("width","");return b||l()}function a(a,b,g){for(var e,h;g;){e=a[g][b];h=a[g-1][b];if(e!=h)break;g--}return g}var f=l.paramquery,b=f._pqGrid.prototype;b.getHeadCell=function(a){var b=a.attr("pq-col-indx");a=a.attr("pq-row-indx");
var g,e,h,f;null!=b&&null!=a&&(b*=1,a*=1,e=this.headerCells[a][b])&&(f=e.colModel,h=e.leftPos);f&&f.length&&(g=!0);return{col:e,ci:b,o_ci:h,ri:a,isParent:g}};b.flex=function(a){this.iResizeColumns.flex(a)};f.cHeader=n;b=n.prototype;b.createHeader=function(){var a=this.that,b=this,g=a.options,e=g.bootstrap,h=(e.on?e.thead:"")+" pq-grid-header-table ",f=g.ui,c=e.on?"":f.header,k=g.hwrap,e=a.pqpanes,r=parseInt(g.freezeCols),p=g.numberCell,f=a.colModel,v=g.sortModel,q=a.depth,n=g.virtualX,s=a.iGenerateView.colDef,
x=a.initH,w=a.finalH,y=a.headerCells,C=a.$header_o;C.empty();if(null!=w)if(!1===g.showHeader)C.css("display","none");else{C.css("display","");g=["<table class='"+(k?h+"pq-wrap ":h+"pq-no-wrap ")+"' >"];if(1<=q){g.push("<tr class='pq-row-hidden'>");p.show&&g.push("<td style='width:"+p.width+"px;' ></td>");for(var k=0,A=s.length;k<A;k++){var D=s[k],h=D.colIndx;g.push("<td style='width:"+D.column.outerWidth+"px;' pq-col-indx="+h+"></td>")}g.push("</tr>")}for(s=0;s<q;s++){g.push("<tr class='pq-grid-title-row'>");
0==s&&p.show&&g.push(["<th pq-col-indx='-1' class='pq-grid-number-col' rowspan='",q,"'><div class='pq-td-div'>",p.title?p.title:"&nbsp;","</div></th>"].join(""));for(h=0;h<=w;h++){if(h<x&&h>=r&&n&&(h=x,h>w))throw"initH>finalH";b.createHeaderCell(s,h,y,g,"pq-grid-col ",r,x,q,v)}g.push("</tr>")}a.ovCreateHeader(g,"pq-grid-col ");g.push("</table>");r=g.join("");C[0].innerHTML=e.vH?["<span class='pq-grid-header pq-grid-header-left ",c,"'><div class='pq-grid-header-inner'>",r,"</div></span><span class='pq-grid-header ",
c,"'><div class='pq-grid-header-inner'>",r,"</div></span>"].join(""):["<span class='pq-grid-header ",c,"'><div class='pq-grid-header-inner'>",r,"</div></span>"].join("");c=a.$header=C.children(".pq-grid-header");C=c.children(".pq-grid-header-inner");a.$tbl_header=C.children("table");a.$header_left=l(c[0]);a.$header_left_inner=l(C[0]);e.vH&&(a.$header_right=l(c[1]),a.$header_right_inner=l(C[1]));c.click(function(a){return b._onHeaderClick(a)});b._refreshResizeColumn(x,w,f);a._trigger("refreshHeader",
null,null)}};b._onHeaderClick=function(a){var b=this.that,g;g=b.iDragColumns;if(!g||"stop"==g.status){g=l(a.target);if(g.is("input,label"))return!0;g=g.closest(".pq-grid-col");if(g.length&&(g=b.getHeadCell(g),(b=g.col)&&!g.isParent))return this._onHeaderCellClick(b,g.ci,a)}};b.createHeaderCell=function(a,b,g,e,h,c,B,l,r){var p=this.that,v=p.options.sheet,q=g[a][b],n=p.colModel,s=q.colSpan;if(!(q.hidden||0===s||0<a&&q==g[a-1][b])){if(0<b&&q==g[a][b-1]){if(b>B)return;a:{g=g[a];for(var x=0;x<g.length;x++)if(g[x]==
q){g=x;break a}g=void 0}if(g<c)return;s-=k(n,g,b)}else c&&b<c&&b+s>c&&(s-=k(n,c,B),n=k(n,b,c),s=Math.max(s,n));n=q.halign||q.align;g=q.cls;h=[h];var x=q.title,w=q.type,x="function"==typeof x?x.call(p,{column:q,colIndx:b,dataIndx:q.dataIndx}):x,x=v?f.toLetter(b):x,x=null!=x?x:"checkbox"==w&&q.cb.header?"<input type='checkbox'/>":q.dataIndx;q.pqtitle=x;n&&h.push("pq-align-"+n);b==c-1&&1==l&&h.push("pq-last-frozen-col");b<=c-1?h.push("pq-left-col"):b>=B&&h.push("pq-right-col");g&&h.push(g);null!=q.colModel&&
0!=q.colModel.length||h.push("pq-grid-col-leaf");c=r.space?"pq-space":"";e.push(["<th  ","pq-col-indx="+b," ","pq-row-indx="+a,"  class='",h.join(" "),"' rowspan=",q.rowSpan," colspan=",s,"><div class='pq-td-div'>",x,"<span class='pq-col-sort-icon ",c,"'></span>",r.number?"<span class='pq-col-sort-count "+c+"'></span>":"","</div></th>"].join(""))}};b._onHeaderCellClick=function(a,b,g){var e=this.that,h=e.options,f=h.sortModel,c=a.dataIndx;!1!==e._trigger("headerCellClick",g,{column:a,colIndx:b,dataIndx:c})&&
(h.selectionModel.column&&-1==g.target.className.indexOf("pq-td-div")?(h={c1:b,firstC:b},a=e.iSelection.address(),g.shiftKey&&((g=a.length)&&"column"==a[g-1].type&&(g=a[g-1],g.c1=g.firstC,g.c2=b,g.r1=g.r2=g.type=void 0),h=a),e.range(h,!1).select(),e.focus({rowIndxPage:e.getFirstVisibleRIP(!0),colIndx:b})):f.on&&!1!=a.sortable&&(f.multiKey&&(f.single=!g[f.multiKey]),e.sort({sorter:[{dataIndx:c}],addon:!0,evt:g})))};b._refreshResizeColumn=function(a,b,g){a=this.that;g=a.options;b=g.filterModel.ficon?
!0:!1;var e=g.numberCell;g=parseInt(g.freezeCols);var h=[],f=[],c=a.pqpanes.vH,k=0,l=0;e.show&&(k=e.outerWidth,e.resizable&&h.push("<div pq-col-indx='-1' style='left:",k-5,"px;'"," class='pq-grid-col-resize-handle'>&nbsp;</div>"));for(var e=a.iGenerateView.colDef,p=0,v=e.length;p<v;p++){var l=e[p],q=l.colIndx,l=l.column,n=l.ficon,s=n||null==n&&b,n=h,k=k+l.outerWidth;if(!1!==l.resizable||s)c&&q>=g&&(n=f),l=k-5,n.push("<div pq-col-indx='",q,"' style='left:",l,"px;'"," class='pq-grid-col-resize-handle'>&nbsp;</div>")}f.length&&
a.$header_right_inner.append(f.join(""));a.$header_left_inner.append(h.join(""))};b.refreshHeaderSortIcons=function(){var a=this.that,b=a.options,g=b.bootstrap,b=b.ui,e=a.$header;if(e){var h=a.iSort.getSorter(),f=h.length,c=!1;a.options.sortModel.number&&1<f&&(c=!0);for(var k=0;k<f;k++){var l=h[k],p=a.getColIndx({dataIndx:l.dataIndx}),v=l.dir,l=g.on?g.header_active:b.header_active+" pq-col-sort-"+("up"==v?"asc":"desc"),v=g.on?" glyphicon glyphicon-arrow-"+v:"ui-icon ui-icon-triangle-1-"+("up"==v?
"n":"s"),p=e.find(".pq-grid-col-leaf[pq-col-indx="+p+"]");p.addClass(l);p.find(".pq-col-sort-icon").addClass(v);c&&p.find(".pq-col-sort-count").html(k+1)}}};b=function(a){this.that=a;var b=this;a.$header_o.on({mousedown:function(a){if(!a.pq_composed){var d=l(a.target);b.setDraggables(a);a.pq_composed=!0;a=l.Event("mousedown",a);d.trigger(a)}},dblclick:function(a){b.doubleClick(a)}},".pq-grid-col-resize-handle");var g=a.options.flex;if(g.on&&g.one)a.one("ready",function(){b.flex()})};f.cResizeColumns=
b;b=b.prototype=new f.cClass;b.doubleClick=function(a){var b=this.that.options,g=b.flex;a=l(a.target);a=parseInt(a.attr("pq-col-indx"));isNaN(a)||g.on&&this.flex(g.all&&!b.scrollModel.autoFit?{}:{colIndx:[a]})};b.flex=function(a){a=a||{};var b=this.that,g=b.element,e=b.options.numberCell,h=a.colIndx,f,k=a.dataIndx;a=null==a.refresh?!0:a.refresh;var z=!1,r=b.$tbl,p=b.$tbl_header,v=r&&r.length?l(r[0]).clone():l(),q=b.tables&&b.tables.length?b.tables[0].$tbl:null,q=q?l(q[0]).clone():l(),n=p&&p.length?
l(p[0]).clone():l();v.find(".pq-merge-cell").each(function(a,b){b.innerHTML=l(b).find(".pq-merge-inner")[0].innerHTML;b.style.whiteSpace="noWrap"});if(null!=k)for(h=[],p=0,r=k.length;p<r;p++){var s=b.colIndxs[k[p]];null!=s&&h.push(s)}null!=h&&(h.sort(function(a,b){return a-b}),f=h.length);n.find("tr.pq-grid-header-search-row").remove();var k=c(v),s=c(q),x=c(n),v=l("<div class='pq-grid' style='width:1px;height:1px;position:absolute;left:0px;top:0px;'>").append(n).append(q).append(v);v.addClass(g.attr("class"));
g.parent().append(v);g=e.show?0:-1;e=b.iGenerateView.colDef;p=0;for(r=e.length;p<r;p++){q=e[p];n=q.colIndx;q=q.column;g++;if(h)if(h.length)if(h[0]===n)h.splice(0,1);else continue;else break;var n=k[g],w=x[g],y=s[g],n=Math.max(n?n.offsetWidth:0,y?y.offsetWidth:0,w?w.offsetWidth:0)-0+1;q._width!==n&&(z=!0,q.width=n,1===f&&(q._resized=!0))}v.remove();z&&a&&b.refresh({source:"flex"})};b.setDraggables=function(a){var b=this,g,e,h;l(a.target).draggable({axis:"x",helper:function(a,e){var d=l(a.target),g=
parseInt(d.attr("pq-col-indx"));b._setDragLimits(g);b._getDragHelper(a,e);return d},start:function(a,e){g=e.position.left;h=parseInt(b.$cl[0].style.left)},drag:function(a,d){e=d.position.left;b.$cl[0].style.left=h+(e-g)+"px"},stop:function(a,e){return b.resizeStop(a,e,g)}})};b._getDragHelper=function(a){var b=this.that,g=parseInt(b.options.freezeCols);a=l(a.target);var e=b.$grid_center;a=parseInt(a.attr("pq-col-indx"));var h=e.outerHeight();this.$cl=l("<div class='pq-grid-drag-bar'></div>").appendTo(e);
this.$clleft=l("<div class='pq-grid-drag-bar'></div>").appendTo(e);this.$cl.height(h);this.$clleft.height(h);e=l("[pq-col-indx="+a+"]",b.$header)[0];h=e.offsetLeft;b.pqpanes.vH?a>=g&&(h-=b.$header[1].scrollLeft):(h+=b.$header[0].offsetLeft,h-=b.$header[0].scrollLeft);this.$clleft.css({left:h});h+=e.offsetWidth;this.$cl.css({left:h})};b._setDragLimits=function(a){if(!(0>a)){var b=this.that,g=b.colModel[a],e=b.$header_left;a>=b.options.freezeCols&&b.pqpanes.vH&&(e=b.$header_right);b=e.find("th[pq-col-indx='"+
a+"']").offset().left+g._minWidth;g=b+g._maxWidth-g._minWidth;e.find("div.pq-grid-col-resize-handle[pq-col-indx="+a+"]").draggable("option","containment",[b,0,g,0])}};b.resizeStop=function(a,b,g){var e=this.that,h=e.colModel,f=e.options.numberCell;this.$clleft.remove();this.$cl.remove();g=b.position.left-g;b=l(b.helper);b=parseInt(b.attr("pq-col-indx"));if(-1==b){var h=null,c=parseInt(f.width);f.width=c+g}else h=h[b],c=parseInt(h.width),h.width=c+g,h._resized=!0;e.refresh();e._trigger("columnResize",
a,{colIndx:b,column:h,dataIndx:h?h.dataIndx:null,oldWidth:c,newWidth:h?h.width:f.width})};b=function(a){this.that=a;this.$drag_helper=null;var b=a.options.dragColumns,g=b.topIcon,e=b.bottomIcon;this.status="stop";this.$arrowTop=l("<div class='pq-arrow-down ui-icon "+g+"'></div>").appendTo(a.element);this.$arrowBottom=l("<div class='pq-arrow-up ui-icon "+e+"' ></div>").appendTo(a.element);this.hideArrows();if(b&&b.enabled)a.$header_o.on("mousedown",".pq-grid-col",this.onColMouseDown(this,a))};f.cDragColumns=
b;b=b.prototype;b.onColMouseDown=function(a,b){return function(g){var e,h,f;e=l(this);g.pq_composed||l(g.target).is("input,select,textarea")||(e=b.getHeadCell(e),f=(h=e.col)?h.parent:null,!h||h.nodrag||h._nodrag||f&&1==f.colSpan||!a.setDraggable(g,h,e)||(g.pq_composed=!0,e=l.Event("mousedown",g),l(g.target).trigger(e)))}};b.showFeedback=function(a,b){var g=this.that,e=a[0],h=g.$grid_center[0].offsetTop,f=e.offsetLeft-e.offsetParent.offsetParent.offsetParent.scrollLeft+(b?0:e.offsetWidth)-8,g=h+g.$header[0].offsetHeight;
this.$arrowTop.css({left:f,top:h+e.offsetTop-16,display:""});this.$arrowBottom.css({left:f,top:g,display:""})};b.showArrows=function(){this.$arrowTop.show();this.$arrowBottom.show()};b.hideArrows=function(){this.$arrowTop.hide();this.$arrowBottom.hide()};b.updateDragHelper=function(a){var b=this.that.options.dragColumns,g=b.acceptIcon,b=b.rejectIcon,e=this.$drag_helper;e&&(a?(e.children("span.pq-drag-icon").addClass(g).removeClass(b),e.removeClass("ui-state-error")):(e.children("span.pq-drag-icon").removeClass(g).addClass(b),
e.addClass("ui-state-error")))};b.setDraggable=function(a,b,g){a=l(a.currentTarget);var e=this,h=e.that;if(!a.hasClass("ui-draggable"))return a.draggable({distance:10,cursorAt:{top:-18,left:-10},zIndex:"1000",appendTo:h.element,revert:"invalid",helper:e.dragHelper(e,h,b),start:e.onStart(e,h,b,g),drag:e.onDrag(e,h),stop:function(){e.status="stop";h.$header.find(".pq-grid-col-resize-handle").show();e.hideArrows()}}),!0};b.onStart=function(a,b,g,e){return function(h){if(!1===b._trigger("columnDrag",
h.originalEvent,{column:g}))return!1;a.setDroppables(e)}};b.onDrag=function(a,b){return function(g,e){a.status="drag";var h=l(".pq-drop-hover",b.$header);if(0<h.length){a.showArrows();a.updateDragHelper(!0);var f=h.width();g.clientX-h.offset().left+l(document).scrollLeft()<f/2?(a.leftDrop=!0,a.showFeedback(h,!0)):(a.leftDrop=!1,a.showFeedback(h,!1))}else a.hideArrows(),l(".pq-drop-hover",b.$top).length?a.updateDragHelper(!0):a.updateDragHelper()}};b.dragHelper=function(a,b,g){var e=b.options.dragColumns.rejectIcon;
return function(){a.status="helper";b.$header.find(".pq-grid-col-resize-handle").hide();var h=l("<div class='pq-col-drag-helper ui-widget-content ui-corner-all panel panel-default' ><span class='pq-drag-icon ui-icon "+e+" glyphicon glyphicon-remove'></span>"+g.pqtitle+"</div>");a.$drag_helper=h;return h[0]}};b._columnIndexOf=function(a,b){for(var g=0,e=a.length;g<e;g++)if(a[g]==b)return g;return-1};b.setDroppables=function(a){var b=this.that,g=a.col,e=a.ri;a=a.o_ci;var h=a+g.o_colspan,f,c,k,r,p;c=
b.$header_left;var n,q={hoverClass:"pq-drop-hover ui-state-highlight",accept:".pq-grid-col",tolerance:"pointer",drop:this.onDrop()},t=c.find(".pq-left-col");c=b.pqpanes.v||b.pqpanes.vH?b.$header_right.find(".pq-right-col"):c.find(".pq-right-col");t=t.add(c);for(n=t.length;n--;)r=l(t[n]),p=r.hasClass("ui-droppable"),f=b.getHeadCell(r),k=f.col,c=f.ri,f=f.ci,k==g||k.nodrop||k._nodrop||e<c&&f>=a&&f<h?p&&r.droppable("destroy"):p||r.droppable(q)};b.onDrop=function(){var a=this,b=this.that;return function(g,
e){if(!a.dropPending){var h=1*e.draggable.attr("pq-col-indx"),f=1*e.draggable.attr("pq-row-indx"),c=l(this),k=1*c.attr("pq-col-indx"),c=1*c.attr("pq-row-indx"),r=a.moveColumn(h,k,a.leftDrop,f,c);a.dropPending=!0;window.setTimeout(function(){b.iColModel.init();!1!==b._trigger("columnOrder",null,{dataIndx:r.dataIndx,column:r,oldcolIndx:h,colIndx:b.getColIndx({column:r})})&&b.refresh();a.dropPending=!1},0)}}};b.moveColumn=function(b,f,g,e,h){var c=this.that,k=c.options.colModel,l=c.headerCells,c=c.depth-
1;e=null==e?a(l,b,c):e;h=null==h?a(l,f,c):h;var c=l[h][f],r=e?l[e-1][b].colModel:k;f=h?l[h-1][f].colModel:k;b=this._columnIndexOf(r,l[e][b]);g=g?1:0;b=r.splice(b,1)[0];g=this._columnIndexOf(f,c)+1-g;f.splice(g,0,b);return b}})(jQuery);
(function(l){function n(c,a){this.that=c;var f=this,b=c.options;this.type="detail";this.refreshComplete=!0;this.detachView=!1;c.on("cellClick",function(a,b){return f.toggle(a,b)}).on("cellKeyDown",function(a,b){if(a.keyCode==l.ui.keyCode.ENTER)return f.toggle(a,b)}).on("refresh",function(a,b){return f.aftertable()}).on("beforeTableView",function(a,b){return f.beforeTableView(a,b)}).on("tableWidthChange",function(a,b){return f.tableWidthChange(a,b)});a._render=function(a){var f=b.detailModel,g=a.cellData;
a=a.rowData;if(!a.pq_gsummary&&!a.pq_gtitle)return f=g&&g.show?f.expandIcon:f.collapseIcon,"<div class='ui-icon "+f+"'></div>"}}l.paramquery.cHierarchy=n;var k=n.prototype=new l.paramquery.cClass;k.tableWidthChange=function(){if(this.refreshComplete){this.refreshComplete=!1;for(var c=this.that.$tbl.children("tbody").children("tr.pq-detail-child").children("td.pq-detail-child"),a=0,f=c.length;a<f;a++)for(var b=l(c[a]).find(".pq-grid"),d=0,m=b.length;d<m;d++){var g=l(b[d]);g.is(":visible")&&g.pqGrid("onWindowResize")}this.refreshComplete=
!0}};k.aftertable=function(c){var a=this.that,f=a.options.detailModel.init,b=a.pdata;if(this.refreshComplete){this.refreshComplete=!1;c=c?c:a.$tbl.children("tbody").children("tr.pq-detail-child");for(var d=0,m=c.length;d<m;d++){var g=l(c[d]),e=g.attr("pq-row-indx"),h=b[e],e=!1,k=h.pq_detail.child;k||"function"!=typeof f||(e=!0,k=f.call(a.element[0],{rowData:h}),h.pq_detail.child=k,h.pq_detail.height=25);g=g.children("td.pq-detail-child");g.append(k);g=g.find(".pq-grid");k=0;for(h=g.length;k<h;k++){var B=
l(g[k]);e?B.hasClass("pq-pending-refresh")&&B.is(":visible")&&(B.removeClass("pq-pending-refresh"),B.pqGrid("refresh")):B.is(":visible")&&B.pqGrid("onWindowResize")}}this.refreshComplete=!0;this.detachView=!1}};k.beforeTableView=function(c,a){this.detachView||(this.detachInitView(),this.detachView=!0)};k.detachInitView=function(c){var a=this.that.$tbl;if(a&&a.length)for(c=c?c:a.children("tbody").children("tr.pq-detail-child"),a=0;a<c.length;a++)l(c[a]).children("td.pq-detail-child").children().detach()};
k.toggle=function(c,a){var f=this.that,b=a.column,d=a.rowData,m=a.rowIndx,g=this.type;d.pq_gtitle||d.pq_gsummary||!b||b.type!==g||(b={rowIndx:m,focus:!0},null==d.pq_detail?f.rowExpand(b):!1===d.pq_detail.show?f.rowExpand(b):this.rowCollapse(b))};k.rowExpand=function(c){this.normalize(c);var a=this.that,f=c.rowData,b=c.rowIndx,d=c.rowIndxPage,m=a.options.detailModel;if(null!=f){if(!1===a._trigger("beforeRowExpand",null,c))return!1;null==f.pq_detail?f.pq_detail={show:!0}:!1===f.pq_detail.show&&(f.pq_detail.show=
!0);m.cache||this.rowInvalidate(c);a.refreshRow({rowIndx:b});m=[];a.iGenerateView._generateDetailRow(f,d,m);f=a.getRow({rowIndxPage:d});f.after(m.join(""));this.aftertable(f.next());c.focus&&a.getCell({rowIndx:b,dataIndx:"pq_detail"}).attr("tabindex","0").focus();c.scrollRow&&this.scrollRow({rowIndx:b})}};k.rowInvalidate=function(c){c=this.that.getRowData(c);var a=c.pq_detail;if(a=a?a.child:null)a.remove(),c.pq_detail.child=null,c.pq_detail.height=0};k.normalize=function(c){var a=this.that,f=c.rowIndx,
b=c.rowIndxPage,d=a.rowIndxOffset;c.rowIndx=null==f?b+d:f;c.rowIndxPage=null==b?f-d:b;c.rowData=a.getRowData(c)};k.rowCollapse=function(c){this.normalize(c);var a=this.that,f=a.options,b=c.rowData,d=c.rowIndx,m=c.rowIndxPage,g=f.detailModel;null!=b&&null!=b.pq_detail&&!0===b.pq_detail.show&&(g.cache||this.rowInvalidate(c),b.pq_detail.show=!1,f.virtualY?a.refresh():(f=a.getRow({rowIndxPage:m}).next("tr.pq-detail-child"),f.length&&(this.detachInitView(f),f.remove(),a.refreshRow({rowIndx:d})),c.focus&&
a.getCell({rowIndx:d,dataIndx:"pq_detail"}).attr("tabindex","0").focus()),c.scrollRow&&(d=c.rowIndx,this.scrollRow({rowIndx:d})))}})(jQuery);
(function(l){var n=function(k){var c=this;c.that=k;k.on("dataReadyDone",function(){c.calcVisibleV()}).on("CMInit",function(){c.calcVisibleH()}).on("refresh",function(){c.summaryTable()})};l.paramquery.cRefresh=n;n=n.prototype;n._computeOuterWidths=function(){for(var k=this.that,c=k.options.numberCell,k=k.colModel,a=k.length,f=0;f<a;f++){var b=k[f];b.outerWidth=b._width+0}c.show&&(c.outerWidth=c.width)};n.autoFit=function(){var k=this.that,c=k.colModel,a=c.length,k=k.calcWidthCols(-1,a,!0),f=this.contWd-
this.getSBWidth();if(k!==f){for(var k=k-f,b,f=[],d=0;d<a;d++){var m=c[d],g=m._percent,e=m._resized;m.hidden||g||e||(0>k?(g=m._maxWidth-m._width)&&f.push({availWd:-1*g,colIndx:d}):(g=m._width-m._minWidth)&&f.push({availWd:g,colIndx:d}));e&&(b=m,delete m._resized)}f.sort(function(a,b){return a.availWd>b.availWd?1:a.availWd<b.availWd?-1:0});d=0;for(a=f.length;d<a;d++){var m=f[d],g=m.availWd,m=m.colIndx,e=Math.round(k/(a-d)),m=c[m],h;h=m._width;Math.abs(g)>Math.abs(e)?(h-=e,k-=e):(h-=g,k-=g);m.width=
m._width=h}0!=k&&b&&(h=b._width-k,h>b._maxWidth?h=b._maxWidth:h<b._minWidth&&(h=b._minWidth),b.width=b._width=h)}};n.autoLastColumn=function(){var k=this.that,c=k.colModel,a=c.length,f=k.options.freezeCols,b=this.contWd-this.getSBWidth(),d=k.calcWidthCols(-1,f,!0),b=b-d,d=!1,k=k.getLastVisibleCI();if(null!=k&&(k=c[k],!k._percent)){for(var m=k._width,g,e=k._minWidth,h=k._maxWidth,a=a-1;a>=f;a--){var u=c[a];if(!u.hidden&&(u=u._width+0,b-=u,0>b)){d=!0;g=m+b>=e?m+b:m+u+b;break}}d||(g=m+b);g>h?g=h:g<e&&
(g=e);k.width=k._width=g}};n.numericVal=function(k,c){var a;a=-1<(k+"").indexOf("%")?parseInt(k)*c/100:parseInt(k);return Math.round(a)};n.refreshColumnWidths=function(k){k=k||{};var c=this.that,a=c.options,f=a.numberCell,b="flex"===a.width,d=c.colModel,m=a.scrollModel,g=m.lastColumn,m=m.autoFit,e=this.contWd,h=d.length,u=this.getSBWidth(),l=a._minColWidth,z=a._maxColWidth,r=0;f.show&&(f.width<f.minWidth&&(f.width=f.minWidth),r=f.outerWidth=f.width);f=b?null:e-u-r;l=Math.floor(this.numericVal(l,f));
z=Math.ceil(this.numericVal(z,f));e=0;if(!b&&5>f||isNaN(f)){if(a.debug)throw"availWidth N/A";}else{delete c.percentColumn;for(u=0;u<h;u++)if(r=d[u],!r.hidden){var p=r.width,n=-1<(p+"").indexOf("%")?!0:null,q=r.minWidth,t=r.maxWidth,q=q?this.numericVal(q,f):l,t=t?this.numericVal(t,f):z;t<q&&(t=q);if(void 0!=p){var s=0;!b&&n?(c.percentColumn=!0,r.resizable=!1,r._percent=!0,p=this.numericVal(p,f)-0,s=Math.floor(p),e+=p-s,1<=e&&(s+=1,e-=1)):p&&(s=parseInt(p));s<q?s=q:!b&&s>t&&(s=t);r._width=s}else r._width=
q;n||(r.width=r._width);r._minWidth=q;r._maxWidth=b?1E3:t}!1===b&&!1!==k.refreshWidth&&(m&&this.autoFit(),"auto"===g&&a.virtualX&&this.autoLastColumn());this._computeOuterWidths()}};n.estRowsInViewPort=function(){var k=Math.ceil(this.contHt/this.rowHt);return this.that.pageSize=k};n._refreshFrozenLine=function(){var k=this.that,c=k.options,a=c.numberCell,f=k.$cont_o,b=c.freezeBorders,d=c.freezeCols,c=c.freezeRows;this.$freezeLine&&this.$freezeLine.remove();this.$freezeLineH&&this.$freezeLineH.remove();
b&&(d&&(b=k.calcWidthCols(-1,d),isNaN(b)||0===b||0<b&&a.show&&b===a.width||(this.$freezeLine=l(["<div class='pqg-vert-frozen-line'  style = 'left:",b-1,"px;' ></div>"].join("")).appendTo(f))),c&&(k=k.$tbl))&&(k=k.children("tbody").children(".pq-last-frozen-row")[0])&&(this.$freezeLineH=l("<div class='pqg-horiz-frozen-line' style='top:"+(k.offsetTop+k.offsetHeight-1-1)+"px;' ></div>").appendTo(f))};n.setScrollVNumEles=function(k){var c=this.that;k=c.vscroll;var a=c.options;if(!a.maxHeight&&"flex"===
a.height)return k.option("num_eles",0),0;var a=c.iHierarchy?!0:!1,f=parseInt(k.option("num_eles")),b=parseInt(k.option("cur_pos")),f=this.getEContHt(),d=c.pdata?c.totalVisibleRows:0,m,g=0;c.$tbl&&0<c.$tbl.length&&(m=c.$tbl[c.$tbl.length-1],g=m.scrollHeight,m=l(m));if(0<g){m=m.children().children("tr");b=c=0;for(g=1;g<m.length;g++){var e=m[g],c=c+e.offsetHeight;if(c>=f){a&&l(e).hasClass("pq-detail-child")&&(b=1<b?b-1:1);break}else a?!1===l(e).hasClass("pq-detail-child")&&b++:b++}f=d-b+1}else f=b+1;
f>d&&(f=d);k.option("num_eles",f);return f};n._setScrollVLength=function(k){k=this.that;var c=k.options;if("flex"!==c.height||c.maxHeight){var c=this.getSBHeight(),a=this.contHt-c+this.headerHt-2;k.vscroll.widget().css("bottom",c);k.vscroll.option("length",a)}};n.setHeaderHeight=function(){var k=this.that,c=k.$header,a,f,b;if(c&&c.length){if(1<c.length){if(a=c[0].scrollHeight,f=c[1].scrollHeight,b=Math.max(a,f),a!==f){var d=l(c[0]).find(".pq-grid-header-search-row"),m=l(c[1]).find(".pq-grid-header-search-row");
d.length&&(d.css("height",""),m.css("height",""),a=c[0].scrollHeight,f=c[1].scrollHeight,b=Math.max(a,f),a<b?d.height(m[0].scrollHeight):m.height(d[0].scrollHeight))}}else b=a=c[0].scrollHeight;k.$header_o.height(b-3);this.headerHt=b-1}else k.$header_o.height(0),this.headerHt=0};n.initContHeight=function(){var k=this.that,c=k.options;if("flex"!=c.height||c.maxHeight)this.contHt=this.height-(c.showHeader?this.rowHt:0)-(c.showTop?k.$top[0].offsetHeight:0)-(c.showBottom?k.$bottom[0].offsetHeight:0)};
n.initContWidth=function(){this.contWd=this.width};n.setContHeight=function(k){k=this.that;var c=k.$top,a=this.height-k.$header_o[0].offsetHeight,f;if(k.options.showTop){f=c[0].offsetHeight;var b=parseInt;c=c[0];window.getComputedStyle?c=getComputedStyle(c).marginTop:(c=c.currentStyle.marginTop,c="auto"==c?0:c);f+=b(c)}else f=0;a=a-f-k.$bottom[0].offsetHeight+1;a=0<=a?a:"";k.$cont.height(a);this.contHt=a};n.setContAndGridHeightForFlex=function(){var k=this.that,c=k.hscroll.widget();if(this.vscroll)c.css("position",
"");else{c.css("position","relative");var c=k.$cont,a=k.options.cls,f=c.children("."+a.cont_inner_b);c.height("");f.length||(f=c.children("."+a.cont_inner));f.height("");k.element.height("");k.$grid_center.height("")}};n.setContAndGridWidthForFlex=function(){var k=this.that,c=k.options.maxWidth,a=this.maxWidthPixel,f=k.calcWidthCols(-1,k.colModel.length),k=k.element,b=this.getSBWidth(),f=f+b;c&&f>=a&&(f=a);this.contWd=f;k.width(f+"px")};n.getTotalVisibleRows=function(k,c,a){var f=this.that,b=this.vrows,
d=this.estRowsInViewPort(),m=0,g=a?a.length:0,e=c,h=0,u=0,l=null,z=f.iHierarchy?!0:!1,f=f.options.detailModel.offset,r=0,p=this.rowHt,n=z?this.contHt:void 0;if(null==a||0==g)return{initV:null,finalV:null,tvRows:m,lastFrozenRow:null};for(var q=0,t=g>c?c:g;q<t;q++){var s=a[q],x=s.pq_hidden;x||(l=q,m++,z&&((s=s.pq_detail)&&s.show?(s=s.height||0,s>f&&(s=f),r+=s+p):r+=p))}if(g<c)return{initV:l,finalV:l,tvRows:m,lastFrozenRow:l};d-=m;e=h=b[k];u=0;q=e;for(t=g;q<t;q++){s=a[q];if(x=s.pq_hidden)h++;else if(u===
d)break;else h++,u++;if(z&&!x&&((s=s.pq_detail)&&s.show?(s=s.height||0,s>f&&(s=f),r+=s+p):r+=p,r>n))break}m+=b.length;e=e>=g?g-1:e;h=h>=g?g-1:h;return{initV:e,finalV:h<e?e:h,tvRows:m,lastFrozenRow:l}};n.setInitH=function(k,c){var a=this.that;a.initH=k;a.finalH=c};n.setInitV=function(k,c){var a=this.that,f;(null==k||null==c)&&(f=this.vrows)&&f.length&&(k=c=f[f.length-1]);a.initV=k;a.finalV=c};n.calcVisibleV=function(){for(var k=this.that,c=k.pdata||[],a=c.length,f=[],b=0,k=k.options.freezeRows;k<a;k++)c[k].pq_hidden||
(f[b++]=k);this.vrows=f};n.calcVisibleH=function(){for(var k=this.that,c=[],a=0,f=k.colModel,k=k.options.freezeCols,b=f.length;k<b;k++)f[k].hidden||(c[a++]=k);this.vcols=c};n.calcInitFinal=function(){var k=this.that,c=k.options,a=c.virtualY,f=c.freezeRows,b="flex"===c.height,d=k.pdata;if(null==d||0===d.length)f=this.getTotalVisibleRows(m,f,d),k.totalVisibleRows=f.tvRows,a=f.initV,c=f.finalV,k.lastFrozenRow=f.lastFrozenRow;else if(a){var m=parseInt(k.vscroll.option("cur_pos"));if(isNaN(m)||0>m)throw"cur_pos NA";
k.scrollCurPos=m;f=this.getTotalVisibleRows(m,f,d);k.totalVisibleRows=f.tvRows;a=f.initV;k.lastFrozenRow=f.lastFrozenRow;c=b&&!c.maxHeight?d.length-1:f.finalV}else f=this.getTotalVisibleRows(0,f,d),k.lastFrozenRow=f.lastFrozenRow,k.totalVisibleRows=f.tvRows,a=0,c=d.length-1;this.setInitV(a,c)};n.calcInitFinalH=function(){var k=this.that,c=k.options,a,f=k.colModel,b=f.length;if(c.virtualX){a=parseInt(k.hscroll.option("cur_pos"));var d=parseInt(c.freezeCols),m="flex"===c.width,g=this.vcols;g||(this.calcVisibleH(),
g=this.vcols);a=g[a];a>b-1&&(a=b-1);0>a&&(a=0);if(m&&!c.maxWidth)c=b-1;else{k=k.calcWidthCols(-1,d);d=this.getEContWd();for(m=a;m<b;m++)if(g=f[m],!g.hidden){g=g.outerWidth;if(!g&&c.debug)throw"outerwidth N/A";k+=g;if(k>d)break}c=m;c>b-1&&(c=b-1)}}else a=0,c=b-1;this.setInitH(a,c)};n._calcOffset=function(k){return(k=/(-|\+)([0-9]+)/.exec(k))&&3===k.length?parseInt(k[1]+k[2]):0};n.setMax=function(k){var c=this.that,a=c.element;(c=c.options[k])?(c==parseInt(c)&&(c+="px"),a.css(k,c)):a.css(k,"")};n.refreshGridWidthAndHeight=
function(){var k=this.that,c=k.options,a,f,b=-1<(c.width+"").indexOf("%")?!0:!1,d=-1<(c.height+"").indexOf("%")?!0:!1,m=-1<(c.maxHeight+"").indexOf("%")?!0:!1,g="flex"==c.height,e=m&&g,h=-1<(c.maxWidth+"").indexOf("%")?!0:!1,u="flex"==c.width,B=h&&u,k=k.element;if(b||d||e||B){var z=k.parent();if(!z.length)return;var r;z[0]==document.body||"fixed"==k.css("position")?(r=l(window).width(),z=window.innerHeight?window.innerHeight:l(window).height()):(r=z.width(),z=z.height());var p=this._calcOffset,n=
b?p(c.width):0,p=d?p(c.height):0;B?a=parseInt(c.maxWidth)*r/100:b&&(a=parseInt(c.width)*r/100+n);e?f=parseInt(c.maxHeight)*z/100:d&&(f=parseInt(c.height)*z/100+p)}a||(u&&c.maxWidth?h||(a=c.maxWidth):b||(a=c.width));c.maxWidth&&(this.maxWidthPixel=a);f||(g&&c.maxHeight?m||(f=c.maxHeight):d||(f=c.height));parseFloat(a)==a?(a=a<c.minWidth?c.minWidth:a,k.css("width",a)):"auto"===a&&k.width(a);parseFloat(f)==f&&(f=f<c.minHeight?c.minHeight:f,k.css("height",f));this.width=Math.round(k.width());this.height=
Math.round(k.height())};n.decidePanes=function(){var k=this.that,c=k.pqpanes={v:!1,h:!1,vH:!1},a=k.options,k=a.virtualX,f=a.virtualY,b="flex"==a.height&&!a.maxHeight,d="flex"==a.width&&!a.maxWidth,m=a.numberCell,g=a.freezeRows,a=a.freezeCols;!g||b||!a&&!m.show||d?g&&!b?f||(c.h=!0):!a&&!m.show||d||k||(c.v=!0,c.vH=!0):(f||(c.h=!0),k||(c.v=!0,c.vH=!0))};n._storeColumnWidths=function(k){for(var c=this.that,a=c.options,f=c.colModel,b=a.virtualX,a=a.freezeCols,d=c.initH,c=k?f.length-1:c.finalH,m=[],g=0;g<=
c;g++)!k&&b&&g<d&&g>=a&&(g=d),m[g]={outerWidth:f[g].outerWidth};return m};n._isColumnWidthChanged=function(k){for(var c=this.that,a=c.colModel,c=c.iGenerateView.colDef,f=0,b=c.length;f<b;f++){var d=c[f].colIndx;if(a[d].outerWidth!==k[d].outerWidth)return!0}return!1};n.softRefresh=function(){var k=this.that,c=k.options;this.refreshScrollbars();k.iGenerateView.setPanes();k._saveDims();k.iMouseSelection.syncScrollBarVert();"flex"==c.height&&this.setContAndGridHeightForFlex();"flex"==c.width&&this.setContAndGridWidthForFlex();
this._refreshFrozenLine()};n.refreshScrollbars=function(k){k=k||{};var c=this.that,a=c.options,f=c.iGenerateView,b,d="flex"===a.height;b="flex"===a.width;if((d||this.contHt)&&(b||this.contWd)&&null!==c.totalVisibleRows){c=this.setScrollVNumEles(k);c=1<c?!0:!1;if((!d||a.maxHeight)&&c!==this.vscroll)if(this.vscroll=c,a.scrollModel.autoFit||a.virtualX||b){if(a=this._storeColumnWidths(),this.refreshColumnWidths(),this._isColumnWidthChanged(a)||b)this.ignoreTResize=!0,this._refreshTableWidths(a,{table:!0,
header:!0}),delete this.ignoreTResize,this.setHeaderHeight(),this.setContHeight(),f.setPanes(),c=this.setScrollVNumEles(!0),this.vscroll=1<c?!0:!1}else f.setPanes();c=this.setScrollHNumEles();b=1<c?!0:!1;this.hscroll!=b&&(this.hscroll=b,f.setPanes());this._setScrollHLength();this._setScrollVLength(k);this._setScrollHVLength()}};n._setScrollHVLength=function(){var k=this.that;this.vscroll&&this.hscroll||k.$hvscroll.css("visibility","hidden")};n._setScrollHLength=function(){var k=this.that,c=k.hscroll.widget(),
a=k.$hvscroll;if(k.options.scrollModel.horizontal){c.css("visibility","");a.css("visibility","");var a=this.contWd,f=this.getSBWidth();c.css("right",0===f?0:"");k.hscroll.option("length",a-f)}else c.css("visibility","hidden"),a.css("visibility","hidden")};n.estVscroll=function(){var k=this.that,c=!0;null==k.totalVisibleRows||null==this.contHt?c=!1:k.totalVisibleRows*this.rowHt<this.contHt&&(c=!1);this.vscroll=c};n.getSBWidth=function(){null==this.vscroll&&this.estVscroll();return this.vscroll?17:
0};n.estHscroll=function(){var k=this.that;if(null==this.contWd)throw"failed";var c=!1;1<this.calcColsOutsideCont(k.colModel)+1&&(c=!0);this.hscroll=c};n.getSBHeight=function(){null==this.hscroll&&this.estHscroll();return this.hscroll?17:0};n.getEContHt=function(){if(null==this.contHt)throw"contHt N/A";return this.contHt-this.getSBHeight()};n.getEContWd=function(){if(null==this.contWd)throw"contWd N/A";return this.contWd-this.getSBWidth()};n.calcColsOutsideCont=function(k){var c=this.that.options,
a=c.numberCell,c=c.freezeCols,f=this.contWd-this.getSBWidth(),b=0;a.show&&(b+=a.outerWidth);for(a=0;a<k.length;a++){var d=k[a];d.hidden||(b+=d.outerWidth)}var m=0,g=0,d=Math.round(b);d>f&&g++;for(a=c;a<k.length;a++)if(d=k[a],!d.hidden)if(m+=d.outerWidth,d=b-m,d>f)g++;else break;return g};n.setScrollHNumEles=function(){var k=this.that,c=k.options,a=k.colModel,f=c.scrollModel,b=0;if("flex"!==c.width||c.maxWidth)b="fullScroll"===f.lastColumn?a.length-c.freezeCols-k._calcNumHiddenUnFrozens():this.calcColsOutsideCont(a)+
1;k.hscroll.option("num_eles",b);return b};n.init=function(){var k=this.that,c=k.options;this.hscroll=this.vscroll=this.contHt=this.contWd=null;k.initH=k.initV=k.finalH=k.finalV=null;k.totalVisibleRows=k.lastFrozenRow=null;this.rowHt=c.rowHeight;this.headerHt=0;this.height=null};n.refresh=function(k){k=k||{};var c=this.that,a=k.header,f=k.table,b=k.pager,d,m=c.iGenerateView;d=c.element;if(d[0].offsetWidth){k.toolbar&&c.refreshToolbar();c.iMouseSelection.resetMargins();this.init();d=c.options;this.decidePanes();
d.collapsible._collapsed=!1;this.setMax("maxHeight");this.setMax("maxWidth");this.refreshGridWidthAndHeight();this.initContHeight();this.initContWidth();this.calcInitFinal();if(!1===a||!1===f)var g=this._storeColumnWidths(!0);this.refreshColumnWidths();this.calcInitFinalH();m.createColDefs();!1!==a?c._createHeader():this._isColumnWidthChanged(g)&&this._refreshTableWidths(g,{header:!0});c._refreshHeaderSortIcons();!1!==b&&c._refreshPager();this.setHeaderHeight();this.setContHeight();!1!==f?m.generateView({source:k.source}):
(this._refreshTableWidths(g,{table:!0}),m.setPanes());c._saveDims();m.scrollView();this.refreshScrollbars();"flex"==d.height&&this.setContAndGridHeightForFlex();"flex"==d.width&&this.setContAndGridWidthForFlex();this._refreshFrozenLine();c._createCollapse();d.dataModel.postDataOnce=void 0}else d.addClass("pq-pending-refresh")};n.summaryTable=function(){var k=this.$summary,c=this.that,a=c.options.summaryData;a?(k||(k=this.$summary=l("<div class='pq-grid-summary'></div>").prependTo(c.$bottom)),k={data:a,
$cont:k},c.createTable(k)):k&&k[0].innerHTML&&k.empty()};n.refreshVscroll=function(k){k=this.that;var c=k.iGenerateView,a=k.options;if(a.virtualY&&!a.scrollModel.smooth){var f=k.initV,b=k.finalV;this.calcInitFinal();var d=f-k.initV,m=b-k.finalV;a.fullrefreshOnScroll||a.detailModel.init||k._mergeCells||1!=Math.abs(d)||1!=Math.abs(m)?f==k.initV&&b==k.finalV||c.generateView():-1==d?(c.removeTopRow(1),c.appendRow(k.finalV-b)):1==d&&(c.prependRow(),c.removeBottomRow(b-k.finalV));k._saveDims();c.scrollView();
1>=this.setScrollVNumEles()&&this.refreshScrollbars()}};n._refreshTableWidths=function(k,c){var a=this.that,f=a.$tbl_header,b=c.header&&f,d=a.$tbl,m=c.table&&d,f=b?f.children().children(".pq-row-hidden"):null,g=b?a.$header.find(".pq-grid-col-resize-handle"):null,d=m&&d?d.children().children(".pq-row-hidden"):null,e,h=!1,u=0;m&&a.tables.length&&(m=a.tables[0].$tbl.children().children(".pq-row-hidden"),d=d?d.add(m):m);for(var m=a.iGenerateView.colDef,l=0,z=m.length;l<z;l++){var r=m[l],p=r.colIndx,n=
k[p].outerWidth,r=r.column.outerWidth;r!==n&&(b&&(e=f.find("td[pq-col-indx="+p+"]"),e.width(r)),d&&(e=d.find("td[pq-col-indx="+p+"]"),e.length&&(h=!0,e.width(r))));u+=r-n;b&&0!==u&&(p=g.filter("[pq-col-indx="+p+"]"),n=parseInt(p.css("left")),p.css("left",n+u))}h&&a._trigger("tableWidthChange");a._saveDims()}})(jQuery);
(function(l){function n(a,b,d){for(var f=0,c=a.length;f<c;f++){for(var m=a[f],k={},l=0,n=b.length;l<n;l++){var q=b[l];k[q]=m[q]}d.push(k)}}function k(a){var b=this;b.that=a;b.findformulas();a.on("columnChange",function(){b.findformulas()}).on("dataAvailable",function(){b._onDA()}).on(!0,"change",function(a,d){b._onchange(d)}).on("dataReady changeDone",function(){b.summaryData()})}var c=l.paramquery,a=c.cClass;l.widget("paramquery.pqGrid",c._pqGrid,{options:{flex:{on:!0,one:!1,all:!0},detailModel:{cache:!0,
offset:100,expandIcon:"ui-icon-triangle-1-se glyphicon glyphicon-minus",collapseIcon:"ui-icon-triangle-1-e glyphicon glyphicon-plus"},dragColumns:{enabled:!0,acceptIcon:"ui-icon-check glyphicon-ok",rejectIcon:"ui-icon-closethick glyphicon-remove",topIcon:"ui-icon-circle-arrow-s glyphicon glyphicon-circle-arrow-down",bottomIcon:"ui-icon-circle-arrow-n glyphicon glyphicon-circle-arrow-up"},track:null,mergeModel:{flex:!1},realFocus:!0,sortModel:{on:!0,type:"local",multiKey:"shiftKey",number:!0,single:!0,
cancel:!0,sorter:[],useCache:!0,ignoreCase:!1},filterModel:{on:!0,type:"local",mode:"AND",header:!1}},_create:function(){var a=this,b=a.options;a.listeners={};a._queueATriggers={};a.iHistory=new c.cHistory(a);a.iGroupView=new c.cGroupView(a);c.cMerge&&(a.iMerge=new c.cMerge(a));a.iFilterData=new c.cFilterData(a);a.iSelection=new f.Selection(a);a.iHeaderSearch=new d(a);a.iUCData=new c.cUCData(a);a.iMouseSelection=new c.cMouseSelection(a);a._super();new k(a);a.iDragColumns=new c.cDragColumns(a);a.refreshToolbar();
"remote"===b.dataModel.location&&a.refresh({table:!0});a.on("dataAvailable",function(){a.one("refreshDone",function(){a._trigger("ready");setTimeout(function(){a.element&&a._trigger("complete")},0)})});a.refreshDataAndView({header:!0})}});l.widget.extend=function(){var a=Array.prototype.shift,b=l.isPlainObject,d=l.isArray,f=l.widget.extend,c=a.apply(arguments),m;"boolean"==typeof c&&(m=c,c=a.apply(arguments));var k=arguments,p=0,n=k.length,q,t,s;for(null==m&&(m=1<n?!0:!1);p<n;p++)for(t in q=k[p],
q)s=q[t],void 0!==s&&(a=0<p?!1:!0,b(s)?(c[t]=c[t]||{},f(a,c[t],s)):d(s)?c[t]=m&&a?s.slice():s:c[t]=s);return c};var f=window.pq=window.pq||{};f.grid=function(a,b){var d=l(a).pqGrid(b);return d.data("paramqueryPqGrid")||d.data("paramquery-pqGrid")};c.pqGrid.regional={};var b=c.pqGrid.prototype;c.pqGrid.defaults=b.options;b.focus=function(a){a=a||{};var b=a.$td,d=a.rowIndxPage;a=a.colIndx;if(b){if(null==d||null==a)a=this.getCellIndices({$td:b}),d=a.rowIndxPage,a=a.colIndx}else{if(null==d||null==a){if((d=
document.activeElement)&&d!=document.body&&"pq-grid-excel"!=d.id&&"pq-grid-cont"!=d.className||!(b=this._focusElement))return;d=b.rowIndxPage,a=b.colIndx}var b=this.iMerge,f=d+this.rowIndxOffset;b.ismergedCell(f,a)&&(b=b.getRootCell(f,a,"o"),d=b.rowIndxPage,a=b.colIndx);b=this.getCell({rowIndxPage:d,colIndx:a})}if(this.options.realFocus){this._focusElement={$ele:b,rowIndxPage:d,colIndx:a};var c;b[0]&&(c=b[0])&&"TD"==c.nodeName.toUpperCase()?(c.setAttribute("tabindex",0),c.focus()):(d=this.options.dataModel.data)&&
d.length||this.$cont.focus()}else{if(c=this._focusElement)this.removeClass({rowIndxPage:c.rowIndxPage,colIndx:c.colIndx,cls:"pq-focus",refresh:!1}),this.element.find(".pq-focus").removeClass("pq-focus");b&&(this.addClass({rowIndxPage:d,colIndx:a,cls:"pq-focus"}),this._focusElement={$ele:b,rowIndxPage:d,colIndx:a});d=this.$cont;document.activeElement!=d[0]&&d[0].focus()}};b.onfocus=function(){if(!this.options.realFocus){var a=this._focusElement;a&&this.addClass({rowIndxPage:a.rowIndxPage,colIndx:a.colIndx,
cls:"pq-focus"})}};b.onblur=function(){if(!this.options.realFocus){var a=this._focusElement;a&&this.removeClass({rowIndxPage:a.rowIndxPage,colIndx:a.colIndx,cls:"pq-focus"})}};b.range=function(a,b){return new f.Range(this,a,"range",b)};b.rowExpand=function(a){this.iHierarchy.rowExpand(a)};b.rowInvalidate=function(a){this.iHierarchy.rowInvalidate(a)};b.rowCollapse=function(a){this.iHierarchy.rowCollapse(a)};b.saveState=function(a){a=a||{};var b=this.element,d=l.extend,f=this.options,c=d(!0,{},{sorter:f.sortModel.sorter}),
m=f.pageModel,m={rPP:m.rPP,curPage:m.curPage},k=this.colModel,p=[],n,q,t=0,s=k.length;q=f.groupModel;d=d(!0,{},{dataIndx:q.dataIndx,dir:q.dir,collapsed:q.collapsed,merge:q.merge,grandSummary:q.grandSummary});for(b=b[0].id;t<s;t++){n=k[t];q={width:n.width,dataIndx:n.dataIndx};if(n=n.filter)q.filter={value:n.value,value2:n.value2,on:n.on};p[t]=q}f={colModel:p,height:f.height,datestamp:Date.now(),width:f.width,groupModel:d,pageModel:m,sortModel:c,freezeRows:f.freezeRows,freezeCols:f.freezeCols};!1!==
a.stringify&&(f=JSON.stringify(f),!1!==a.save&&"undefined"!==typeof Storage&&localStorage.setItem("pq-grid"+(b?b:""),f));return f};b.loadState=function(a){a=a||{};var b;b=l.widget.extend;var d=l.extend,f=this.element[0].id;if(f=a.state||("undefined"===typeof Storage?void 0:localStorage.getItem("pq-grid"+(f?f:""))))"string"==typeof f&&(f=JSON.parse(f));else return!1;for(var c=f.colModel,m,k,p=[],n=[],q=[],t=this.options,s=1<this.depth,x=s?this.colModel:t.colModel,w=0,y=c.length;w<y;w++)m=c[w],k=m.dataIndx,
n[k]=w,p[k]=m.width,q[k]=m.filter;s||x.sort(function(a,b){return n[a.dataIndx]-n[b.dataIndx]});w=0;for(y=x.length;w<y;w++)c=x[w],k=c.dataIndx,c.width=p[k]||c.width,c.filter=d(c.filter,q[k]);this.iColModel.init();b(t.sortModel,f.sortModel);b(t.pageModel,f.pageModel);b=f.groupModel;b.refresh=!1;this.groupOption(b);b={freezeRows:f.freezeRows,freezeCols:f.freezeCols};isNaN(1*t.height)||isNaN(1*f.height)||(b.height=f.height);isNaN(1*t.width)||isNaN(1*f.width)||(b.width=f.width);this.option(b);!1!==a.refresh&&
this.refreshDataAndView();return!0};var d=function(a){function b(e,d,f){a.filter({data:[{dataIndx:e,value:d,value2:f}]})}this.that=a;var d=this;this.dataHS={};a.on("headerKeyDown",function(a,b){var e=l(a.originalEvent.target);return e.hasClass("pq-grid-hd-search-field")?d.onKeyDown(a,b,e):!0});a.on("createHeader",function(a,b){return d._onCreateHeader()});this.changeListener={change:function(a,d){b(d.dataIndx,d.value,d.value2)}};this.keyupListener={keyup:function(a,d){b(d.dataIndx,d.value,d.value2)}};
this.clickListener={click:function(a,d){b(d.dataIndx,d.value)}}},a=d.prototype=new a;a.get$Ele=function(a,b){var d=this.that,f=d.options.freezeCols,c=l(d.$tbl_header[0]),m=".pq-grid-hd-search-field[name='"+b+"']",d=l(d.$tbl_header[2==d.$tbl_header.length?1:0]);return a>=f?d.find(m):c.find(m)};a.onKeyDown=function(a,b,d){b=this.that;if(a.keyCode===l.ui.keyCode.TAB){var f=d.attr("name"),c=b.getColIndx({dataIndx:f}),m=b.colModel,k,p=a.shiftKey,n=m[c];if("between"==n.filter.condition&&(b.scrollColumn({colIndx:c}),
f=this.get$Ele(c,f),f[0]==d[0]?p||(k=f[1]):p&&(k=f[0]),k))return k.focus(),a.preventDefault(),!1;do{p?c--:c++;if(0>c||c>=m.length)break;n=m[c];d=n.filter;if(!n.hidden&&d){b.scrollColumn({colIndx:c});f=n.dataIndx;k=this.get$Ele(c,f);"between"==d.condition&&(k=p?l(k[1]):l(k[0]));if(k)return k.focus(),a.preventDefault(),!1;break}}while(1)}else return!0};a._bindFocus=function(){function a(g){g=l(g.target).closest(".pq-grid-hd-search-field").attr("name");if(b.scrollColumn({dataIndx:g})){var f=b.getColIndx({dataIndx:g});
d.get$Ele(f,g).focus()}}for(var b=this.that,d=this,f=b.$header.find(".pq-grid-header-search-row"),c=0;c<f.length;c++)l(f[c]).on("focusin",a)};a._onCreateHeader=function(){var a=this.that,b=a.options;if(b.filterModel.header){this._bindFocus();var d=a.colModel,b=b.freezeCols,f=a.$tbl_header,c=l(f[0]),m=l(f[1]),k="input,select";if(1<f.length){c.find(k).css("visibility","hidden");for(var p=0;p<b;p++){var n=d[p],k="*[name='"+n.dataIndx+"']";c.find(k).css("visibility","visible");m.find(k).css("visibility",
"hidden")}}d=a.iGenerateView.colDef;p=0;for(k=d.length;p<k;p++){var q=d[p],t=q.colIndx,n=q.column,s=n.filter;if(s){var q=n.dataIndx,x=c;t>=b&&1<f.length&&(x=m);t=x.find("*[name='"+q+"']");if(0!=t.length){var x=s.type,w=s.value,y=s.value2;"checkbox"==x&&"triple"==s.subtype?t.pqval({val:w}):"select"==x&&null!=w&&t.val(w);(x=s.init)&&x.call(t,{dataIndx:q,column:n});if(n=s.listeners)for(s=0;s<n.length;s++){x=n[s];"string"==typeof x&&(x=this[x+"Listener"]);for(var C in x)(function(b,e,d){b.bind(C,function(f){var h=
a.getColumn({dataIndx:d}),c=h.filter;"checkbox"==c.type?w="triple"==c.subtype?b.pqval({incr:!0}):b.is(":checked")?!0:!1:"between"==c.condition?(w=l(b[0]).val(),y=l(b[1]).val()):w=b.val();return e.call(this,f,{column:h,dataIndx:d,value:w,value2:y})})})(t,x[C],q)}}}}}};var m=function(a,b){return["<div class='pq-from-div'>",a,"</div><span class='pq-from-to-center'>-</span><div class='pq-to-div'>",b,"</div>"].join("")};a.createDOM=function(a,b){var d=this.that,f=d.options,k=f.bootstrap.on?" ":" ui-corner-all",
f=f.numberCell;a.push("<tr class='pq-grid-header-search-row'>");f.show&&a.push("<td pq-col-indx='-1' class='pq-grid-number-col' rowspan='1'><div class='pq-td-div'>&nbsp;</div></td>");for(var f=d.iGenerateView.colDef,l=0,n=f.length;l<n;l++){var p=f[l].column,v=b,q=p.halign;q||(q=p.align);"right"==q?v+=" pq-align-right":"center"==q&&(v+=" pq-align-center");(q=p.cls)&&(v=v+" "+q);if(q=p.filter){var t=p.dataIndx,s=q.type,x=q.value,w=q.condition,y=q.cls,y="pq-grid-hd-search-field "+(y?y:""),C=q.style,
C=C?C:"",A=q.attr,A=A?A:"",D="";if("between"==w)var E=q.value2,E=null!=E?E:"";"textbox"===s?(x=x?x:"",y=y+" pq-search-txt"+k,D="between"==w?m(this._input(t,x,y+" pq-from",C,A),this._input(t,E,y+" pq-to",C,A)):this._input(t,x,y,C,A)):"textarea"===s?(x=x?x:"",y=y+" pq-search-txt"+k,D="between"==w?m(this._textarea(t,x,y+" pq-from",C,A),this._textarea(t,E,y+" pq-to",C,A)):this._textarea(t,x,y,C,A)):"select"===s?q.cache?D=q.cache:(s=q.options,"function"===typeof s&&(s=s.call(d,{column:p,value:x,dataIndx:t,
cls:y,style:C,attr:A})),y+=k,p=["name='",t,"' class='",y,"' style='",C,"' ",A].join(""),D=c.select({options:s,attr:p,prepend:q.prepend,valueIndx:q.valueIndx,labelIndx:q.labelIndx,groupIndx:q.groupIndx}),q.cache=D):"checkbox"==s?D=["<input ",null==x||!1==x?"":"checked=checked"," name='",t,"' type=checkbox class='"+y+"' style='"+C+"' "+A+"/>"].join(""):"string"==typeof s?D=s:"function"==typeof s&&(D=s.call(d,{width:p.outerWidth,value:x,value2:E,column:p,dataIndx:t,cls:y,attr:A,style:C}));a.push(["<td class='",
v,"'><div class='pq-td-div' >",D,"</div></td>"].join(""))}else a.push(["<td class='",v,"'><div class='pq-td-div' >&nbsp;</div></td>"].join(""))}a.push("</tr>")};a._input=function(a,b,d,f,c){return['<input value="',b,"\" name='",a,"' type=text style='"+f+"' class='"+d+"' "+c+" />"].join("")};a._textarea=function(a,b,d,f,c){return["<textarea name='",a,"' style='"+f+"' class='"+d+"' "+c+" >",b,"</textarea>"].join("")};b.refreshToolbar=function(){var a=this.options,b=a.toolbar,d;this._toolbar&&(d=this._toolbar,
d.destroy());if(b){var c=b.cls,m=b.style,k=b.attr,b=b.items,c=l("<div class='"+(c?c:"")+"' style='"+(m?m:"")+"' "+(k?k:"")+" ></div>");d?d.widget().replaceWith(c):this.$top.append(c);d=f.toolbar(c,{items:b,gridInstance:this,bootstrap:a.bootstrap});a.showToolbar||c.css("display","none");this._toolbar=d}};b.isLeftOrRight=function(a){return a>this.freezeCols?"right":"left"};b.ovCreateHeader=function(a,b){this.options.filterModel.header&&this.iHeaderSearch.createDOM(a,b)};b.filter=function(a){var b=this,
d=this.options,f=void 0===a.apply?!0:a.apply,c=void 0===a.sort?!0:a.sort,m=d.dataModel,d=d.filterModel;if(void 0!=a){var k="replace"==a.oper?!0:!1;a=a.data;for(var p=this.colModel,p=f?p:l.extend(!0,[],p),n=0,q=p.length,t=a.length,s=0;s<q;s++){for(var x=p[s],w=!1,y=0;y<t&&n!=t;y++){var C=a[y];if(C.dataIndx==x.dataIndx){w=!0;n++;var y=x.filter,A=C.condition,D=C.value;y?y.on=!0:y=x.filter={on:!0};A&&(y.condition=A);A=y.condition;y.value=D;if("between"==A)y.value2=C.value2;else if("range"==A){C=[];if(D)if("string"==
typeof D){var A=y.options,E=D.indexOf('"'),F=D.lastIndexOf('"'),D=D.substr(E,F+1),D=JSON.parse("["+D+"]");if(A)for(E=0,F=A.length;E<F;E++){var K=A[E];-1!=l.inArray(K,D)&&C.push(K)}else C=D.split(",s*")}else"function"==typeof D.push&&(C=D);y.value=C}break}}k&&!w&&x.filter&&(x.filter.on=!1)}}var L={header:!1,apply:f,sort:c,CM:p};if("remote"==m.location&&"local"!=d.type)this.remoteRequest({apply:f,CM:p,callback:function(){return b._onDataAvailable(L)}});else return L.source="filter",L.trigger=!1,b._onDataAvailable(L)};
b._initTypeColumns=function(){for(var a=this.colModel,b=0,d=a.length;b<d;b++){var f=a[b],m=f.type;"checkBoxSelection"===m||"checkbox"==m?(f.type="checkbox",new c.cCheckBoxColumn(this,f)):"detail"===m&&(f.dataIndx="pq_detail",this.iHierarchy=new c.cHierarchy(this,f))}};b.refreshHeader=function(){this._createHeader();this.iGenerateView.setPanes();this._refreshHeaderSortIcons()};b._refreshHeaderSortIcons=function(){this.iHeader.refreshHeaderSortIcons()};b.getLargestRowCol=function(a){for(var b=0;b<a.length;b++);
};b.bringCellToView=function(a){this._bringCellToView(a)};b._setUrl=function(a){this.options.dataModel.getUrl=function(){return{url:this.url+(null!=a?a:"")}}};b.pageData=function(){return this.pdata};b.getData=function(a){a=a||{};var b=a.dataIndx,d=b?b.length:0,f=a.data;a=this.options.dataModel;var c=a.data,m=a.dataUF;a=[];if(d)f?n(f,b,a):(c&&n(c,b,a),m&&n(m,b,a));else return c.concat(m?m:[]);f=[];for(c=0;c<d;c++){var m=b[c],k=this.getColumn({dataIndx:m});f.push({dataIndx:m,dir:"up",dataType:k.dataType,
sortType:k.sortType})}a=this.iSort._sortLocalData(f,a);b=[];d=void 0;f=0;for(c=a.length;f<c;f++)m=a[f],k=JSON.stringify(m),k!==d&&(b.push(m),d=k);return b};b.get_p_data=function(){var a=this.options,b="remote"==a.pageModel.type,d=a.dataModel.data,f=this.pdata,c=this.rowIndxOffset,a=a.groupModel,m=c&&b?Array(c):[];return a.on&&a.dataIndx.length?c?(b||(m=d.slice(0,c)),m.concat(f)):f:c&&b?m.concat(f):d};b._onDataAvailable=function(a){a=a||{};var b=this.options,d=null==a.apply?!0:a.apply,f=a.source,c=
a.sort,m=[],m=b.filterModel,k=b.dataModel,b=b.sortModel,l=k.location;!1!==d&&!1!==a.trigger&&this._trigger("dataAvailable",a.evt,{source:f});m=m&&m.on&&("local"==l&&"remote"!=m.type||"remote"==l&&"local"==m.type)?this.iFilterData.filterLocalData(a).data:k.data;"local"==b.type&&!1!==c&&(d?this.sort({refresh:!1}):m=this.iSort.sortLocalData(m));if(!1===d)return m;k.data=m;this.refreshView(a)};b.sort=function(a){a=a||{};var b=this,d=this.options,f=d.dataModel.data,c=d.sortModel.type;if(f&&f.length||"local"!=
c){var m=d.editModel,d=this.iSort,k=d.getSorter(),l,n=a.evt,q=null==a.single?d.readSingle():a.single;l=d.readCancel();a.sorter?a.addon?(a.single=q,a.cancel=l,l=d.refreshSorter(a)):l=a.sorter:l=d.readSorter();if(l.length||k.length)m.indices&&b.blurEditor({force:!0}),m={dataIndx:l.length?l[0].dataIndx:null,oldSorter:k,sorter:l,source:a.source,single:q},!1===b._trigger("beforeSort",n,m)?d.cancelSort():(d.resumeSort(),"local"==c&&d.saveOrder(),d.setSorter(l),d.setSingle(q),d.writeSorter(l),d.writeSingle(q),
"local"==c?(d.sortLocalData(f),this._queueATriggers.sort={evt:n,ui:m},!1!==a.refresh&&this.refreshView()):"remote"==c&&(this._queueATriggers.sort={evt:n,ui:m},a.initByRemote||this.remoteRequest({initBySort:!0,callback:function(){b._onDataAvailable()}})))}};b.reset=function(a){a=a||{};var b=a.sort,d,f=0,c;d=this.options;c=l.extend;var m,k=a.filter,n=a.group;if(b||k||n){b&&(m=!0===b?{sorter:[]}:b,c(d.sortModel,m));if(k)for(d=this.getColModel(),c=d.length;f<c;f++)if(m=d[f].filter)m.value=null,m.value2=
null,m.cache=null;n&&(f=!0===n?{dataIndx:[]}:n,f.refresh=!1,this.groupOption(f));!1!==a.refresh&&(k?(this.filter({oper:"replace",data:[]}),this.refreshHeader()):b?this.sort():this.refreshView())}};b._trigger=c._trigger;b.on=c.on;b.one=c.one;b.off=c.off;b.pager=function(){return this.pagerW};b.vscrollbar=function(){return this.vscroll};b.hscrollbar=function(){return this.hscroll};b.toolbar=function(){return this._toolbar.element};b=k.prototype;b.callRow=function(a,b,d){if(a)for(;d--;){var f=b[d],c=
f.column;a[c.dataIndx]=f.formula.call(this.that,{rowData:a,column:c})}};b._onDA=function(){var a=this.formulas.length;if(a)for(var b=this.that.options.dataModel.data,d=b.length,f=this.formulas;d--;)this.callRow(b[d],f,a)};b.summaryData=function(){var a=this.formulas,b=a.length,d,f;if(b)for(d=this.that.options.summaryData||[],f=d.length;f--;)this.callRow(d[f],a,b)};b._onchange=function(a){var b=this.formulas.length;if(b){a=a.rowList;for(var d=this.formulas,f=a.length;f--;)this.callRow(a[f].rowData,
d,b)}};b.findformulas=function(){for(var a=this.that.colModel,b,d,f=[],c=a.length;c--;)b=a[c],(d=b.formula)&&f.push({formula:d,column:b});this.formulas=f};b=c.cColModel=b=function(a){this.that=a;this.init()};b=b.prototype;b.extend=function(a,b){for(var d,f,c=l.extend,m=a.length;m--;){var k=a[m];for(d in b)void 0===k[d]&&(f=b[d],k[d]=f&&"object"==typeof f?c(!0,{},f):f)}};b.init=function(){var a=this.that,b=a.options,d=b.columnTemplate,f;f=b.colModel;f||(this._autoGenColumns(),f=b.colModel);b=this.nestedCols(f);
a.depth=b.depth;b=a.colModel=b.colModel;f=b.length;d&&this.extend(b,d);this.getHeadersCells();this.alignColumns(b,f);this.assignRowSpan();this._refreshDataIndices();a._trigger("CMInit")};b.alignColumns=function(a,b){for(var d=0;d<b;d++){var f=a[d];if(!f.align){var c=f.dataType;!c||"integer"!=c&&"float"!=c||(f.align="right")}}};b.nestedCols=function(a,b,d,f){var c=a.length,m=[];null==b&&(b=1);for(var k=b,l=0,n=0,q=0,t=0;t<c;t++){var s=a[t];s.parent=f?f:void 0;!0===d&&(s.hidden=d);var x=s.colModel;
x&&x.length?(x=this.nestedCols(x,b+1,s.hidden,s),m=m.concat(x.colModel),0<x.colSpan?(x.depth>k&&(k=x.depth),s.colSpan=x.colSpan,l+=x.colSpan):s.colSpan=0,q+=x.o_colspan,s.o_colspan=x.o_colspan,s.childCount=x.childCount,n+=x.childCount):(s.hidden?s.colSpan=0:(s.colSpan=1,l++),q++,s.o_colspan=1,s.childCount=0,n++,m.push(s))}return{depth:k,colModel:m,colSpan:l,width:0,childCount:n,o_colspan:q}};b.getHeadersCells=function(){for(var a=this.that,b=a.options.colModel,d=a.colModel.length,f=a.depth,c=[],m=
0;m<f;m++){c[m]=[];for(var k=0,l=0,n=0;n<d;n++){var q;if(0==m)q=b[k];else{var t=c[m-1][n];if((q=t.colModel)&&0!=q.length){for(var t=n-t.leftPos,s=0,x=0,w=0;w<q.length;w++)if(s+=0<q[w].childCount?q[w].childCount:1,t<s){x=w;break}q=q[x]}else q=t}t=q.childCount?q.childCount:1;n==l?(q.leftPos=n,c[m][n]=q,l+=t,b[k+1]&&k++):c[m][n]=c[m][n-1]}}return a.headerCells=c};b.getDataType=function(){var a=this.colModel;if(a&&a[0])return"string"==typeof a[0].dataIndx?"JSON":"ARRAY"};b.assignRowSpan=function(){for(var a=
this.that,b=a.colModel.length,d=a.headerCells,a=a.depth,f=0;f<b;f++)for(var c=0;c<a;c++){var m=d[c][f];if(!(0<f&&m==d[c][f-1]||0<c&&m==d[c-1][f])){for(var k=1,l=c+1;l<a;l++)m==d[l][f]&&k++;m.rowSpan=k}}return d};b._autoGenColumns=function(){var a=this.that.options,b=a.columnTemplate||{},d=b.dataType,c=b.title,m=b.width,b=a.dataModel.data,k=f.validation,n=[];b&&b.length&&l.each(b[0],function(a,b){var e="string";k.isInteger(b)?e=-1<b+-1?"float":"integer":k.isDate(b)?e="date":k.isFloat(b)&&(e="float");
n.push({dataType:d?d:e,dataIndx:a,title:c?c:a,width:m?m:100})});a.colModel=n};b._refreshDataIndices=function(){for(var a=this.that,b="JSON"==this.getDataType()?!0:!1,d={},f={},c={},m=a.colModel,k=m.length,l=0;l<k;l++){var n=m[l],q=n.dataIndx;null==q&&(q="detail"==n.type?"pq_detail":b?"dataIndx_"+l:l,"pq_detail"==q&&(n.dataType="object"),n.dataIndx=q);d[q]=n;f[q]=l;n.validations&&(c[q]=c)}a.columns=d;a.colIndxs=f;a.validations=c}})(jQuery);
(function(l){var n=l.paramquery,k=n._pqGrid.prototype;k.exportExcel=function(a){a=a||{};a.format="xlsx";return this.exportData(a)};k.exportCsv=function(a){a=a||{};a.format="csv";return this.exportData(a)};k.exportData=function(a){return(new c(this,a)).Export(a)};var c=n.cExport=function(a,f){this.that=a;this.templates={content_types:'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types"><Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml"/><Override PartName="/workbook.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml"/><Override PartName="/worksheet.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml"/></Types>',
workbook:['<?xml version="1.0" encoding="UTF-8" standalone="yes"?><workbook xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships"><sheets><sheet name="',f.sheetName?f.sheetName:"ParamQuery Pro",'" sheetId="1" r:id="rId1"/></sheets></workbook>'].join(""),worksheet:'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships"><%=content%></worksheet>',
rels:'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="workbook.xml"/></Relationships>',workbook_rels:'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet" Target="worksheet.xml"/></Relationships>'}},
k=c.prototype;k.getTitle=function(a,f){var b=a.title;b?"function"==typeof b&&(b=b.call(this.that,{colIndx:f,column:a,dataIndx:a.dataIndx,Export:!0})):b="";return b};k.getRenderVal=function(a,f,b){var d=a.column,c=d.exportRender;return(f&&!1!==c||c)&&(d.render||d._render||d.format)?b.renderCell(a):a.rowData[a.dataIndx]};k.getXlsMergeCells=function(a,f,b,d){a=a.concat(b.getMergeCells(f,this.curPage,d));f=[];b=n.toLetter;d=a.length;f.push('<mergeCells count="'+d+'">');for(var c=0;c<d;c++){var g=a[c],
g=b(g.c1)+(g.r1+1)+":"+b(g.c2)+(g.r2+1);f.push('<mergeCell ref="',g,'"/>')}f.push("</mergeCells>");return d?f.join(""):""};k.getXlsCols=function(a,f){var b=[];b.push("<cols>");for(var d=0;d<f;d++){var c=a[d],g=d+1,e=c.hidden?"1":"0",h=c._width;h||(h=parseInt(c.width))||(h=100);b.push('<col min="',g,'" max="',g,'" hidden="',e,'" customWidth="1" width="',h/7,'"/>')}b.push("</cols>");return b.join("")};k.getXlsHeader=function(a,f,b){for(var d=[],c=0;c<f;c++){var g=a[c];d.push("<row>");for(var e=0,h=
g.length;e<h;e++){var k=g[e];if(!1!==k.copy){var l=k.o_colspan,n=k.rowSpan,r=this.getTitle(k,e);0<c&&k==a[c-1][e]?r="":0<e&&k==a[c][e-1]?r="":(1<l||1<n)&&b.push({r1:c,c1:e,r2:c+n-1,c2:e+l-1});d.push('<c t="inlineStr"><is><t><![CDATA['+r+"]]\x3e</t></is></c>")}}d.push("</row>")}return d.join("")};k.getXlsBody=function(a,f,b,d,c,g,e,h,k){var l=[],n,r,p,v,q,t,s={integer:"Number","float":"Number",bool:"bool"};for(n=0;n<d;n++){q=b[n];r=q.pq_hidden?'hidden="1"':"";t=c?n+g:n;p=t-g;q={rowIndx:t,rowIndxPage:p,
rowData:q,Export:!0};l.push("<row "+r+">");for(r=0;r<f;r++)v=a[r],!1!==v.copy&&(p=void 0,e.ismergedCell(t,r)&&(e.isRootCell(t,r,"o")||(p=null)),void 0===p&&(q.colIndx=r,q.column=v,q.dataIndx=v.dataIndx,p=this.getRenderVal(q,h,k)),v=(v=null==p?null:s[v.dataType])?v:"String","Number"==v&&(isNaN(1*p)?v="String":p*=1),p=null==p?"":p,"String"==v?l.push('<c t="inlineStr"><is><t><![CDATA['+p+"]]\x3e</t></is></c>"):"Number"==v?l.push("<c><v>"+p+"</v></c>"):"bool"==v?(p=p?"1":"0",l.push('<c t="b"><v>'+p+"</v></c>")):
l.push("<c><v>"+p+"</v></c>"));l.push("</row>")}return l.join("\n")};k.getXlsContent=function(a,f,b,d,c,g,e,h,k,l,n,r){var p='<sheetViews><sheetView tabSelected="1" workbookViewId="0"><pane ySplit="<%=a%>" topLeftCell="A<%=b%>" activePane="bottomLeft" state="frozen"/></sheetView></sheetViews>',v=this.getXlsCols(a,f),q=[],t=r?d:0,p=p.replace("<%=a%>",t),p=p.replace("<%=b%>",t+1);b=r?this.getXlsHeader(b,d,q):"";a=this.getXlsBody(a,f,c,g,e,h,k,l,n);return[p,v,"<sheetData>",b,a,"</sheetData>",this.getXlsMergeCells(q,
r?d:0,k,g)].join("")};k.getHtmlHeader=function(a,f){for(var b=[],d,c,g,e,h=0;h<f;h++){var k=a[h],l=null;b.push("<tr>");for(var n=0,r=k.length;n<r;n++)d=k[n],c=d.colSpan,!d.hidden&&c&&!1!==d.copy&&(g=d.rowSpan,0<h&&d==a[h-1][n]||l&&0<n&&d==l||(e=this.getTitle(d,n),l=d,d=(d=d.halign||d.align)?"align="+d:"",b.push("<th colspan=",c," rowspan=",g," ",d,">",e,"</th>")));b.push("</tr>")}return b.join("")};k.getHtmlBody=function(a,f,b,d,c,g,e,h,k){var l=[],n,r,p,v,q,t,s;for(n=0;n<d;n++)if(r=b[n],!r.pq_hidden){s=
c?n+g:n;t=s-g;t={rowIndx:s,rowIndxPage:t,rowData:r,Export:!0};l.push("<tr>");for(r=0;r<f;r++)if(p=a[r],!p.hidden&&!1!==p.copy){q="";if(e.ismergedCell(s,r)){if(q=e.isRootCell(s,r))v=e.getRootCell(s,r,"o"),v.Export=!0,v=this.getRenderVal(v,h,k);else continue;q="rowspan="+q.rowspan+" colspan="+q.colspan+" "}else t.colIndx=r,t.column=p,t.dataIndx=p.dataIndx,v=this.getRenderVal(t,h,k);p=p.align;q+=p?"align="+p:"";v=null==v?"":v;l.push("<td ",q,">",v,"</td>")}l.push("</tr>")}return l.join("")};k.getHtmlContent=
function(a,f,b,d,c,g,e,h,k,l,n,r,p){var v=a.cssRules||"",q=this.that.element.find(".pq-grid-table"),t=q.css("font-family"),q=q.css("font-size"),s=[];s.push("<!DOCTYPE html><html><head>",'<meta charset="utf-8" />',"<title>",a.title?a.title:"ParamQuery Pro","</title>","</head><body>","<style>","table{empty-cells:show;font-family:"+t+";font-size:"+q+";border-collapse:collapse;}","td,th{padding: 5px;border:1px solid #ccc;}",v,"</style>","<table>");s.push(p?this.getHtmlHeader(d,c,f):"");s.push(this.getHtmlBody(f,
b,g,e,h,k,l,n,r));s.push("</table></body></html>");return s.join("")};k.getCsvHeader=function(a,f,b,d){for(var c=[],g=[],e,h,k=0;k<f;k++){for(var l=a[k],n=null,r=0,p=l.length;r<p;r++)e=b[r],e.hidden||!1===e.copy||(e=l[r],0<k&&e==a[k-1][r]?c.push(""):n&&0<r&&e==n?c.push(""):(h=(h=this.getTitle(e,r))?h.replace(/\"/g,'""'):"",n=e,c.push('"'+h+'"')));g.push(c.join(d));c=[]}return g};k.getCSVContent=function(a,f,b,d,c,g,e,h,k,l,n,r,p){var v,q;a=a.separator||",";var t,s=[];p=p?this.getCsvHeader(d,c,f,a):
[];for(d=0;d<e;d++)if(q=g[d],!q.pq_hidden){c=h?d+k:d;t=c-k;t={rowIndx:c,rowIndxPage:t,rowData:q,Export:!0};for(q=0;q<b;q++)v=f[q],v.hidden||!1===v.copy||(l.ismergedCell(c,q)?l.isRootCell(c,q)?(v=l.getRootCell(c,q,"o"),v.Export=!0,v=this.getRenderVal(v,n,r)):v="":(t.colIndx=q,t.column=v,t.dataIndx=v.dataIndx,v=this.getRenderVal(t,n,r)),v=(null==v?"":v)+"",v=v.replace(/\"/g,'""'),s.push('"'+v+'"'));p.push(s.join(a));s=[]}return p.join("\n")};k.getJsonContent=function(a,f){function b(a,b){return 0===
(a+"").indexOf("pq_")?void 0:b}return a.nostringify?f:JSON.stringify(f,a.nopqdata?b:null,a.nopretty?null:2)};k.postRequest=function(a){var f=a.format,b,d=a.url,c=a.filename||"pqGrid";a.zip&&"xlsx"!=f?(f=new JSZip,f.file(c+"."+a.format,a.data),a=f.generate({type:"base64",compression:"DEFLATE"}),b=!0,f="zip"):(b=a.decodeBase?!0:!1,a=a.data);d&&l.ajax({url:d,type:"POST",cache:!1,data:{pq_ext:f,pq_data:a,pq_decode:b,pq_filename:c},success:function(a){d+=(0<d.indexOf("?")?"&":"?")+"pq_filename="+a;l(document.body).append("<iframe height='0' width='0' frameborder='0' src=\""+
d+'"></iframe>')}});return a};k.Export=function(a){var f=this.that,b=f.options,d,c,g,e=this.templates,h=b.groupModel;c="remote"==b.pageModel.type;d=f.rowIndxOffset;var k=f.iGenerateView,l=f.iMerge,n=f.colModel,r=n.length,p=f.headerCells,v=p.length,h=(this.curPage=h.on&&h.dataIndx.length||c)?f.pdata:b.dataModel.data,h=b.summaryData?h.concat(b.summaryData):h,q=h.length,b=a.url,t=a.render,s=!a.noheader,x=a.format;f._trigger("beforeExport",null,a);"xlsx"==x?(d=this.getXlsContent(n,r,p,v,h,q,c,d,l,t,k,
s),c=new JSZip,c.file("[Content_Types].xml",e.content_types),c.file("workbook.xml",e.workbook),c.file("worksheet.xml",e.worksheet.replace("<%=content%>",d)),d=c.folder("_rels"),d.file(".rels",e.rels),d.file("workbook.xml.rels",e.workbook_rels),b?(a.data=c.generate({type:"base64",compression:"DEFLATE"}),a.decodeBase=!0):g=c.generate({type:"blob",compression:"DEFLATE"})):a.data="json"==x?this.getJsonContent(a,h):"csv"==x?this.getCSVContent(a,n,r,p,v,h,q,c,d,l,t,k,s):this.getHtmlContent(a,n,r,p,v,h,
q,c,d,l,t,k,s);g=g?g:this.postRequest(a);f._trigger("exportData",null,a);return g}})(jQuery);
(function(l){var n=l.paramquery,k={options:{items:[],gridInstance:null}};l.widget("paramquery.pqToolbar",k);k=n.pqToolbar.prototype;k.refresh=function(){this.element.empty();this._create()};k._create=function(){var c=this.options,a=c.gridInstance,f={button:"click",select:"change",checkbox:"change",textbox:"change"},b,d,m=c.bootstrap,g=m.on,e=a.colModel,c=c.items,h=this.element;h.addClass("pq-toolbar");for(var k=0,B=c.length;k<B;k++){var z=c[k],r=z.type,p=z.value,v=z.icon,q=z.options||{},t=z.label,
s=(d=z.listener)?[d]:z.listeners,s=s||[function(){}];d=(d=z.cls)?d:"";d=(d=g&&"button"==r?m.btn+" "+d:d)?"class='"+d+"'":"";var x=z.style,x=x?"style='"+x+"'":"",w=z.attr,y=w?w:"",w=t&&"button"!=r?[d,y]:[d,y,x],w=w.join(" "),C;z.options=q;"textbox"==r?C=l([t?"<label "+x+">"+t:"","<input type='text' "+w+">",t?"</label>":""].join("")):"textarea"==r?C=l([t?"<label "+x+">"+t:"","<textarea "+w+"></textarea>",t?"</label>":""].join("")):"checkbox"==r?C=l([t?"<label "+x+">":"","<input type='checkbox' ",p?
"checked='checked' ":"",w,">",t?t+"</label>":""].join("")):"separator"==r?C=l("<span class='pq-separator' "+[y,x].join(" ")+"></span>"):"button"==r?(C="",g&&(C=v?"<span class='glyphicon "+v+"'></span>":""),C=l("<button type='button' "+w+">"+C+t+"</button>"),l.extend(q,{label:t?t:!1,icons:{primary:g?"":v}}),C.button(q)):"select"==r?("function"===typeof q&&(q=q.call(a,{colModel:e})),q=q||[],C=n.select({options:q,attr:w,prepend:z.prepend,groupIndx:z.groupIndx,valueIndx:z.valueIndx,labelIndx:z.labelIndx}),
C=l([t?"<label "+x+">"+t:"",C,t?"</label>":""].join(""))):"string"==typeof r?C=l(r):"function"==typeof r&&(C=r.call(a,{colModel:e,cls:d}),C=l(C));C.appendTo(h);"checkbox"!==r&&void 0!==p&&(t?l(C[0].children[0]).val(p):C.val(p));p=0;for(t=s.length;p<t;p++)for(b in d=s[p],v={},"function"==typeof d?v[f[r]]=d:v=d,v)C.on(b,this._onEvent(a,v[b],z))}};k._onEvent=function(c,a,f){return function(b){f.value="checkbox"==f.type?l(b.target).prop("checked"):l(b.target).val();a.call(c,b)}};k._destroy=function(){this.element.empty().removeClass("pq-toolbar").enableSelection()};
k._disable=function(){null==this.$disable&&(this.$disable=l("<div class='pq-grid-disable'></div>").css("opacity",.2).appendTo(this.element))};k._enable=function(){this.$disable&&(this.element[0].removeChild(this.$disable[0]),this.$disable=null)};k._setOption=function(c,a){"disabled"==c&&(!0==a?this._disable():this._enable())};pq.toolbar=function(c,a){var f=l(c).pqToolbar(a);return f.data("paramqueryPqToolbar")||f.data("paramquery-pqToolbar")}})(jQuery);
(function(l){var n=l.paramquery,k=n.pqGrid.prototype.options,c={on:!1,dirtyClass:"pq-cell-dirty"};k.trackModel=k.trackModel||c;k=(n.cUCData=function(a){this.that=a;this.udata=[];this.ddata=[];this.adata=[];this.options=a.options;var f=this;a.on("dataAvailable",function(a,d){"filter"!=d.source&&(f.udata=[],f.ddata=[],f.adata=[])})}).prototype=new n.cClass;k.add=function(a){var f=this.that,b=this.adata,d=this.ddata;a=a.rowData;for(var c=this.options.trackModel.dirtyClass,g=f.getRecId({rowData:a}),e=
0,h=b.length;e<h;e++){var k=b[e];if(null!=g&&k.recId==g)throw"primary key violation";if(k.rowData==a)throw"same data can't be added twice.";}e=0;for(h=d.length;e<h;e++)if(a==d[e].rowData){d.splice(e,1);return}var d=[],l;for(l in a)d.push(l);f.removeClass({rowData:a,dataIndx:d,cls:c});a={recId:g,rowData:a};b.push(a)};k.update=function(a){var f=this.that,b=this.options.trackModel.dirtyClass,d=a.rowData||f.getRowData(a),c=f.getRecId({rowData:d}),g=a.dataIndx,e=a.refresh,h=f.columns,k=f.getValueFromDataType;
a=a.row;var n=this.udata,z=n.slice(0),r=!1;if(null!=c){for(var p=0,v=n.length;p<v;p++){var q=n[p],t=q.oldRow;if(q.rowData==d){r=!0;for(g in a)n=h[g].dataType,v=a[g],v=k(v,n),q=t[g],q=k(q,n),t.hasOwnProperty(g)&&q===v?(n={rowData:d,dataIndx:g,refresh:e,cls:b},f.removeClass(n),delete t[g]):(n={rowData:d,dataIndx:g,refresh:e,cls:b},f.addClass(n),t.hasOwnProperty(g)||(t[g]=d[g]));l.isEmptyObject(t)&&z.splice(p,1);break}}if(!r){t={};for(g in a)t[g]=d[g],n={rowData:d,dataIndx:g,refresh:e,cls:b},f.addClass(n);
n={rowData:d,recId:c,oldRow:t};z.push(n)}this.udata=z}};k["delete"]=function(a){var f=this.that,b=a.rowIndx,d=a.rowIndxPage,c=f.rowIndxOffset,b=null==b?d+c:b,d="remote"==f.options.pageModel.type?null==d?b-c:d:b,c=this.adata,g=this.ddata;a=f.getRowData(a);for(var f=0,e=c.length;f<e;f++)if(c[f].rowData==a){c.splice(f,1);return}g.push({indx:d,rowData:a,rowIndx:b})};k.isDirty=function(a){var f=this.udata,b=this.adata,d=this.ddata,c=!1;if(a=this.that.getRowData(a))for(b=0;b<f.length;b++){if(a==f[b].rowData){c=
!0;break}}else if(f.length||b.length||d.length)c=!0;return c};k.getChangesValue=function(a){a=a||{};var f=this.that;a=a.all;for(var b=this.udata,d=this.adata,c=this.ddata,g=[],e=[],h=[],k=[],n=[],z=[],r=0,p=c.length;r<p;r++){var v=c[r],q=v.rowData,t={};n.push(q);for(var s in q)0!=s.indexOf("pq_")&&(t[s]=q[s]);z.push(t)}r=0;for(p=b.length;r<p;r++)if(v=b[r],c=v.oldRow,q=v.rowData,-1==l.inArray(q,n)&&-1==l.inArray(q,g)){t={};if(!1!==a)for(s in q)0!=s.indexOf("pq_")&&(t[s]=q[s]);else{for(s in c)t[s]=
q[s];t[f.options.dataModel.recIndx]=v.recId}g.push(q);e.push(t);h.push(c)}r=0;for(p=d.length;r<p;r++){v=d[r];q=v.rowData;t={};for(s in q)0!=s.indexOf("pq_")&&(t[s]=q[s]);k.push(t)}return{updateList:e,addList:k,deleteList:z,oldList:h}};k.getChanges=function(){for(var a=this.udata,f=this.adata,b=this.ddata,d=l.inArray,c=[],g=[],e=[],h=[],k=0,n=b.length;k<n;k++){var z=b[k],z=z.rowData;h.push(z)}k=0;for(n=a.length;k<n;k++)z=a[k],b=z.oldRow,z=z.rowData,-1==d(z,h)&&-1==d(z,c)&&(c.push(z),g.push(b));k=0;
for(n=f.length;k<n;k++)z=f[k],z=z.rowData,e.push(z);return{updateList:c,addList:e,deleteList:h,oldList:g}};k.getChangesRaw=function(){var a=this.adata,f=this.ddata,b={updateList:[],addList:[],deleteList:[]};b.updateList=this.udata;b.addList=a;b.deleteList=f;return b};k.commitAdd=function(a,f){for(var b=this.that,d=b.colModel,c=d.length,g=this.adata,e=l.inArray,h=g.length,k=b.getValueFromDataType,b=[],n=a.length,z=[],r=0;r<n;r++)for(var p=a[r],v=0;v<h;v++){var q=g[v].rowData,t=!0;if(-1==e(q,z)){for(var s=
0;s<c;s++){var x=d[s],w=x.dataType,y=x.dataIndx;if(!x.hidden&&y!=f&&(x=q[y],x=k(x,w),y=p[y],y=k(y,w),x!==y)){t=!1;break}}if(t){v={};t={};v[f]=p[f];t[f]=q[f];b.push({type:"update",rowData:q,oldRow:t,newRow:v});z.push(q);break}}}d=[];for(v=0;v<h;v++)q=g[v].rowData,-1==e(q,z)&&d.push(g[v]);this.adata=d;return b};k.commitUpdate=function(a,f){for(var b=this.that,d=this.options.trackModel.dirtyClass,c=this.udata,g=c.length,e=a.length,h=[],k=0;k<g;k++){var n=c[k],z=n.rowData,n=n.oldRow;if(-1==l.inArray(z,
h))for(var r=0;r<e;r++)if(z[f]==a[r][f]){h.push(z);for(var p in n)b.removeClass({rowData:z,dataIndx:p,cls:d})}}b=[];for(k=0;k<g;k++)z=c[k].rowData,-1==l.inArray(z,h)&&b.push(c[k]);this.udata=b;return[]};k.commitDelete=function(a,f){for(var b=this.ddata,d=b.length,c=this.udata,g,e,h;d--;){g=b[d].rowData;e=g[f];h=a.length;if(!h)break;for(;h--;)if(e==a[h][f]){a.splice(h,1);b.splice(d,1);for(e=c.length;e--;)c[e].rowData==g&&c.splice(e,1);break}}};k.commitUpdateAll=function(){for(var a=this.that,f=this.options.trackModel.dirtyClass,
b=this.udata,d=0,c=b.length;d<c;d++){var g=b[d],e=g.oldRow,g=g.rowData,h;for(h in e)a.removeClass({rowData:g,dataIndx:h,cls:f})}this.udata=[]};k.commitAddAll=function(){this.adata=[]};k.commitDeleteAll=function(){for(var a=this.ddata,f=this.udata,b=f.length,d,c=a.length,g=0;0<b&&g<c;g++){for(d=a[g].rowData;b--;)f[b].rowData==d&&f.splice(b,1);b=f.length}a.length=0};k.commit=function(a){var f=this.that,b=a?a.history:null,b=null==b?!1:b,d=[],d=[],c=[],g=f.options.dataModel.recIndx;if(null==a)this.commitAddAll(),
this.commitUpdateAll(),this.commitDeleteAll();else{var e=a.type;a=a.rows;"add"==e?a?d=this.commitAdd(a,g):this.commitAddAll():"update"==e?a?c=this.commitUpdate(a,g):this.commitUpdateAll():"delete"==e&&(a?this.commitDelete(a,g):this.commitDeleteAll())}d=d.concat(c);d.length&&(f._digestData({source:"commit",checkEditable:!1,track:!1,history:b,rowList:d}),f.refreshView())};k.rollbackAdd=function(a,f){for(var b=this.adata,d=[],c=0,g=b.length;c<g;c++)d.push({type:"delete",rowData:b[c].rowData});this.adata=
[];return d};k.rollbackDelete=function(a,f){for(var b=this.ddata,d=[],c=b.length-1;0<=c;c--){var g=b[c];d.push({type:"add",rowIndx:g.rowIndx,newRow:g.rowData})}this.ddata=[];return d};k.rollbackUpdate=function(a,f){for(var b=this.that,d=this.options.trackModel.dirtyClass,c=this.udata,g=[],e=0,h=c.length;e<h;e++){var k=c[e],l=k.rowData,n={},r=k.oldRow;if(null!=k.recId){var k=[],p;for(p in r)n[p]=l[p],k.push(p);b.removeClass({rowData:l,dataIndx:k,cls:d,refresh:!1});g.push({type:"update",rowData:l,newRow:r,
oldRow:n})}}this.udata=[];return g};k.rollback=function(a){var f=this.that,b=f.options.pageModel,d=a&&null!=a.refresh?a.refresh:!0;a=a&&null!=a.type?a.type:null;var c=[],c=[],g=[],e=[],h=f.options.dataModel.data;if(null==a||"update"==a)g=this.rollbackUpdate(b,h);if(null==a||"delete"==a)c=this.rollbackDelete(b,h);if(null==a||"add"==a)e=this.rollbackAdd(b,h);c=c.concat(e,g);f._digestData({history:!1,allowInvalid:!0,checkEditable:!1,source:"rollback",track:!1,rowList:c});d&&f.refreshView()};n=n.pqGrid.prototype;
n.getChanges=function(a){this.blurEditor({force:!0});if(a){var f=a.format;if(f){if("byVal"==f)return this.iUCData.getChangesValue(a);if("raw"==f)return this.iUCData.getChangesRaw()}}return this.iUCData.getChanges()};n.rollback=function(a){this.blurEditor({force:!0});this.iUCData.rollback(a)};n.isDirty=function(a){return this.iUCData.isDirty(a)};n.commit=function(a){this.iUCData.commit(a)};n.updateRow=function(a){for(var f=a.rowList||[{rowIndx:a.rowIndx,newRow:a.newRow||a.row,rowData:a.rowData,rowIndxPage:a.rowIndxPage}],
b=[],d=0,c=f.length;d<c;d++){var g=this.normalize(f[d]),e=g.newRow,h=g.rowData,k={};if(h){for(var l in e)k[l]=h[l];g.oldRow=k;g.type="update";b.push(g)}}if(!b.length||!1===this._digestData({source:a.source||"update",history:a.history,checkEditable:a.checkEditable,track:a.track,allowInvalid:a.allowInvalid,rowList:b}))return!1;!1!==a.refresh&&(1<b.length?this.refresh():this.refreshRow({rowIndx:b[0].rowIndx}))};n.getRecId=function(a){a.dataIndx=this.options.dataModel.recIndx;a=this.getCellData(a);return null==
a?null:a};n.getCellData=function(a){var f=a.rowData||this.getRowData(a);a=a.dataIndx;return f?f[a]:null};n.getRowData=function(a){if(!a)return null;var f=a.rowData;if(null!=f)return f;f=a.recId;if(null==f){var f=a.rowIndx,f=null!=f?f:a.rowIndxPage+this.rowIndxOffset,b=this.get_p_data()[f];return b}b=this.options.dataModel;a=b.recIndx;for(var d=b.data,c=0,g=d.length;c<g;c++)if(b=d[c],b[a]==f)return b;return null};n.deleteRow=function(a){for(var f=a.rowList||[{rowIndx:a.rowIndx,rowIndxPage:a.rowIndxPage}],
b=[],d=0,c=f.length;d<c;d++){var g=this.normalize(f[d]);g.oldRow=g.rowData;g.type="delete";b.push(g)}if(!b.length)return!1;this._digestData({source:a.source||"delete",history:a.history,track:a.track,rowList:b});!1!==a.refresh&&this.refreshView()};n.addRow=function(a){var f=a.rowList||[{rowIndx:a.rowIndx,rowIndxPage:a.rowIndxPage,newRow:a.newRow||a.rowData}],b=[],d=this.options.dataModel,c=d.data;null==c&&(d.data=[],c=d.data);for(var d=0,g=f.length;d<g;d++){var e=this.normalize(f[d]);e.type="add";
b.push(e)}if(!b.length||!1===this._digestData({source:a.source||"add",history:a.history,track:a.track,checkEditable:a.checkEditable,rowList:b}))return!1;!1!==a.refresh&&this.refreshView();a=b[0].rowIndx;return null==a?c.length-1:a}})(jQuery);
(function(l){var n=function(a){this.focusSelection=null};n.prototype.inViewRow=function(a){var f=this.that,b=f.finalV;return a<f.options.freezeRows?!0:a>=f.initV&&a<=b};var k=function(a){this.that=a;this.options=a=a.options;this.selection=[];this.hclass=" pq-state-select "+(a.bootstrap.on?"":"ui-state-highlight")};l.paramquery.cRows=k;var c=function(a){var f=a.options;this.that=a;this.selection=[];this.hclass="pq-state-select "+(f.bootstrap.on?"":"ui-state-highlight")};l.paramquery.cCells=c;c=c.prototype=
new n;n=k.prototype=new n;n.isSelected=function(a){return(a=a.rowData||this.that.getRowData(a))?!0===a.pq_rowselect:null};n.selectRange=function(a){var f=a.range,b=f.r1,f=f.r2;a=a.evt;var d=[];if(b>f)var c=b,b=f,f=c;for(;b<=f;b++)d.push({rowIndx:b});this.add({rows:d,evt:a})};c.removeAll=function(a){var f=this.that;a=f.get_p_data();var b=this.hclass;if(a&&a.length)for(f.$tbl&&f.$tbl.children().children().children().removeClass(b),f=0,b=a.length;f<b;f++){var d=a[f];d&&delete d.pq_cellselect}};n.removeAll=
function(a){a=a||{};var f=this.that,b=a.all,d=this.hclass,c=f.get_p_data();if(c&&c.length)for(a.refresh&&f.$tbl&&f.$tbl.children().children().removeClass(d),c=b?c:f.pdata,a=0,f=c.length;a<f;a++)(b=c[a])&&delete b.pq_rowselect};c.isSelected=function(a){var f=this.that,b=a.rowData||f.getRowData(a),d=a.dataIndx;a=a.colIndx;if(null==a&&null==d||null==b)return null;d=null==d?f.colModel[a].dataIndx:d;return!0==(b.pq_cellselect&&b.pq_cellselect[d])};n.getSelection=function(){for(var a=this.that,f=a.selection().address(),
b=[],d=0,c=f.length;d<c;d++){var g=f[d];if("row"==g.type)for(var e=g.r2,g=g.r1;g<=e;g++){var h=a.getRowData({rowIndx:g});b.push({rowIndx:g,rowData:h})}}return b};c.getSelection=function(){for(var a=this.that,f=a.selection(),b=a.colModel,f=f.address(),d=[],c=0,g=f.length;c<g;c++){var e=f[c],h=e.type;if("block"==h||"cell"==h||"column"==h)for(var h=e.r2,k=e.c1,l=e.c2,e=e.r1;e<=h;e++)for(var n=a.getRowData({rowIndx:e}),r=k;r<=l;r++)d.push({rowIndx:e,rowData:n,colIndx:r,dataIndx:b[r].dataIndx})}return d};
c.inViewCell=function(a,f){var b=this.that,d=b.options.freezeCols;return this.inViewRow(a)?f<d||f>=b.initH&&f<=b.finalH:!1};c._add=function(a){var f=this.that;a=f.normalize(a);var b=a.rowIndxPage,d=a.rowData,c,g=a.colIndx,e=a.dataIndx,h=this.isSelected({rowData:d,dataIndx:e});if(null==h)return!1;var k=f.iMerge.ismergedCell(a.rowIndx,g)||this.inViewCell(b,g);!1===h&&(k&&(f=f.getCell({rowIndxPage:b,colIndx:g}))&&f.addClass(this.hclass),c=(d.pq_cellselect=d.pq_cellselect||{})[e]=!0);if(c)return a};n._add=
function(a){var f=this.that,b=f.normalize(a),d=b.rowIndxPage;a=b.rowData;var c=this.isSelected({rowData:a});b.rowIndxPage=d;if(null==c)return!1;b=this.inViewRow(d);!1===c&&(!a.pq_hidden&&b&&(f=f.getRow({rowIndxPage:d}),f.length&&f.addClass(this.hclass)),a.pq_rowselect=!0)};c.add=function(a){this._add(a)};n.add=function(a){var c=a.rows;if(c&&"function"==typeof c.push){a=0;for(var b=c.length;a<b;a++){var d=c[a];d.trigger=!1;this._add(d)}}else this._add(a)};n._remove=function(a){var c=this.that,b=c.normalize(a);
a=b.rowIndx;var d=b.rowIndxPage,m=b.rowData,b=b.$tr;if(this.isSelected({rowData:m}))return this.inViewRow(d)&&(b=c.getRow({rowIndxPage:d}))&&(b.removeClass(this.hclass),b.removeAttr("tabindex")),m.pq_rowselect=!1,{rowIndx:a,rowData:m}};n.remove=function(a){var c=a.rows;if(c&&"function"==typeof c.push){a=0;for(var b=c.length;a<b;a++){var d=c[a];d.trigger=!1;this._remove(d)}}else this._remove(a)};c.selectBlock=function(a){var c=this.that,b=this.hclass,d=a.range,m=d.r1,g=d.c1,e=d.r2,d=d.c2,h=c.initH,
k=c.finalH,n=c.options.freezeCols,z=[],r=c.colModel,p=[];a=a.remove?!0:!1;for(var v=g;v<=d;v++)z[v]=r[v].dataIndx;for(;m<=e;m++)if(r=c.normalize({rowIndx:m}),v=r.rowData,r=r.rowIndxPage,v){var q=v.pq_cellselect=v.pq_cellselect||{};if(this.inViewRow(r))for(v=g;v<=d;v++){var t=z[v];if(a&&q[t]||!a&&!q[t]){if(v<n||v>=h&&v<=k){var s=c.getCell({rowIndxPage:r,colIndx:v});s.length&&p.push(s[0])}q[t]=a?void 0:!0}}else for(v=g;v<=d;v++)t=z[v],q[t]=a?void 0:!0}if(p.length)l(p)[a?"removeClass":"addClass"](b)}})(jQuery);
(function(l){var n=!0;l(function(){var c=l("<input type='checkbox' style='position:fixed;left:-50px;top:-50px;'/>").appendTo(document.body);c[0].indeterminate=!0;c.on("change",function(){n=!1});c.click();c.remove()});var k=(l.paramquery.cCheckBoxColumn=function(c,a){var f=this;this.that=c;this.options=c.options;this.column=a;a.cb=l.extend({},{all:!1,header:!1,select:!1,check:!0,uncheck:!1},a.cb);a._render=function(b){var d=b.rowData;if(!d.pq_gtitle&&!d.pq_gsummary)return"<input type='checkbox' "+
(a.cb.check===b.cellData?"checked":"")+" />"};this.dataIndx=a.dataIndx;var b=c.element,d=c.eventNamespace;c.on("dataAvailable",function(){c.one("dataReady",function(){return f._onDataReady()})}).on("dataReady",function(){f.setValCBox()});b.on("change"+d,function(a){var b=a.target;if("checkbox"==b.type&&l(b).closest(".pq-grid")[0]==this)return f.onCheckBoxChange(a)});c.on("cellKeyDown",function(a,b){return f.onCellKeyDown(a,b)});c.on("refreshHeader",function(a,b){return f.refreshHeader(a,b)})}).prototype=
new l.paramquery.cClass;k.hasHeaderChkBox=function(){return this.column.cb.header};k.setValCBox=function(){if(this.hasHeaderChkBox()){var c=this.that,a=this.options,f=this.dataIndx,b=this.column.cb,d=b.all,m=c.rowIndxOffset,m="remote"!=a.pageModel.type&&d?0:m,a=d?a.dataModel.data:c.pdata,d=null,g=0,e=0;if(a){for(var h=0,k=0,l=a.length;k<l;k++){var n=a[k],r=k+m;c.isEditableRow({rowIndx:r})&&c.isEditableCell({rowIndx:r,dataIndx:f})&&(h++,n[f]===b.check?g++:e++)}g==h&&h?d=!0:e==h&&(d=!1);this.$inp&&
this.$inp.pqval({val:d})}}};k.onHeaderChange=function(c){for(var a=l(c.target),f=this.that,b=this.column,d=b.dataIndx,m=f.options,g=b.cb,e=g.all,h=e?m.dataModel.data:f.pdata,k=f.rowIndxOffset,k="remote"!=m.pageModel.type&&e?0:k,m=[],b={column:b,dataIndx:d,source:"header"},a=a[0].checked,e=0,n=h.length;e<n;e++){var z=e+k,r=h[e],p={},v={};p[d]=a?g.check:g.uncheck;v[d]=r[d];m.push({rowIndx:z,rowData:r,newRow:p,oldRow:v,type:"update"})}d={rowList:m,source:"checkbox"};d.history=d.track=g.select?!1:null;
b.check=a;b.rows=m;if(!1===f._trigger("beforeCheck",c,b)||!1===f._digestData(d))return f.refreshHeader(),!1;f.refresh({header:!1});m=b.rows=d.rowList;f._trigger("check",c,b);g.select&&f.selection({type:"row",method:a?"add":"remove",rows:m})};k.refreshHeader=function(c,a){var f=this;if(this.hasHeaderChkBox()){var b=this.that;if(b.pdata&&(b=b.getCellHeader({dataIndx:this.dataIndx}))){var d=this.$inp=b.find("input");this.setValCBox();if(n)d.on("click",function(a){null==d.data("pq_value")&&(d[0].checked=
!0,d.data("pq_value",!0),f.onHeaderChange(a))});d.on("change",function(a){f.onHeaderChange(a)})}}};k._onDataReady=function(){var c=this.that,a=this.options,f=a.dataModel.data,a="remote"==a.pageModel.type?c.rowIndxOffset:0,b=this.column,d=b.cb,m=b.dataIndx;if(null!=m&&f){for(var g=[],e=0,h=f.length;e<h;e++){var k=f[e];k[m]===d.check&&g.push({rowIndx:e+a,rowData:k})}if(!1!==c._trigger("check",null,{rows:g,column:b,dataIndx:m,source:"dataAvailable"})&&d.select){for(e=0;e<h;e++)k=f[e],k[m]===d.check&&
(k.pq_rowselect=!0);c.selection().refresh()}}this.setValCBox()};k.rowSelect=function(c,a){var f=this.that,b=a.rows,d=a.rowData,m=this.dataIndx;if(b)for(var g=0,e=b.length;g<e;g++){var d=b[g],h=d.rowIndx,d=d.rowData;d[m]=!0;f.refreshCell({rowIndx:h,dataIndx:m})}else d&&(d[m]=!0,h=a.rowIndx,f.refreshCell({rowIndx:h,dataIndx:m}));this.setValCBox()};k.rowUnSelect=function(c,a){var f=this.that,b=a.rows,d=a.rowData,m=this.dataIndx;if(b)for(var g=0,e=b.length;g<e;g++){var d=b[g],h=d.rowIndx,d=d.rowData;
d[m]=!1;f.refreshCell({rowIndx:h,dataIndx:m})}else d&&(d[m]=!1,h=a.rowIndx,f.refreshCell({rowIndx:h,dataIndx:m}));this.setValCBox()};k.onCheckBoxChange=function(c){var a=this.that,f=this.column.cb,b=l(c.target),d=b.closest(".pq-grid-cell");if(d.length){var d=a.getCellIndices({$td:d}),d=a.normalize(d),m=d.rowData,g=d.rowIndx,e=d.dataIndx;if(e==this.dataIndx){var b=b[0].checked,h={},k={};h[e]=b?f.check:f.uncheck;k[e]=m[e];m=[{rowData:m,rowIndx:g,oldRow:k,newRow:h,type:"update"}];d.check=b;d.rows=m;
if(!1===a._trigger("beforeCheck",c,d))return a.refreshCell({rowIndx:g,dataIndx:e}),!1;m={source:"checkbox",rowList:m};m.history=m.track=f.select?!1:null;if(!1===a._digestData(m))return a.refreshCell({rowIndx:g,dataIndx:e}),!1;a.refreshRow({rowIndx:g});m=d.rows=m.rowList;a._trigger("check",c,d);f.select&&a.selection({type:"row",method:b?"add":"remove",rows:m});this.setValCBox()}}};k.onCellKeyDown=function(c,a){if(a.dataIndx==this.dataIndx&&(13==c.keyCode||32==c.keyCode))return l(c.originalEvent.target).find("input").click(),
!1}})(jQuery);
(function(){for(var l=0,n=["moz","webkit"],k=0;!window.requestAnimationFrame&&k<n.length;k++)window.requestAnimationFrame=window[n[k]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[n[k]+"CancelAnimationFrame"]||window[n[k]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(c){var a=(new Date).getTime(),a=Math.max(0,16-(a-l));return window.setTimeout(function(){l=(new Date).getTime();c()},a)});window.cancelAnimationFrame||(window.cancelAnimationFrame=
function(c){clearTimeout(c)})})();
(function(l){function n(c){this.that=c;var a=this;this.borderBottomExtra=this.borderBottom=this.borderLeftExtra=this.borderLeft=this.borderTopExtra=this.borderTop=this.borderRightExtra=this.borderRight=this.scrollLeft=this.scrollTop=0;this.maxBorder=5E3;this.rowht=c.options.rowHeight;this.colwd=60;c.on("contMouseDown",function(c,b){return a._onContMouseDown(c,b)}).on("mouseDrag",function(c,b){return a._onMouseDrag(c,b)}).on("mouseStop",function(c,b){return a._onMouseStop(c,b)}).on("mousePQUp",function(c,
b){return a._onMousePQUp(c,b)}).on("rowMouseDown",function(c,b){return a._onRowMouseDown(c,b)}).on("cellMouseDown",function(c,b){return a._onCellMouseDown(c,b)}).on("refresh",function(a,b){setTimeout(function(){c.element&&c.focus()},0)}).on("cellMouseEnter",function(c,b){return a._onCellMouseEnter(c,b)}).on("rowMouseEnter",function(c,b){return a._onRowMouseEnter(c,b)})}l.paramquery.cMouseSelection=n;var k=n.prototype=new l.paramquery.cClass;k.inViewPort=function(c){var a=this.that.iRefresh,f=a.getEContHt(),
a=a.getEContWd()+1;c=c[0];var b=this.scrollLeft;if(f>=c.offsetTop+c.offsetHeight+this.marginTop)if("TD"==c.nodeName.toUpperCase()){if(a>=c.offsetLeft+c.offsetWidth+b)return!0}else return!0};k._onCellMouseDown=function(c,a){var f=this.that,b=a.rowIndx,d=f.iSelection,m=a.colIndx,g=f.options.selectionModel,e=g.mode;if("cell"!=g.type)f.focus(a);else if(null!=m)return d=d.address()[0],c.shiftKey&&"single"!=e&&d?(e=d.firstR,d=d.firstC,f.range({r1:e,c1:d,r2:b,c2:m,firstR:e,firstC:d}).select()):(this.mousedown=
{r1:b,c1:m},f.range({r1:b,c1:m,firstR:b,firstC:m}).select()),f.focus(a),!0};k._onCellMouseEnter=function(c,a){var f=this.that,b=f.options.selectionModel,d=b.type,b=b.mode;if(this.mousedown&&"single"!=b){if("cell"==d){var d=this.mousedown,b=d.r1,m=d.c1,g=a.rowIndx,e=a.colIndx;if(b==g&&m==e||d.r2==g&&d.c2==e)return;this.mousedown.r2=g;this.mousedown.c2=e;f.scrollCell({rowIndx:g,colIndx:e});f.range({r1:b,c1:m,r2:g,c2:e,firstR:b,firstC:m}).select()}f.focus(a)}};k._onRowMouseEnter=function(c,a){var f=
this.that,b=f.options.selectionModel,d=b.mode;"row"==b.type&&this.mousedown&&"single"!=d&&(b=this.mousedown.r1,d=a.rowIndx,b==d?f.range({r1:b,firstR:b},!1).select():this.mousedown.r2!=d&&(this.mousedown.r2=d,f.scrollRow({rowIndx:d}),f.range({r1:b,r2:d,firstR:b},!1).select()))};k._onRowMouseDown=function(c,a){var f=this.that,b=a.rowIndx,d=f.iSelection,m;m=f.options.selectionModel;var g=l(c.originalEvent.target).hasClass("pq-grid-number-cell"),e=m.mode;if(("row"==m.type||m.row&&g)&&null!=b)return m=
f.iSelection.address(),c.shiftKey?((d=m.length)&&"row"==m[d-1].type&&(d=m[d-1],d.r1=d.firstR,d.r2=b,d.c1=d.c2=d.type=void 0),f.range(m).select()):(c.ctrlKey||c.metaKey)&&"single"!=e?(m=f.iRows.isSelected({rowIndx:b}),d[m?"removeRow":"add"]({r1:b,firstR:b})):(this.mousedown={r1:b,y1:c.pageY,x1:c.pageX},f.range({r1:b,firstR:b},!1).select()),g&&setTimeout(function(){f.focus({rowIndxPage:a.rowIndxPage,colIndx:f.getFirstVisibleCI(!0)})},0),!0};k._onContMouseDown=function(c,a){this.that.options.swipeModel.on&&
(this._stopSwipe(!0),this.swipedown={x:c.pageX,y:c.pageY});return!0};k._onMousePQUp=function(c,a){this.mousedown=null};k._stopSwipe=function(c){c&&(this.swipedownPrev=this.swipedown=null);window.clearInterval(this.intID);window.cancelAnimationFrame(this.intID);this.intID=null};k._onMouseStop=function(c,a){var f=this,b=this.that;if(this.swipedownPrev){var d=b.options.swipeModel,b=this.swipedownPrev,m=b.ts,g=(new Date).getTime()-m,e=c.pageX,h=c.pageY,k=e-b.x,l=h-b.y;if(Math.sqrt(k*k+l*l)/g>d.ratio){var n=
0,r=d.repeat;f._stopSwipe();var p=function(){n+=d.speed;r--;f._onMouseDrag({pageX:e+n*k/g,pageY:h+n*l/g});0<r?f.intID=window.requestAnimationFrame(p):f._stopSwipe(!0)};p()}else f.swipedown=null,f.swipedownPrev=null}};k._onMouseDrag=function(c,a){var f=this.that.options;if(this.swipedown){var b=this.swipedown,d=b.x,k=b.y,g=c.pageX,e=c.pageY;this.swipedownPrev={x:d,y:k,ts:(new Date).getTime()};var h=f.scrollModel.smooth;if(!f.virtualY||h)this.scrollVertSmooth(k,e),this.syncScrollBarVert();if(!f.virtualX||
h)this.scrollHorSmooth(d,g),this.syncScrollBarHor();b.x=g;b.y=e}return!0};k.updateTableY=function(c){if(0==c)return!1;var a=this.that,f=this.getTableForVertScroll(),a=a.iRefresh.getEContHt();if(!f||!f.length)return!1;var b=f.data("offsetHeight")-1,d=this.scrollTop-c;this.setScrollTop(0>d?0:0>c&&0<a-b+d?b-a:d,f,a);return!0};k.setScrollTop=function(c,a,f){0<=c&&(this.scrollTop=c=Math.round(c),a.parent("div").scrollTop(c))};k.getScrollLeft=function(c){return this.scrollLeft};k.getScrollTop=function(c){return this.scrollTop};
k.setScrollLeft=function(c,a,f,b){0<=c&&(this.scrollLeft=c=Math.round(c),f=f?f.parent():l(),f=f.add(a?a.parent("div"):l()),f.scrollLeft(c))};k.scrollVertSmooth=function(c,a){c!=a&&this.updateTableY(a-c)};k.scrollHorSmooth=function(c,a){if(c!=a){var f=this.that,b=f.options,d=a-c,k=this.getTableForHorScroll(),g=this.getTableHeaderForHorScroll(),f=f.iRefresh.getEContWd();if(k||g){var e=k?k:g,b=b.virtualX?this.getScrollWidth(e):e.data("scrollWidth"),d=this.scrollLeft-d;this.setScrollLeft(0>d?0:0>b-f-
d?b-f:d,k,g,f)}}};k.syncViewWithScrollBarVert=function(c){if(null!=c){var a=this.that,f=this.getTableForVertScroll();if(f&&f.length){a.options.editModel.indices&&a.blurEditor({force:!0});var b=f.data("offsetHeight"),a=a.iRefresh.getEContHt();if((c*=b-a)||0===c)0>c&&(c=0),this.setScrollTop(c,f,a)}}};k.syncViewWithScrollBarHor=function(c){if(null!=c){var a=this.that,f=this.getTableForHorScroll(),b=this.getTableHeaderForHorScroll();if(f||b){var d=a.options;d.editModel.indices&&a.blurEditor({force:!0});
var k=f?f:b,d=d.virtualX?this.getScrollWidth(k):k.data("scrollWidth"),a=a.iRefresh.getEContWd();c*=d-a;d&&a&&(0>c&&(c=0),this.setScrollLeft(c,f,b,a))}}};k.resetMargins=function(){this.scrollTop=this.scrollLeft=0};k.syncHeaderViewWithScrollBarHor=function(c){if(null!=c){var a=this.that,f=this.getTableHeaderForHorScroll();if(f){var b=a.options,d=b.freezeCols;b.editModel.indices&&a.blurEditor({force:!0});var b=f.data("scrollWidth"),k=a.iRefresh.getEContWd();c=a.calcWidthCols(d,c+d);b&&k&&(0>c&&(c=0),
f.css("marginLeft",-c))}}};k.syncScrollBarVert=function(){var c=this.that,a=this.getTableForVertScroll();if(a&&a.length){var a=a.data("offsetHeight"),f=c.iRefresh.getEContHt(),a=this.scrollTop/(a-f);0<=a&&1>=a&&c.vscroll.widget().hasClass("pq-sb-vert")&&c.vscroll.option("ratio",a)}};k.syncScrollBarHor=function(){var c=this.that,a=c.options,f=this.getTableForHorScroll(),b=this.getTableHeaderForHorScroll();if(f||b)f=f?f:b,a=a.virtualX?this.getScrollWidth(f):f.data("scrollWidth"),f=c.iRefresh.getEContWd(),
a=this.scrollLeft/(a-f),0<=a&&1>=a&&c.hscroll.widget().hasClass("pq-sb-horiz")&&c.hscroll.option("ratio",a)};k.getTableForVertScroll=function(){var c=this.that,a=c.pqpanes;if((c=c.$tbl)&&c.length)return a.h&&a.v?c=l([c[2],c[3]]):a.v?c=l([c[0],c[1]]):a.h&&(c=l(c[1])),c};k.getTableForHorScroll=function(){var c=this.that,a=c.pqpanes,f=[],b=c.$tbl;if(b&&b.length)return a.h&&a.v?f.push(b[1],b[3]):a.v?f.push(b[1]):a.h?f.push(b[0],b[1]):f.push(b[0]),c.tables.length&&(c=c.tables[0].$tbl,a.v?f.push(c[1]):
f.push(c[0])),l(f)};k.getTableHeaderForHorScroll=function(){var c=this.that,a=c.pqpanes;if((c=c.$tbl_header)&&c.length)return c=a.vH?l(c[1]):l(c[0]),c.parent()};k.scrollRowNonVirtual=function(c){var a=this.that,f=a.options,b=c.rowIndxPage,d=c.rowIndx;c=a.iRefresh.getEContHt();b=null==b?d-a.rowIndxOffset:b;f=parseInt(f.freezeRows);if(!(b<f)){var f=a.get$Tbl(b),k=a.getRow({rowIndxPage:b})[0];k&&(a=f[0].offsetTop+1,b=k.offsetHeight,d=this.getScrollTop(),k=k.offsetTop-1,0>a+k-d?(a=a+k+-1,this.setScrollTop(0>
a?0:a,f,c),this.syncScrollBarVert()):k+b-d>c&&(this.setScrollTop(b+k-c,f,c),this.syncScrollBarVert()))}};k.scrollColumnNonVirtual=function(c){var a=this.that,f=c.colIndx,f=null==f?a.getColIndx({dataIndx:c.dataIndx}):f,b=a.options.freezeCols;if(!(f<b)){c=a._calcRightEdgeCol(f).width;var f=a._calcRightEdgeCol(f-1).width,b=a._calcRightEdgeCol(b-1).width,d=this.getTableForHorScroll(),k=this.getTableHeaderForHorScroll(),a=a.iRefresh.getEContWd(),g=this.scrollLeft;c-g>a?(this.setScrollLeft(c-a,d,k,a),this.syncScrollBarHor()):
f-b<g&&(this.setScrollLeft(f-b,d,k,a),this.syncScrollBarHor())}}})(jQuery);
(function(l){var n=null,k=!1,c="",a=l.paramquery.pqGrid.prototype,f=a.options,b={on:!0,header:!0,zIndex:1E4},d={on:!0},m={on:!0,compare:"byVal",select:!0,validate:!0,allowInvalid:!0,type:"replace"};f.pasteModel=f.pasteModel||m;f.copyModel=f.copyModel||b;f.cutModel=f.cutModel||d;a._setGlobalStr=function(a){c=a};a.canPaste=function(){return c?!0:!1};a.copy=function(){n=new g(this);n.copy();n=null};a.paste=function(a){n=new g(this);n.paste(a);n=null};a.cut=function(){n=new g(this);n.copy({cut:!0,source:"cut"});
n=null};a.clear=function(){this.iSelection.clear()};var g=function(a,b){this.that=a},a=g.prototype;a.createClipBoard=function(){var a=l("#pq-grid-excel-div"),a=this.that.options.copyModel,b=l("#pq-grid-excel");0==b.length&&(a=l("<div id='pq-grid-excel-div'  style='position:fixed;top:20px;left:20px;height:1px;width:1px;overflow:hidden;z-index:"+a.zIndex+";'/>").appendTo(document.body),b=l("<textarea id='pq-grid-excel' autocomplete='off' spellcheck='false' style='overflow:hidden;height:10000px;width:10000px;opacity:0' />").appendTo(a),
b.css({opacity:0}));b.select()};a.destroyClipBoard=function(){this.clearClipBoard();var a=this.that,b=l(window).scrollTop(),d=l(window).scrollLeft();a.focus();var a=l(window).scrollTop(),e=l(window).scrollLeft();b==a&&d==e||window.scrollTo(d,b)};a.clearClipBoard=function(){l("#pq-grid-excel").val("")};a.copy=function(a){return this.that.iSelection.copy(a)};a.paste=function(a){a=a||{};var b=this.that,d=a.dest,e=a.clip,f=e?e.length?e.val():"":c,f=f.replace(/\n$/,""),e=f.split("\n"),g=e.length,k,m=b.colModel,
n=b.readCell,s=b.options.pasteModel,x="row",w=!1,y=m.length;if(s.on&&0!=f.length&&0!=g){f={rows:e};if(!1===b._trigger("beforePaste",null,f))return!1;var C=s.type,A,D,E,x=(d?b.range(d):b.selection())._areas;(E=x.length?x[0]:null)&&b.getRowData({rowIndx:E.r1})?(x="row"==E.type?"row":"cell",A=E.r1,D=E.r2,d=E.c1,E=E.c2):(x="cell",E=d=D=A=0);var F,K;"replace"==C?(F=A,K=D-A+1<g?"extend":"repeat"):"append"==C?(F=D+1,K="extend"):"prepend"==C&&(F=A,K="extend");var L,g="extend"==K?g:D-A+1,N;A=0;a=a.rowList||
[];for(var H=D=0;H<g;H++){var G=e[A],O=H+F,I="replace"==C?b.getRowData({rowIndx:O}):null,J=I?{}:null,P={};void 0===G&&"repeat"===K&&(A=0,G=e[A]);A++;var M=G.split("\t");if(!k)if("cell"==x){k=M.length;L=E-d+1<M.length?"extend":"repeat";k="extend"==L?k:E-d+1;if(isNaN(k))throw"lenH NaN. assert failed.";k+d>y&&(k=y-d)}else k=y,d=0;var U=0,Q=0,G=0;N=k;for(var V=M.length,Q=0;Q<N;Q++){U>=V&&(U=0);var T=m[Q+d],W=M[U],R=T.dataIndx;!1===T.copy?(G++,"extend"==L&&N+d<y&&N++):(U++,P[R]=W,J&&(J[R]=n(I,T)))}!1==
l.isEmptyObject(P)&&(M="update",null==I&&(w=!0,M="add"),a.push({newRow:P,rowIndx:O,rowData:I,oldRow:J,type:M}),D++)}b._digestData({rowList:a,source:"paste",allowInvalid:s.allowInvalid,validate:s.validate});b[w?"refreshView":"refresh"]();s.select&&("cell"==x?b.range({r1:F,c1:d,r2:F+D-1,c2:"extend"==L?d+k-1+G:E}).select():b.range({r1:F,r2:F+D-1}).select());b._trigger("paste",null,f)}};l(document).unbind(".pqExcel").bind("keydown.pqExcel",function(a){if(a.ctrlKey||a.metaKey){var b=l(a.target);if(b.hasClass("pq-grid-row")||
b.hasClass("pq-grid-cell")||b.is("#pq-grid-excel")||b.hasClass("pq-grid-cont")){var d=b.closest(".pq-grid");if(n||b.length&&d.length){if(!n){try{var c=d.pqGrid("getInstance").grid;if(c.option("selectionModel.native"))return!0}catch(f){return!0}n=new g(c,b);n.createClipBoard()}"67"==a.keyCode||"99"==a.keyCode?n.copy({clip:l("#pq-grid-excel")}):"88"==a.keyCode?n.copy({cut:!0,clip:l("#pq-grid-excel")}):"86"==a.keyCode||"118"==a.keyCode?(k=!0,n.clearClipBoard(),window.setTimeout(function(){n&&(n.paste({clip:l("#pq-grid-excel")}),
n.destroyClipBoard(),n=null);k=!1},0)):(b=l("#pq-grid-excel"),b.length&&document.activeElement==b[0]&&n.that._onKeyPressDown(a))}}}else if(b=a.keyCode,d=l.ui.keyCode,b==d.UP||b==d.DOWN||b==d.LEFT||b==d.RIGHT||b==d.PAGE_UP||b==d.PAGE_DOWN){if(e)return!1;b=l(a.target);if(b.hasClass("pq-grid-row")||b.hasClass("pq-grid-cell"))e=!0}}).bind("keyup.pqExcel",function(a){var b=a.keyCode;k||!n||a.ctrlKey||a.metaKey||-1==l.inArray(b,[17,91,93,224])||(n.destroyClipBoard(),n=null);e&&(a=l(a.target),a.hasClass("pq-grid-row")||
a.hasClass("pq-grid-cell")||(e=!1))});var e=!1})(jQuery);
(function(l){var n=l.paramquery.pqGrid.prototype.options,k={on:!0,checkEditable:!0,checkEditableAdd:!1,allowInvalid:!0};n.historyModel=n.historyModel||k;n=(l.paramquery.cHistory=function(c){var a=this;this.that=c;this.options=c.options;this.records=[];this.id=this.counter=0;c.on("keyDown",function(c,b){return a._onKeyDown(c,b)}).on("dataAvailable",function(c,b){"filter"!=b.source&&a.reset()})}).prototype=new l.paramquery.cClass;n._onKeyDown=function(c,a){var f=c.ctrlKey||c.metaKey;if(f&&"90"==c.keyCode)return this.undo(),
!1;if(f&&"89"==c.keyCode)return this.redo(),!1};n.resetUndo=function(){if(0==this.counter)return!1;this.counter=0;this.that._trigger("history",null,{type:"resetUndo",num_undo:0,num_redo:this.records.length-this.counter,canUndo:!1,canRedo:!0})};n.reset=function(){if(0==this.counter&&0==this.records.length)return!1;this.records=[];this.id=this.counter=0;this.that._trigger("history",null,{num_undo:0,num_redo:0,type:"reset",canUndo:!1,canRedo:!1})};n.increment=function(){var c=this.records,a=c.length;
this.id=a?c[a-1].id+1:0};n.push=function(c){var a=this.canRedo(),f=this.records,b=this.counter;f.length>b&&f.splice(b,f.length-b);f[b]=l.extend({id:this.id},c);this.counter++;c=this.that;var d,k;1==this.counter&&(d=!0);a&&this.counter==f.length&&(k=!1);c._trigger("history",null,{type:"add",canUndo:d,canRedo:k,num_undo:this.counter,num_redo:0})};n.canUndo=function(){return 0<this.counter?!0:!1};n.canRedo=function(){return this.counter<this.records.length?!0:!1};n.processCol=function(c,a){var f=this.that;
if(c.length){var b="add"==c.type;f[(a?b:!b)?"addColumn":"deleteColumn"]({colList:c,history:!1})}};n.undo=function(){var c=this.canRedo(),a=this.that,f=!1,b=this.options.historyModel,d=this.records;if(0<this.counter)this.counter--;else return!1;for(var k=d[this.counter],d=(d=k.rowList)?d:[],k=(k=k.colList)?k:[],g=[],e=0,h=d.length;e<h;e++){var l=d[e],n=l.newRow,z=l.rowData,r=l.type,p=l.oldRow,l=l.rowIndx;"update"==r?(l=a.getRowIndx({rowData:z}).rowIndx,g.push({type:r,rowIndx:l,rowData:z,oldRow:n,newRow:p})):
"add"==r?(f=!0,g.push({type:"delete",rowData:n})):"delete"==r&&(f=!0,g.push({type:"add",rowIndx:l,newRow:z}))}k.length?this.processCol(k):(a._digestData({history:!1,source:"undo",checkEditable:b.checkEditable,checkEditableAdd:b.checkEditableAdd,allowInvalid:b.allowInvalid,rowList:g}),a[f?"refreshView":"refresh"]({source:"undo"}));var v,q;!1===c&&(v=!0);0==this.counter&&(q=!1);a._trigger("history",null,{canUndo:q,canRedo:v,type:"undo",num_undo:this.counter,num_redo:this.records.length-this.counter});
return!0};n.redo=function(){var c=this.canUndo(),a=this.that,f=this.options.historyModel,b=this.counter,d=this.records;if(b==d.length)return!1;for(var k=!1,g=d[b],b=(b=g.rowList)?b:[],g=(g=g.colList)?g:[],e=[],h=0,l=b.length;h<l;h++){var n=b[h],z=n.newRow,r=n.rowData,p=n.type,v=n.oldRow,n=n.rowIndx;"update"==p?(n=a.getRowIndx({rowData:r}).rowIndx,e.push({type:p,rowIndx:n,rowData:r,oldRow:v,newRow:z})):"add"==p?(k=!0,e.push({type:"add",rowIndx:n,newRow:z})):"delete"==p&&(k=!0,e.push({type:"delete",
rowData:r}))}g.length?this.processCol(g,!0):(a._digestData({history:!1,source:"redo",checkEditable:f.checkEditable,checkEditableAdd:f.checkEditableAdd,allowInvalid:f.allowInvalid,rowList:e}),a[k?"refreshView":"refresh"]({source:"redo"}));this.counter<d.length&&this.counter++;var q,t;!1==c&&(q=!0);this.counter==this.records.length&&(t=!1);a._trigger("history",null,{canUndo:q,canRedo:t,type:"redo",num_undo:this.counter,num_redo:this.records.length-this.counter});return!0};l.paramquery.pqGrid.prototype.history=
function(c){return this.iHistory[c.method](c)}})(jQuery);
(function(l){var n=l.paramquery;n.filter=function(){var a={begin:{text:"Begins With",TR:!0,string:!0},between:{text:"Between",TR:!0,string:!0,date:!0,number:!0},notbegin:{text:"Does not begin with",TR:!0,string:!0},contain:{text:"Contains",TR:!0,string:!0},notcontain:{text:"Does not contain",TR:!0,string:!0},equal:{text:"Equal To",TR:!0,string:!0,bool:!0},notequal:{text:"Not Equal To",TR:!0,string:!0},empty:{text:"Empty",TR:!1,string:!0,bool:!0},notempty:{text:"Not Empty",TR:!1,string:!0,bool:!0},
end:{text:"Ends With",TR:!0,string:!0},notend:{text:"Does not end with",TR:!0,string:!0},less:{text:"Less Than",TR:!0,number:!0,date:!0},lte:{text:"Less than or equal",TR:!0,number:!0,date:!0},range:{TR:!0,string:!0,number:!0,date:!0},regexp:{TR:!0,string:!0,number:!0,date:!0},great:{text:"Great Than",TR:!0,number:!0,date:!0},gte:{text:"Greater than or equal",TR:!0,number:!0,date:!0}};return{conditions:a,getAllConditions:function(){var c=[],b;for(b in a)c.push(b);return c}(),getConditions:function(c){var b=
[],d;for(d in a)a[d][c]&&b.push(d);return b},getTRConditions:function(){var c=[],b;for(b in a)a[b].TR&&c.push(b);return c}(),getWTRConditions:function(){var c=[],b;for(b in a)a[b].TR||c.push(b);return c}()}}();n.filter.rules={};n.filter.rules.en={begin:"Begins With",between:"Between",notbegin:"Does not begin with",contain:"Contains",notcontain:"Does not contain",equal:"Equal To",notequal:"Not Equal To",empty:"Empty",notempty:"Not Empty",end:"Ends With",notend:"Does not end with",less:"Less Than",
lte:"Less than or equal",great:"Great Than",gte:"Greater than or equal"};var k=function(a){this.that=a;a.on("load",function(){var c=a.options.dataModel.dataUF;c&&(c.length=0)})};n.cFilterData=k;var c=k.prototype;k.conditions={equal:function(a,c){if(a==c)return!0},contain:function(a,c){if(-1!=a.indexOf(c))return!0},notcontain:function(a,c){if(-1==a.indexOf(c))return!0},empty:function(a){if(0==a.length)return!0},notempty:function(a){if(0<a.length)return!0},begin:function(a,c){if(0==(a+"").indexOf(c))return!0},
notbegin:function(a,c){if(0!=a.indexOf(c))return!0},end:function(a,c){var b=a.lastIndexOf(c);if(-1!=b&&b+c.length==a.length)return!0},notend:function(a,c){var b=a.lastIndexOf(c);if(-1==b||b+c.length!=a.length)return!0},regexp:function(a,c){if(c.test(a))return c.lastIndex=0,!0},notequal:function(a,c){if(a!=c)return!0},great:function(a,c){if(a>c)return!0},gte:function(a,c){if(a>=c)return!0},between:function(a,c,b){if(a>=c&&a<=b)return!0},range:function(a,c){if(-1!=l.inArray(a,c))return!0},less:function(a,
c){if(a<c)return!0},lte:function(a,c){if(a<=c)return!0}};k.convert=function(a,c){a=null==a?"":a;"string"==c?a=l.trim(a).toUpperCase():"date"==c?a=Date.parse(a):"integer"==c?a=parseInt(a):"float"==c?a=parseFloat(a):"bool"==c&&(a=String(a).toLowerCase());return a};c.isMatchCellSingle=function(a,c){var b=a.dataType,d=a.value,m=a.value2,g=a.cbFn,e=c[a.dataIndx],e="regexp"==a.condition?null==e?"":e:k.convert(e,b);return g(e,d,m)?!0:!1};c.isMatchRow=function(a,c,b){if(0==c.length)return!0;for(var d=0;d<
c.length;d++){var k=this.isMatchCell(c[d],a);if("OR"==b&&k)return!0;if("AND"==b&&!k)return!1}if("AND"==b)return!0;if("OR"==b)return!1};c.getQueryStringFilter=function(){var a=this.that,c=a.options,b=c.stringify,c=c.filterModel,d=c.mode,a=this.getFilterData({CM:a.colModel,location:"remote"}),k="";c&&c.on&&a&&(a.length?(c={mode:d,data:a},k=!1===b?c:JSON.stringify(c)):k="");return k};c.filterLocalData=function(a){a=a||{};var c=this.that,b=a.apply,b=null==b?!0:b;a=this.getFilterData({CM:b?c.colModel:
a.CM});var d=c.options,k=d.dataModel,g=c.iSort,e=k.data,h=[],l=[],n=k.dataUF,z=d.filterModel,r=z.multiple,d=z?z.mode:null;e||(e=k.data=[]);n||(n=k.dataUF=[]);!1===b&&(e=e.slice());if(n.length){for(var p=0,v=n.length;p<v;p++)e.push(n[p]);0==g.readSorter().length&&g.sortLocalData(e);n=k.dataUF=[]}else if(a.length)g.saveOrder();else return{data:e,dataUF:n};this.isMatchCell=r?this.isMatchCellMultiple:this.isMatchCellSingle;if(z.on&&d&&a&&a.length){if(e.length)for(p=0,v=e.length;p<v;p++)g=e[p],this.isMatchRow(g,
a,d)?h.push(g):l.push(g);e=h;n=l;b&&(k.data=e,k.dataUF=n)}b&&(c._queueATriggers.filter={ui:{type:"local",filter:a}});return{data:e,dataUF:n}};c.getFilterData=function(a){var c=a.CM;if(!c)throw"CM N/A";var b=c.length,d=a.location;a=this.that.options.filterModel.multiple;for(var k=n.filter.getAllConditions,g=n.filter.getTRConditions,e=[],h=n.cFilterData,u=function(a,b,d){return"function"==typeof a?!0:"between"==a?null!=b&&""!==b||null!=d&&""!==d?!0:!1:-1!=l.inArray(a,k)?null!=b&&""!==b||-1==l.inArray(a,
g)?!0:!1:!0},B=function(a,b){return"remote"==d?(null==a?"":a).toString():h.convert(a,b)},z=0;z<b;z++){var r=c[z],p=r.dataIndx,v=r.dataType,v=v&&"function"!=typeof v?v:"string",q=r.filter;if(a){if((q=r.filterModel)&&q.on){for(var t=[],s=q.mode,x=q.filters,r=0;r<x.length;r++){var q=x[r],w=q.value,y=q.condition;u(y,w)&&(w=B(w,v),t.push({value:w,condition:y}))}e.push({dataIndx:p,mode:s,dataType:v,filters:t})}}else if(q&&q.on&&(w=q.value,t=q.value2,y=q.condition,u(y,w,t))){if("between"==y)""===w||null==
w?(y="lte",w=B(t,v)):""===t||null==t?(y="gte",w=B(w,v)):(w=B(w,v),t=B(t,v));else if("regexp"==y)if("remote"==d)w=w.toString();else{if("string"==typeof w)try{var C=q.modifiers,C=C?C:"gi",w=new RegExp(w,C)}catch(A){w=/.*/}}else if("range"==y)if(null==w)continue;else if("string"==typeof w)w=B(w,v),w=w.split(/\s*,\s*/);else{if(w&&"function"==typeof w.push){if(0==w.length)continue;w=w.slice();r=0;for(q=w.length;r<q;r++)w[r]=B(w[r],v)}}else w=B(w,v);e.push({dataIndx:p,value:w,value2:t,condition:y,dataType:v,
cbFn:"remote"==d?"":"function"==typeof y?y:h.conditions[y]})}}return e}})(jQuery);
(function(l){l=(l.paramquery.cSort=function(k){this.that=k;this.sorters=[];this.tmpPrefix="pq_tmp_";this.cancel=!1}).prototype;l.cancelSort=function(){this.cancel=!0};l.resumeSort=function(){this.cancel=!1};l.readSorter=function(){var k=this.that,c=k.options,a=c.groupModel,f,k=k.columns,b=0,d,m,g=[];if(a.on)for(f=a.dataIndx,d=f.length,m=a.dir;b<d;b++)a=f[b],g.push({dataIndx:a,dir:m[b]?m[b]:"up"});f=c.sortModel;c=f.sorter;f=f.single;if(c&&(d=c.length)){for(;d--;)null==k[c[d].dataIndx]&&c.splice(d,
1);f&&c.length&&(c=[c[0]]);g=g.concat(c)}return g=pq.arrayUnique(g,"dataIndx")};l.setSingle=function(k){this.single=k};l.getSingle=function(){return this.single};l.readSingle=function(){return this.that.options.sortModel.single};l.writeSingle=function(k){this.that.options.sortModel.single=k};l.setCancel=function(k){this.cancel=k};l.getCancel=function(){return this.cancel};l.readCancel=function(){return this.that.options.sortModel.cancel};l.writeCancel=function(k){this.that.options.sortModel.cancel=
k};l.writeSorter=function(k){var c=this.that.options,a=c.sortModel,f=c.groupModel,c=f.dataIndx,b=f.dir;if(f.on){for(f=0;f<c.length;f++){var d=k[f];if(c[f]!=d.dataIndx)throw"gDataIndx!=sorter.dataIndx";b[f]=d.dir}k.splice(0,c.length)}a.sorter=k};l.refreshSorter=function(k){k=k||{};var c=k.sorter,a=c[0].dataIndx,f=c[0].dir,b=k.single,c=k.cancel,d=this.that.options.groupModel,m=d.dataIndx,g=d.on?m.length:0,e=-1;k=this.readSorter();if(null==b)throw"sort single N/A";if(d.on)for(d=0;d<g;d++)m[d]==a&&(e=
d);-1<e?k[e].dir="up"===k[e].dir?"down":"up":null!=a&&(b?k[g]&&k[g].dataIndx==a?(a=k[g].dir,a="up"===a?"down":c&&"down"===a?"":"up",""===a?k.length--:k[g].dir=a):k[g]={dataIndx:a,dir:f?f:"up"}:(g=this.inSorters(k,a),-1<g?(a=k[g].dir,"up"==a?k[g].dir="down":c&&"down"==a?k.splice(g,1):1==k.length?k[g].dir="up":k.splice(g,1)):k.push({dataIndx:a,dir:"up"})));return k};l.saveOrder=function(k){var c=this.that.options.dataModel;k=c.data;if(!(!k||!k.length||c.dataUF&&c.dataUF.length||this.getSorter().length&&
null!=k[0].pq_order))for(var c=0,a=k.length;c<a;c++)k[c].pq_order=c};l.getQueryStringSort=function(){if(this.cancel)return"";var k=this.sorters,c=this.that.options.stringify;return k.length?!1===c?k:JSON.stringify(k):""};l.getSorter=function(){return this.sorters};l.setSorter=function(k){this.sorters=k.slice(0)};l.inSorters=function(k,c){for(var a=-1,f=0;f<k.length;f++)if(k[f].dataIndx==c){a=f;break}return a};l.sortLocalData=function(k){for(var c=this.that,a=c.colModel,f=this.sorters,b=0;b<f.length;b++){var d=
f[b],m=c.getColIndx({dataIndx:d.dataIndx}),m=a[m],g=m.sortType;d.dataType=m.dataType;d.sortType=g}f.length||(f=[{dataIndx:"pq_order",dir:"up",dataType:"integer"}]);return this._sortLocalData(f,k)};l._sortLocalData=function(k,c){if(null==c)return[];if(0==c.length||!k||!k.length)return c;var a=this,f=a.tmpPrefix,b=a.that.options.sortModel,d=b.useCache,m=b.ignoreCase;(function(){for(var b=[],e=[],h=[],l=k.length,B=0;B<l;B++){var z=k[B],r=z.dataIndx,p="up"==z.dir?1:-1,v=z.sortType,z=(z=z.dataType)?z:
"string",z="string"==z&&m?"stringi":z,q=d&&"date"==z,t=q?f+r:r;e[B]=t;h[B]=p;b[B]=v?function(a,b){return function(d,c,e,f){return b(d,c,e,f,a)}}(v,n.sort_sortType):"integer"==z?n.sort_number:"float"==z?n.sort_number:"function"==typeof z?function(a,b){return function(d,c,e,f){return b(d,c,e,f,a)}}(z,n.sort_dataType):"date"==z?n["sort_date"+(q?"_fast":"")]:"bool"==z?n.sort_bool:"stringi"==z?n.sort_locale:n.sort_string;q&&a.useCache(c,z,r,t)}c=c.sort(function(a,d){for(var c=0,f=0;f<l&&(c=b[f](a,d,e[f],
h[f]),0==c);f++);return c});q&&setTimeout(a.removeCache(k,c),0)})();return c};l.useCache=function(k,c,a,f){c=n["get_"+c];for(var b=k.length;b--;){var d=k[b];d[f]=c(d[a])}};l.removeCache=function(k,c){var a=this.tmpPrefix;return function(){for(var f=k.length;f--;){var b=a+k[f].dataIndx,d=c.length;if(d&&c[0].hasOwnProperty(b))for(;d--;)delete c[d][b]}}};var n={get_date:function(k){var c;return k?isNaN(c=Date.parse(k))?0:c:0},sort_number:function(k,c,a,f){k=k[a];c=c[a];return((k?1*k:0)-(c?1*c:0))*f},
sort_date:function(k,c,a,f){k=k[a];c=c[a];k=k?Date.parse(k):0;c=c?Date.parse(c):0;return(k-c)*f},sort_date_fast:function(k,c,a,f){return(k[a]-c[a])*f},sort_dataType:function(k,c,a,f,b){return b(k[a],c[a])*f},sort_sortType:function(k,c,a,f,b){return b(k,c,a)*f},sort_string:function(k,c,a,f){k=k[a];c=c[a];a=0;k=k?k:"";c=c?c:"";k>c?a=1:k<c&&(a=-1);return a*f},sort_locale:function(k,c,a,f){k=k[a];c=c[a];return(k?k:"").localeCompare(c?c:"")*f},sort_bool:function(k,c,a,f){k=k[a];c=c[a];a=0;if(k&&!c||!1===
k&&null===c)a=1;else if(c&&!k||!1===c&&null===k)a=-1;return a*f}};pq.sortObj=n})(jQuery);
(function(l){function n(a){this.that=a;this.mc=null;var b=this,d=a.options;this.DM=d.dataModel;a.on("dataReady columnOrder groupShowHide",function(a,c){d.mergeCells&&"pager"!==c.source&&b.init()})}function k(a,b,d){var c=0,g=a.length;for(d=d>g?g:d;b<d;b++)!0!==a[b].hidden&&c++;return c}function c(a,b,d){var c=0,g=a.length;for(d=d>g?g:d;b<d;b++)!0!==a[b].pq_hidden&&c++;return c}l.paramquery.cMerge=n;var a=n.prototype=new l.paramquery.cClass;a.init=function(){for(var a=this.that,b=a.colModel,d=a.options.mergeCells||
[],m=a.get_p_data(),g=[],e=[],h=0,l=d.length;h<l;h++){var n=d[h],z=n.r1,r=z,p=m[z],v=n.c1,q=v,t=b[v],s=n.rc,x=n.cc;if(t&&p){if(t.hidden)a:{for(q=v;q<v+x;q++){t=b[q];if(!t){q=-1;break a}if(!t.hidden)break a}q=void 0}t=k(b,v,v+x);if(p.pq_hidden)a:{for(r=z;r<z+s;r++){p=m[r];if(!p){r=-1;break a}if(!p.pq_hidden)break a}r=void 0}p=c(m,z,z+s);if(!(1>p||1>t))for(g.push({r1:z,c1:v,rc:s,cc:x,e_rc:p,e_cc:t}),e[r]=e[r]||[],e[r][q]={show:!0,rowspan:p,colspan:t,o_rowspan:s,o_colspan:x,style:n.style,cls:n.cls,attr:n.attr,
r1:z,c1:v,v_r1:r,v_c1:q},n={show:!1,r1:z,c1:v,v_r1:r,v_c1:q},p=z;p<z+s;p++)for(e[p]=e[p]||[],t=v;t<v+x;t++)if(p!=r||t!=q)e[p][t]=n}}a._mergeCells=0<e.length;this.mc=e;this.mc2=g};a.isHidden=function(a,b){var d,c=this.mc;return c&&c[a]&&(d=c[a][b])&&!d.show?!0:!1};a.setData=function(a,b,d){var c,g=this.mc;g[a]&&(c=g[a][b])&&(c.data=d)};a.getData=function(a,b,d){var c,g=this.mc;if(g[a]&&(c=g[a][b]))return(a=c.data)?a[d]:null};a.removeData=function(a,b,d){var c,g=this.mc;g&&g[a]&&(c=g[a][b])&&(a=c.data)&&
(a[d]=null)};a.ismergedCell=function(a,b){var d=this.mc,c;return d&&d[a]&&(c=d[a][b])?(d=d[c.v_r1][c.v_c1],a==d.r1&&b==d.c1?{rowspan:d.o_rowspan,colspan:d.o_colspan}:!0):!1};a.isRootCell=function(a,b,d){var c=this.mc,g;if(c&&c[a]&&(g=c[a][b])){if("o"==d)return a==g.r1&&b==g.c1;var e=g.v_r1;g=g.v_c1;if("a"==d)return d=c[e][g],d.a_r1==a&&d.a_c1==b;if(e==a&&g==b)return d=c[e][g],{rowspan:d.rowspan,colspan:d.colspan}}};a.getRootCell=function(a,b,d){var c=this.that,g=this.mc,e;if(g&&g[a]&&(e=g[a][b])){"a"==
d?(a=e.v_r1,b=e.v_c1,d=g[a][b],d.a_r1&&(a=d.a_r1,b=d.a_c1)):"o"==d?(a=e.r1,b=e.c1):(a=e.v_r1,b=e.v_c1);d=c.colModel[b];var g=c.rowIndxOffset,h=a-g;0>h&&(h=0,a=g);return{rowIndxPage:h,colIndx:b,column:d,dataIndx:d.dataIndx,rowData:c.pdata[h],rowIndx:a,rowspan:e.rowspan,colspan:e.colspan}}return c.normalize({rowIndx:a,colIndx:b})};a.inflateRange=function(a,b,d,c){var g=this.that,e=!1,h=g.options,h=h.groupModel.on?g.rowIndxOffset+g.pdata.length-1:h.dataModel.data.length-1,g=g.colModel.length-1,k=this.mc2;
if(!k)return[a,b,d,c];var l=0,n=k.length;a:for(;l<n;l++){var r=k[l],p=r.r1,v=r.c1,q=p+r.rc-1,r=v+r.cc-1,q=q>h?h:q,r=r>g?g:r,t=p<=d&&q>d,s=v<b&&r>=b,x=v<=c&&r>c;if((p<a&&q>=a||t)&&r>=b&&v<=c||(s||x)&&q>=a&&p<=d){e=!0;a=p<a?p:a;b=v<b?v:b;d=q>d?q:d;c=r>c?r:c;break a}}return e?this.inflateRange(a,b,d,c):[a,b,d,c]};l.paramquery.pqGrid.prototype.calcVisibleRows=c;a.renderCell=function(a){var b=this.that,d=a.rowIndx,m=a.rowIndxPage,g=a.colIndx,e,h=this.mc,l;if(h[d]&&(l=h[d][g])){var n=l.v_r1,z=l.v_c1;e=
l.r1;var r=l.c1,p=b.options,v=b.colModel,q=b.rowIndxOffset,t=p.freezeCols,s=(p=p.freezeRows)?p+q:0,x=b.initH,w=b.initV;if(l.show||g==z&&m==w&&n>=s||g==z&&d==w&&n>=s||d==n&&g==x&&z>=t||d==w&&g==x&&z>=t&&n>=s){var y=e-q,m=b.pdata,b=b.get_p_data(),C=k(v,0,t);l=c(m,0,p);e={rowData:b[e],rowIndx:e,colIndx:r,column:v[r],rowIndxPage:y};h=h[n][z];r=h.colspan;y=h.rowspan;t&&g<t&&g+r>C?(z=r-k(v,t,x),v=k(v,g,t),r=Math.max(z,v)):r-=k(v,z,g);p&&d<s&&d+y>l+q?(n=y-c(m,p,w),q=c(m,d-q,p),y=Math.max(n,q)):y-=c(b,n,
d);h.a_r1=d;h.a_c1=g;e.rowspan=y;e.colspan=r;e.style=h.style;e.attr=h.attr;e.cls=h.cls}else return null}return e?e:a};a.getMergeCells=function(a,b,d){for(var c=this.that,g=c.options.mergeCells,e,h,c=c.rowIndxOffset,k=c+d,l=[],n=g?g.length:0,r=0;r<n;r++)if(d=g[r],e=d.r1,h=d.c1,!b||e>=c&&e<k)b&&(e-=c),e+=a,l.push({r1:e,c1:h,r2:e+d.rc-1,c2:h+d.cc-1});return l}})(jQuery);
(function(){var l=window.pq=window.pq||{};l.extend=function(a,d,c){var f=function(){};f.prototype=a.prototype;var f=d.prototype=new f,e=a.prototype,h;for(h in c){var k=e[h],l=c[h];f[h]=k?function(a,b){return function(){this._super=function(){return a.apply(this,arguments)};var d=b.apply(this,arguments);this._super=void 0;return d}}(k,l):l}f.constructor=d;f._base=a;f._bp=function(a){var b=arguments;Array.prototype.shift.call(b);return e[a].apply(this,b)}};var n=l.Range=function(a,d,c,f){if(null==a)throw"invalid param";
this.that=a;if(!1==this instanceof n)return new n(a,d,c,f);this._type=c?c:"range";this.init(d,f)},k=n.prototype;k._areas=[];k.init=function(a,d){d=!1!==d;if(a)if("function"==typeof a.push)for(var c=0,f=a.length;c<f;c++)this.init(a[c],d);else if(c=this._normal(a,d))f=this._areas,f.length?f.push(c):this._areas=[c]};k.address=function(){this.dirty&&this.refresh();return this._areas};k.areas=function(a){this.dirty&&this.refresh();var d=this.that,c=this._areas,c=null==a?c:c[a];return l.Range(d,c,"area")};
k.merge=function(a){a=a||{};var d=this.that,c=d.options.mergeCells,f,e,h=this._areas[0];h&&(f=h.r2-h.r1+1,e=h.c2-h.c1+1,1<f||1<e)&&(h.rc=f,h.cc=e,c.push(h),!1!==a.refresh&&d.refreshView())};k.unmerge=function(a){a=a||{};var d=this.that,c=d.options.mergeCells,f=this._areas[0];if(f){for(var e=0;e<c.length;e++){var h=c[e];if(h.r1==f.r1&&h.c1==f.c1){c.splice(e,1);break}}!1!==a.refresh&&d.refreshView()}};k.hide=function(a){a=a||{};for(var d=this.that,c=d.colModel,f=d.get_p_data(),e=this._areas,h=0,k=e.length;h<
k;h++){var l=e[h],n=l.type,r=l.r1,p=l.r2,v=l.c1,l=l.c2;if("column"==n)for(n=v;n<=l;n++)c[n].hidden=!0;else if("row"==n)for(n=r;n<=p;n++)f[n].pq_hidden=!0}!1!==a.refresh&&d.refreshView()};k.unhide=function(a){a=a||{};for(var d=this.that,c=d.colModel,f=d.get_p_data(),e=this._areas,h=0,k=e.length;h<k;h++){var l=e[h],n=l.type,r=l.r1,p=l.r2,v=l.c1,l=l.c2;if("column"==n)for(n=v;n<=l;n++)c[n].hidden=!1;else if("row"==n)for(n=r;n<=p;n++)f[n].pq_hidden=!1}!1!==a.refresh&&d.refreshView()};k.select=function(){var a=
this.that,d=a.iSelection,c=d._areas[0],f=this._areas,e=f[0];if(!e)return this;var h=e.r1,k=e.c1;if(d.dirty||1!=f.length||"block"!=f[0].type||!c||"cell"!=c.type&&"block"!=c.type||h!=c.r1||k!=c.c1)for(d.removeAll({trigger:!1}),h=0,k=f.length;h<k;h++)d.add(f[h],!1);else{var l=c.r1,n=c.c1,r=c.r2,c=c.c2,p=e.r2,e=e.c2,a=a.iCells;if(p==r&&e==c)return this;e>c?a.selectBlock({range:{r1:h,c1:c+1,r2:p,c2:e}}):e<c&&a.selectBlock({range:{r1:Math.max(h,l),c1:e+1,r2:Math.max(p,r),c2:c},remove:!0});p>r?a.selectBlock({range:{r1:r+
1,c1:k,r2:p,c2:e}}):p<r&&a.selectBlock({range:{r1:p+1,c1:Math.max(k,n),r2:r,c2:Math.max(e,c)},remove:!0});d._areas=f}d._trigger();return this};k.resize=function(a,d){var c=this._areas[0];return n(this.that,{r1:c.r1,c1:c.c1,rc:a,cc:d})};k.cut=function(a){a=a||{};a.cut=!0;return this.copy(a)};k.copy=function(a){a=a||{};this.dirty&&this.refresh();var d=this.that,c=a.dest,f=a.cut?!0:!1,e=null==a.copy?!0:a.copy,h=a.source||(f?"cut":"copy"),k=null==a.history?!0:a.history,l=null==a.allowInvalid?!0:a.allowInvalid,
n=[],r=[],p=d.get_p_data(),v=d.colModel,q=d.readCell,t=d.iMerge,s=this._areas;if(s.length){var x=this._areas[0],w=x.type,y=x.r1,C=x.c1,A="cell"==w?y:x.r2,x="cell"==w?C:x.c2,D=0;do{for(;y<=A;y++){for(var E=[],F=p[y],K={},L={},N=C;N<=x;N++){var H=v[N],G=H.dataIndx;if(!1!==H.copy){var O=F[G];e&&E.push(q(F,H,t,y,N));f&&(K[G]=void 0,L[G]=O)}}f&&n.push({rowIndx:y,rowData:F,oldRow:L,newRow:K,type:"update"});E=E.join("\t");r.push(E)}D++;x=s[D];if("row"==w&&x&&"row"==x.type)y=x.r1,C=x.c1,A=x.r2,x=x.c2;else break}while(1);
e&&(E=r.join("\n"),a.clip?(a=a.clip,a.val(E),a.select()):d._setGlobalStr(E));c?d.paste({dest:c,rowList:n,history:k,allowInvalid:l}):f&&!1!==d._digestData({rowList:n,source:h,history:k,allowInvalid:l})&&d.refresh({source:"cut"})}};k.clear=function(){return this.copy({copy:!1,cut:!0,source:"clear"})};k.add=function(a){this.init(a)};k._countArea=function(a){var d=a.r1,c=a.c1,f=a.r2,e=a.c2;return"cell"==a.type?1:(f-d+1)*(e-c+1)};k.count=function(){this.dirty&&this.refresh();for(var a="range"==this._type,
d=this._areas,c=0,f=d.length,e=0;e<f;e++)c+=a?this._countArea(d[e]):1;return c};k.rows=function(a){this.dirty&&this.refresh();var d=this.that,c=[],f=this._areas[0];if(f){var e=f.r1,h=f.c1,k=f.r2,n=f.c2,f=f.type,k=null==a?k:e+a;for(a=null==a?e:e+a;a<=k;a++)c.push({r1:a,c1:h,r2:a,c2:n,type:f})}return l.Range(d,c,"row")};k.columns=function(a){this.dirty&&this.refresh();var c=this.that,f=[],g=this._areas[0];if(g){var e=g.r1,h=g.c1,k=g.r2,n=g.c2,g=g.type,n=null==a?n:h+a;for(a=null==a?h:h+a;a<=n;a++)f.push({r1:e,
c1:a,r2:k,c2:a,type:g})}return l.Range(c,f,"column")};k.cell=function(a,c){this.dirty&&this.refresh();var f=this.that,g=[],e=this._areas[0];e&&(g=e.r1+a,e=e.c1+c,g=[g,e,g,e]);return l.Range(f,g,"cell")};k.item=function(a){this.dirty&&this.refresh();for(var c=0,f=!1,g=this._areas,e=0,h=g.length;e<h;e++){var k=g[e],l=this._countArea(k);if(c+l>a){f=!0;a-=c;break}else c+=l}if(f){if(k)var n=k.r1,r=k.c1,c=k.c2-r+1,n=n+Math.floor(a/c),r=r+a%c;return{r1:n,c1:r}}};k._normal=function(a,c){if(a.type)return a;
if("function"==a.push){for(var f=[],g=0,e=a.length;g<e;g++){var h=this._normal(a[g],c);h&&f.push(h)}return f}var f=this.that,k=f.get_p_data().length-1,l=f.colModel.length-1,g=a.r1,e=a.c1,g=g>k?k:g,e=e>l?l:e,n=a.rc,r=a.cc,h=a.r2,p=a.c2,h=n?g+n-1:h>k?k:h,p=r?e+r-1:p>l?l:p;if(0>l||0>k)return null;g>h&&(n=g,g=h,h=n);e>p&&(n=e,e=p,p=n);if(null!=g||null!=e)return null==g?(g=0,h=k,p=null==p?e:p,k="column"):null==e?(e=0,h=null==h?g:h,p=l,k="row"):null==h?(k="cell",h=g,p=e):k="block",c&&(f=f.iMerge.inflateRange(g,
e,h,p),g=f[0],e=f[1],h=f[2],p=f[3]),a.r1=g,a.c1=e,a.r2=h,a.c2=p,a.type=a.type||k,a};k.value=function(a){a=a||{};a=a.val;this.dirty&&this.refresh();var c=this.that,f=c.colModel,g=[],e=this._areas;if(void 0===a&&e.length){var h=e[0],k=h.r1,l=h.c1;return c.getCellData({rowIndx:k,colIndx:l})}for(var n=0;n<e.length;n++)for(var h=e[n],k=h.r1,l=h.c1,r=h.r2,h=h.c2;k<=r;k++){for(var p=c.normalize({rowIndx:k}),v=p.rowData,p=p.rowIndx,q={},t={},s=l;s<=h;s++){var x=f[s].dataIndx;t[x]=a;q[x]=v[x]}g.push({rowData:v,
rowIndx:p,type:"update",newRow:t,oldRow:q})}g.length&&(c._digestData({rowList:g,source:"range"}),c.refresh())};var c=l.Selection=function(a,d){if(null==a)throw"invalid param";if(!1==this instanceof c)return new c(a,d);this.that=a;var f=this;a.on("dataReady columnOrder addColumn deleteColumn",function(a,b){"pager"!=b.source&&f.renew()});this._base(a,d)},a={renew:function(){var a=this._areas,c=a.length;if(1==c){if(a=a[0],a=this._adjust(a))this.removeAll({trigger:!1}),this.add(a,!1)}else 1<c&&(this.dirty=
!0)},isDirty:function(){return this.dirty}},f=function(a){a.shiftKey&&"pqGrid:mousePQUp"!=a.type||(this._trigger("selectEnd",null,{selection:this.selection()}),this.off("mousePQUp",f),this.off("keyUp",f))};a._trigger=function(){var a=this.that;this.dirty&&this.refresh();a._trigger("selectChange",null,{selection:this});a.off("mousePQUp",f);a.off("keyUp",f);a.on("mousePQUp",f);a.on("keyUp",f)};a.removeAll=function(a){a=a||{};var c=this.that;c.iCells.removeAll({refresh:!0});c.iRows.removeAll({refresh:!0,
all:!0});this._areas=[];!1!==a.trigger&&this._trigger()};k.indexOf=function(a){this.dirty&&this.refresh();a=this._normal(a);var c=a.type,f=a.r1,g=a.c1,e=a.r2;a=a.c2;for(var h=this._areas,k=0,l=h.length;k<l;k++){var n=h[k],r=n;if(c==n.type&&f>=r.r1&&e<=r.r2&&g==r.c1&&a==r.c2)return k}return-1};a.add=function(a,c){var f=this.that,g=this._normal(a,!0),e=f.iCells,f=f.iRows,h=g.r1,k=g.c1,l=g.r2,n=g.type;0<=this.indexOf(g)||("row"==n?(e=this._areas,e.length&&(e=e[e.length-1],n=e.type,"row"==n&&h<=e.r2&&
(this.dirty=!0)),l>h?f.selectRange({range:g}):f.add({rowIndx:h})):"column"==n||"block"==n?e.selectBlock({range:g}):"cell"==n&&e.add({rowIndx:h,colIndx:k}),this._super(g),!1!==c&&this._trigger())};a._adjust=function(a){var c=this.that,f=c.get_p_data().length-1,c=c.colModel.length-1,g=a.r1,e=a.c1,h=a.r2,k=a.c2,h=h>f?f:h,k=k>c?c:k;if(0>c||0>f||g>h||e>k)return null;a.r1=g;a.r2=h;a.c1=e;a.c2=k;return a};k.removeRow=function(a,c){var f=a.r1,g=a.r2,e=this._areas,h=this._areas[c],k=h.r1,l=h.r2;f==k&&g==l?
e.splice(c,1):f>k?(h.r2=f-1,g<l&&(f=this._normal({r1:g+1,r2:l}),e.splice(c+1,0,f))):g<l&&(f>k&&(f=this._normal({r1:g+1,r2:l}),e.splice(c,0,f)),h.r1=g+1)};a.removeRow=function(a,c){var f=this.that,g=this._normal(a),e=this.indexOf(g);-1<e&&"row"==g.type&&g.r1==g.r2&&(f.iRows.remove({rowIndx:g.r1}),this._super(a,e),!1!==c&&this._trigger())};a.selectAll=function(a){a=a||{};var c=this.that,f=a.all,g=f?0:c.rowIndxOffset,e=c.colModel.length-1,h=g+(f?c.options.dataModel.data.length-1:c.pdata.length-1);"cell"==
a.type?(a={r1:g,c1:0},a.r2=h,a.c2=e,c.range(a).select()):(a={r1:g},a.r2=h,f||this.removeRows({all:!1,trigger:!1}),c.iRows.selectRange({range:a}),c=f?[]:this._areas,c.push({r1:g,c1:0,r2:h,c2:e,type:"row"}),this._areas=c,this._trigger());return this};a.removeRows=function(a){a=a||{};var c=a.all;this.that.iRows.removeAll({refresh:!0,all:a.all});c?this._areas=[]:this.refresh();!1!==a.trigger&&this._trigger()};a.refresh=function(){for(var a=this.that,c=[],f=a.colModel.length-1,a=a.get_p_data(),g=0,e=a.length;g<
e;g++){var h=a[g],k;h&&(h.pq_cellselect=void 0,h.pq_rowselect?k?k.r2=g:k={r1:g,r2:g,c1:0,c2:f,type:"row"}:k&&(c.push(k),k=null))}k&&c.push(k);this.dirty=!1;this._areas=c};l.extend(n,c,a)})();
(function(l){function n(a,c,b,d){a.push("<li data-option='",b,"' class='pq-menu-item'>","<label>","<input type='checkbox' ",c[b]?"checked":"","/>",d["strGroup_"+b],"</label></li>")}var k=l.paramquery;pq.aggregate={sum:function(a){for(var c=0,b=a.length,d;b--;)d=a[b],null!=d&&(c+=d-0);return c},avg:function(a,c){return this.sum(a,c,!0)/a.length},max:function(a,c){var b;b=c.dataType;"float"==b||"integer"==b?b=Math.max.apply(Math,a):"date"==b?(a.sort(function(a,b){a=Date.parse(a);b=Date.parse(b);isNaN(a)&&
(a=0);isNaN(b)&&(b=0);return b-a}),b=a[0]):(a.sort(),b=a[a.length-1]);return b},min:function(a,c){var b;b=c.dataType;var d,k;if("integer"==b||"float"==b)b=Math.min.apply(Math,a);else if("date"==b){k=a.length;for(b=[];k--;)(d=a[k])&&b.push({dateO:d,dateP:Date.parse(d)});b.sort(function(a,b){return a.dateP-b.dateP});b=b.length?b[0].dateO:void 0}else a.sort(),b=a[0];return b},count:function(a){return a.length}};var c=(k.cGroupView=function(a){this.that=a;a.options.groupModel.on&&this.init()}).prototype;
c.init=function(){var a,c,b,d;this._init||(this.mc=[],this.tree=[],this.summaryData=[],d=this.that,a=d.options,c=a.groupModel,a=a.bootstrap,b=(a=a.on)?"glyphicon ":"ui-icon ",this.groupRemoveIcon="pq-group-remove "+b+(a?"glyphicon-remove":"ui-icon-close"),this.toggleIcon="pq-group-toggle "+b,d.on("cellClick",this.onCellClick(this)).on("cellKeyDown",this.onCellKeyDown(this,c)).on(!0,"cellMouseDown",this.onCellMouseDown()).on("change",this.onChange(this,c)).on("dataReady",this.onDataReady(this,d)).on("beforeSortDone",
this.onBeforeSort(this,d)).on("columnDragDone",this.onColumnDrag(this)).on("columnOrder",this.onColumnOrder(this)),this._init=!0)};c.onCellClick=function(a){return function(c,b){b.rowData.pq_gtitle&&l(c.originalEvent.target).hasClass("pq-group-icon")&&a.toggle(b.rowIndxPage)}};c.onChange=function(a,c){return function(){a.saveState(c.refreshOnChange)}};c.onCellMouseDown=function(){return function(a,c){c.rowData.pq_gtitle&&l(a.originalEvent.target).hasClass("pq-group-icon")&&a.stopImmediatePropagation()}};
c.onCellKeyDown=function(a,c){return function(b,d){if(d.rowData.pq_gtitle&&0<=l.inArray(d.dataIndx,c.dataIndx)&&b.keyCode==l.ui.keyCode.ENTER)return a.toggle(d.rowIndxPage),!1}};c.showRows=function(){for(var a=this.that.options.dataModel.data,c=0,b=a.length;c<b;c++)a[c].pq_hidden=!1};c.removeGroup=function(a,c){for(var b=this.that.options.groupModel.dataIndx,d=0;d<b.length;d++)if(a==b[d]){b.splice(d,1);break}b.length||(this.showRows(),this.mc.length=0);!1!==c&&this.refreshFull()};c.addGroup=function(a,
c){var b=this.that.options.groupModel;b.dataIndx=b.dataIndx||[];null!=a&&-1==l.inArray(a,b.dataIndx)&&(b.dataIndx.push(a),this.refreshFull())};c._initHeadSortable=function(){this.$header.sortable({axis:"x",distance:3,tolerance:"pointer",cancel:".pq-group-menu",stop:this.onSortable(this,this.that.options)})};c.onColumnDrag=function(a){return function(c,b){var d=b.column.colModel;d&&d.length?a.acceptDrop=!1:a._initHeadDroppable()}};c._initHeadDroppable=function(){var a=this,c=a.that,b=a.$header;b&&
(b.droppable({accept:function(b){return a.acceptDrop},tolerance:"pointer",hoverClass:"pq-drop-hover",drop:a.onDrop(c,a)}),a.acceptDrop=!0)};c.onDrop=function(a,c){return function(b,d){var k=1*d.draggable.attr("pq-col-indx");c.addGroup(a.colModel[k].dataIndx);c.acceptDrop=!1}};c.onSortable=function(a,c){return function(){for(var b=[],d=c.groupModel,k=d.dataIndx,g=[],e=!1,h=l(this).find(".pq-group-item"),n=0;n<h.length;n++){var B=l(h[n]),z=B.data("indx"),B=B.data("dir");k[n]!=z&&(e=!0);b.push(z);g.push(B)}e&&
(d.dataIndx=b,d.dir=g,a.refreshFull())}};c._initHeader=function(a,c){if(this.$header){var b=this.$header,d=b.find(".pq-group-item");b.data("uiSortable")||this._initHeadSortable();d.length||b.append("<span class='pq-group-placeholder'>"+a.strGroup_header+"</span>");c.headerMenu&&this._initHeaderMenu()}};c.createHeader=function(){for(var a=this,c=a.that,b=a.$header,d=c.options,k=d.bootstrap,g=c.columns,e=k.on,h=d.groupModel,n=h.dataIndx,B=n.length;B--;)null==g[n[B]]&&n.splice(B,1);B=n.length;if(h.header&&
h.on){b?b.empty():(b=a.$header=l("<div class='pq-group-header ui-helper-clearfix' ></div>").appendTo(c.$top),b.on("click",".pq-group-item",function(b){b=l(b.target);var c=l(this).data("indx");b.hasClass("pq-group-remove")?a.removeGroup(c):a.groupToggle(c)}));if(B){for(var c=[],z=0;z<B;z++){var r=n[z],p=g[r],v=e?k.groupModel.icon:h.icon;c.push("<div class='pq-group-item' data-indx='",r,"' data-dir='",h.dir[z],"'>","<span class='",a.toggleIcon,h.collapsed[z]?v[1]:v[0],"' ></span>",p.pqtitle||("string"==
typeof p.title?p.title:r),"<span class='",a.groupRemoveIcon,"' ></span></div>")}b[0].innerHTML=c.join("")}a._initHeader(d,h)}else b&&(b.remove(),a.$header=null)};c._initHeaderMenu=function(){for(var a=this.that,c=a.options,b=this.$header,d=["<ul class='pq-group-menu'><li>",a.BS_on?"<span class='glyphicon glyphicon-chevron-left'></span>":"","<ul>"],k=c.groupModel,g=k.menuItems,e=0,h=g.length;e<h;e++)n(d,k,g[e],c);d.push("</ul></li></ul>");b=l(d.join("")).appendTo(b);b.menu({icons:{submenu:"ui-icon-carat-1-w"},
position:{my:"right top",at:"left top"}});b.change(function(b){if("INPUT"==b.target.nodeName){b=l(b.target).closest("li").data("option");var d={};d[b]=!c.groupModel[b];d.refresh=!0;a.groupOption(d)}})};c.setOption=function(){this._init&&(this.refreshColumns(),this.summaryData.length=0,this.tree.length=0,this._initmerge())};c.onDataReady=function(a,c){return function(){a.tree.length=0;var b=c.options.groupModel;b.on&&(b.dataIndx.length?(a.refreshColumns(),a._groupData(),a._initcollapsed(),a._initmerge()):
b.grandSummary&&(a.refreshColumns(),a._groupData()));a.createHeader()}};c.onColumnOrder=function(a){return function(){a._initmerge()}};c.pq_gc_=function(){return"pq_gc_"};c.onBeforeSort=function(a,c){return function(b){if(!b.isDefaultPrevented()){var d=c.options,k=d.groupModel;if(k.on){b=c.columns;for(var g=[],d=d.dataModel.data||[],e=[],h,l,n=k.dataIndx,z=n.length;z--;){var r=n[z];h=b[r];var p=h.groupChange;if(p)for(g.push(h),k=a.pq_gc_()+r,e.push(k),h.sortType=a.sortType(k),l=d.length;l--;)h=d[l],
h[k]=p(h[r])}c.one("sort",function(){if(z=g.length)for(;z--;)g[z].sortType=void 0})}}}};c.sortType=function(a){return function(c,b,d){return c[a]!=b[a]?c[d]-b[d]:0}};c.groupToggle=function(a){var c=this.that.options.groupModel,b=c.collapsed;a=l.inArray(a,c.dataIndx);b[a]=!b[a];this.trigger(null,a);this.refreshView()};c.expandIndx=function(a){var c=this.that,b=!0==a.close;a=a.indx.split(",");var d=a.length,k=this.tree,g,e,h;g=0;var l,c=c.pdata;if(!(d>k.length)){for(var n=0;n<d;n++){l=1*a[n]+g;g=k[n][l];
if(!g){if(0==n)return;break}g=g.rip;if(!b||b&&n==d-1)e=c[g],e.pq_close!=b&&(h=e,e.pq_close=b);e=k[n+1];var z=void 0;if(e){do z=e[l].rip,l++;while(z<g);g=l-1}else g=void 0}h&&(this.trigger(h),this.saveState(!0))}};c._editorSummary=function(a,c){var b=a.summaryOptions;return function(a){var k=a.rowData;if(k.pq_gsummary||k.pq_gtitle){var k=pq.aggregate,g=a.column,e=g.summary,e=e?e.edit:null,h=g.dataType,g=[""];if(-1<l.inArray(a.dataIndx,c.dataIndx)||!c.summaryEdit&&!e||!1===e)return!1;"integer"==h||
"float"==h?h="number":"date"!==h&&(h="string");e=b[h].split(",");a=l.inArray;for(var n in k)-1<a(n,e)&&g.push(n);return 1==g.length?!1:{type:"select",prepend:c.prepend,options:c.options||g,valueIndx:c.valueIndx,labelIndx:c.labelIndx,init:c.init||function(a){var b=a.column.summary,c;b||(b=a.column.summary={});c=b.type;setTimeout(function(){a.$cell.find("select").val(c)},100)},getData:c.getData||function(a){var b=a.column;a=a.$cell.find("select").val();b.summary.type=a;this.one("beforeValidate",function(a,
b){b.allowInvalid=!0;b.track=!1;b.history=!1});return a}}}}};c._renderTitle=function(a,c){var b=this.that,d=a.bootstrap,k=d.on,d=k?d.groupModel.icon:c.icon,g=k?["glyphicon "+d[0],"glyphicon "+d[1]]:["ui-icon "+d[0],"ui-icon "+d[1]];return function(a){var d=a.rowData,k,l,m;if(d.pq_gtitle&&null!=a.cellData)return k=d.pq_close,l=d.pq_level,m=c.title,m=m[l]?m[l]:c.titleDefault,m="function"===typeof m?m.call(b,a):m.replace("{0}",a.cellData).replace("{1}",d.pq_items),{text:(a.Export?"":"<span class='pq-group-icon "+
g[k?1:0]+"'></span>")+m,cls:"pq-group-title-cell"}}};c._renderSummary=function(a){var c=this.that;return function(b){var d=b.rowData,k,g;if(d.pq_gsummary||d.pq_gtitle){d=b.column;k=d.summary.type;g=a.summaryTitle[k];if("function"==typeof g)return g.call(c,b);k=b.formatVal;null==k&&(k=b.cellData,k=null==k?"":k);"number"!=typeof k||d.format||parseInt(k)===k||(k=k.toFixed(2));return g?g.replace("{0}",k):k}}};c.refreshColumns=function(){for(var a=this.that,c=a.options,b=c.groupModel,d=b.on,k=b.fixCols,
g,e,h,l,n=b.dataIndx,z=n.length,r=c.colModel,p=r.length;p--;)h=r[p],h._render&&(h._render==h._renderGT?(delete h._renderGT,delete h._render):h._render==h._renderGS&&(delete h._renderGS,delete h._render)),h._nodrag&&(delete h._nodrag,delete h._nodrop),d&&(l=h.summary)&&l.type&&(e=e||this._renderSummary(c),h._render=h._renderGS=e);c.geditor=d?this._editorSummary(c,b):void 0;if(d)for(p=z-1;0<=p;p--)h=a.getColumn({dataIndx:n[p]}),g=g||this._renderTitle(c,b),h._renderGT=h._render=g;if(k&&d)for(p=0;p<z;p++)c=
a.getColIndx({dataIndx:n[p]}),h=r[c],h._nodrag=h._nodrop=!0,c!=p&&(a.iDragColumns.moveColumn(c,p,!0),a.iColModel.init())};c.refreshFull=function(){this.refreshColumns();this.that.sort()};c.refreshView=function(){this.that.refreshView()};c.expandAll=function(a){a=a||{};a=!0==a.close;var c=this.that.options.groupModel,b=c.collapsed,c=c.dataIndx,d;for(d=0;d<c.length;d++)b[d]=a;this.trigger(null,null,!0);this.refreshFull()};c.showHideRows=function(a,c,b,d){for(var k=[],g=this.that.pdata,e=g.length;a<
e;a++){var h=g[a];if(h.pq_gsummary)if(h.pq_level<c)break;else h.pq_hidden=b;else if(h.pq_gtitle){var l=h.pq_close;l&&k.push({indx:a,level:h.pq_level});if(h.pq_level<=c)break;else h.pq_hidden=d&&!l?!0:b}else h.pq_hidden=b}return k};c.trigger=function(a,c,b){var d=this.that,k=d.options.groupModel,g={};a?(c=a.pq_level,b=a[k.dataIndx[c]],a=a.pq_close,g={level:c,close:a,group:b}):b?(a=k.collapsed[0],g={all:!0,close:a}):null!=c&&(a=k.collapsed[c],g={level:c,close:a});d._trigger("group",null,g)};c.toggle=
function(a){a=this.that.pdata[a];a.pq_close=a.pq_close?!1:!0;this.trigger(a);this.saveState(!0)};c.saveState=function(a){var c=this.that,b=c.options.groupModel;if(b.on&&b.dataIndx.length){for(var b=c.pdata,d=b.length,k=Array(d),g=0;g<d;g++)k[g]=b[g];this.pdata=k;a&&c.refreshView()}};c._initmerge=function(){for(var a=this.that,c=a.options,b=c.groupModel.merge,d=this.tree,k=a.rowIndxOffset,g,e,h,l,n,z=a.colModel.length,r=[],p=a.pdata,v=0;v<d.length;v++){g=d[v];h=a.getColIndx({dataIndx:c.groupModel.dataIndx[v]});
for(var q=0,t=g.length;q<t;q++){e=g[q];l=e.rip;if(null==l)break;b?(e=e.rip2,n=e-l,e=l+k,r.push({r1:e,rc:n,c1:h,cc:1})):(e=l+k,l=p[l],l.pq_close||r.push({r1:e,rc:1,c1:h,cc:z-h}))}}r.length?(this.mc=c.mergeCells=r,a.iMerge.init()):this.mc.length&&(this.mc.length=0,a.iMerge.init())};c._initcollapsed=function(){var a=this.that,c=a.options.groupModel.merge,b=this.pdata,a=a.pdata,d,k,g,e;if(a){for(var h=0,l=a.length;h<l;h++)d=a[h],k=d.pq_gtitle,void 0!==k&&(k=d.pq_level,e=null,b&&(g=(g=b[h])?g.pq_close:
null,null!=g&&(e=d.pq_close=g)),null==e&&(e=d.pq_close),e?this.showHideRows(h+1,k,!0):c&&(d.pq_hidden=!0));delete this.pdata}};c._groupChange=function(a){var c=l.trim,b=this.pq_gc_();return function(d,k,g){if(g.groupChange)return d=d[b+k],null!=d?d:"";d=c(d[k]);return a?d.toUpperCase():d}};c._groupData=function(){var a=this.that,c=pq.aggregate,b=a.pdata,d=a.options,k=d.groupModel,g=k.merge,e=k.grandSummary,h=l.inArray,n=a.colModel,B=n.length,z=this._groupChange(k.ignoreCase),r=b.length,p=k.dataIndx,
v=p.length,q=k.collapsed||[],t=[],s={},x=a.columns,w=[],y,k=k.showSummary||[],C=[];if(b&&0<r){for(var A=v-1;0<=A;A--)k[A]=null!=k[A]?k[A]:!1,q[A]=null!=q[A]?q[A]:!1,C[A]=(C[A+1]?C[A+1]:0)+k[A],w[A]=x[p[A]];for(y=0;y<B;y++){var D=n[y],E=D.dataIndx,F=D.summary;F&&F.type&&-1==h(E,p)&&(t.push({column:D}),s[E]=Array(r-1))}y=t.length;h=[];n=[];B=[];x=[];for(A=0;A<v;A++)x[A]=null,B[A]="",n[A]=[];for(var K=0;K<=r;K++){for(var L=b[K],E=!1,N=null,A=0;A<v;A++){B[A]=K<r?z(L,p[A],w[A]):"";if(x[A]!=B[A]||K==r)E=
!0,null==N&&(N=A);if(E){var D=n[A],H=D[D.length-1];H&&(H.rip2=h.length+C[A]);D.push({rowIndx:K,title:B[A]})}}if(E){if(0<K)for(A=v-1;A>=N;A--){for(var H={},D=n[A],G=D.length-2?D[D.length-2].rip:A,O=D.length-2?D[D.length-2].rowIndx:0,I=D[D.length-1].rowIndx,J=0;J<y;J++){var D=t[J].column,F=D.summary,F=F.type,E=D.dataIndx,P="",P=s[E].slice(O,I),P=c[F](P,D);H[E]=P}if(k[A]){var D={pq_gsummary:!0,pq_level:A,pq_rowcls:"pq-summary-row"},M;for(M in H)D[M]=H[M];h.push(D)}D=h[G];for(M in H)D[M]=H[M];g&&(D.pq_rowcls=
"pq-summary-row");D.pq_items=I-O}if(K==r)break;for(A=0;A<v;A++)x[A]=B[A];for(A=N;A<v;A++)D={pq_gtitle:!0,pq_level:A,pq_close:q[A]},D[p[A]]=B[A],E=h.push(D),D=n[A],D[D.length-1].rip=E-1}if(K==r)break;L.pq_hidden=!1;h.push(L);for(A=0;A<y;A++)D=t[A].column,E=D.dataIndx,s[E][K]=L[E]}this.tree=n;a.pdata=h}else a.dataGM=null;if(e){H={pq_grandsummary:!0,pq_gsummary:!0};for(J=0;J<y;J++)D=t[J].column,F=D.summary,F=F.type,E=D.dataIndx,P=s[E],P=c[F](P,D),H[E]=P;this.summaryData=d.summaryData=[H]}else this.summaryData.length=
0};k=k.pqGrid.prototype;k.group=function(a){this.iGroupView[a.indx?"expandIndx":"expandAll"](a)};k.groupOption=function(a){var c=a.dataIndx,b=c?c.length:0,c=!1,d=this.iGroupView,k=this.options,g=k.groupModel,e=g.dataIndx,h=a.on||null==a.on&&g.on;h&&d.init();h&&(b||e.length)&&(c=!0);if(g.on&&e.length&&(!1===a.on||0===b))for(b=k.dataModel.data,k=0,e=b.length;k<e;k++)b[k].pq_hidden=!1;l.extend(g,a);d.setOption();if(!1!==a.refresh)this[c?"sort":"refreshView"]()}})(jQuery);
